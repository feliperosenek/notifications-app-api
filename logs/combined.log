{"body":{"query":"\n                        UPDATE messages\n                        SET status = 'closed'\n                        WHERE id = 6593\n                    "},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:51:28.787Z"}
{"duration":"2906ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:51:31.692Z"}
{"body":{"query":"UPDATE messages SET status = 'closed' WHERE id = 6598"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:52:59.777Z"}
{"duration":"221ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:52:59.997Z"}
{"body":{"email":"feliperosenek@gmail.com","password":"Feliperosene2130*"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/login","service":"notifications-app-api","timestamp":"2025-06-15T17:53:39.053Z"}
{"duration":"1360ms","level":"info","message":"Resposta enviada","method":"POST","path":"/login","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:53:40.413Z"}
{"body":{"userId":null},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/check-route","service":"notifications-app-api","timestamp":"2025-06-15T17:53:40.553Z"}
{"duration":"3ms","level":"info","message":"Resposta enviada","method":"POST","path":"/check-route","service":"notifications-app-api","statusCode":400,"timestamp":"2025-06-15T17:53:40.556Z"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:53:40.607Z"}
{"duration":"210ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:53:40.817Z"}
{"body":{"userId":14},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/check-route","service":"notifications-app-api","timestamp":"2025-06-15T17:53:40.897Z"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:53:41.031Z"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:53:41.077Z"}
{"duration":"387ms","level":"info","message":"Resposta enviada","method":"POST","path":"/check-route","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:53:41.284Z"}
{"duration":"875ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:53:41.906Z"}
{"body":{"query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:53:41.956Z"}
{"duration":"1036ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:53:42.113Z"}
{"duration":"211ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:53:42.167Z"}
{"body":{"query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:53:42.174Z"}
{"duration":"216ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:53:42.390Z"}
{"body":{"query":"\n                        UPDATE messages\n                        SET status = 'closed'\n                        WHERE id = 6599\n                    "},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:56:47.872Z"}
{"duration":"221ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:56:48.093Z"}
{"body":{"query":"\n                        UPDATE messages\n                        SET status = 'closed'\n                        WHERE id = 6600\n                    "},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15T17:57:23.542Z"}
{"duration":"219ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15T17:57:23.761Z"}
{"body":{"query":"UPDATE messages SET status = 'closed' WHERE id = 6601"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 14:58:28.108"}
{"duration":"221ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 14:58:28.328"}
{"body":{"query":"UPDATE messages SET status = 'closed' WHERE id = 6602"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 14:59:32.985"}
{"duration":"217ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 14:59:33.202"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:01:17","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:01:17"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6603,"service":"notifications-app-api","socketCount":2,"timestamp":"2025-06-15 15:01:17"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:02:48","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:02:48"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6604,"service":"notifications-app-api","socketCount":2,"timestamp":"2025-06-15 15:02:48"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:03:43","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:03:43"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6605,"service":"notifications-app-api","socketCount":2,"timestamp":"2025-06-15 15:03:43"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.message is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.message is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:03:57"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.message is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.message is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:04:02"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.MESSAGE is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.MESSAGE is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:04:52"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.MESSAGE is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.MESSAGE is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:05:10"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.MESSAGE is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.MESSAGE is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:05:41"}
{"level":"socket","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"sviGePYSqhuOUihVAAAB","timestamp":"2025-06-15 15:09:13"}
{"level":"socket","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"89ws9M8bmV0Ic3LrAAAB","timestamp":"2025-06-15 15:09:26"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"N49WxtJi-CAfWMnTAAAB","timestamp":"2025-06-15 15:09:52","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente N49WxtJi-CAfWMnTAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:09:52","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:09:53","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente N49WxtJi-CAfWMnTAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:09:53","type":"socket"}
{"level":"info","message":"Cliente N49WxtJi-CAfWMnTAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:09:53","totalClients":1,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"_p6V5CbKb6fKL79TAAAD","timestamp":"2025-06-15 15:09:58","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente _p6V5CbKb6fKL79TAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:09:58","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:09:58","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente _p6V5CbKb6fKL79TAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:09:58","type":"socket"}
{"level":"info","message":"Cliente _p6V5CbKb6fKL79TAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:09:58","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"3lpr8ylsJzawlBmNAAAB","timestamp":"2025-06-15 15:10:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 3lpr8ylsJzawlBmNAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:10:28","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"dueUvimaI3-A1ZdEAAAD","timestamp":"2025-06-15 15:10:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente dueUvimaI3-A1ZdEAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:10:28","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:10:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 3lpr8ylsJzawlBmNAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:10:31","type":"socket"}
{"level":"info","message":"Cliente 3lpr8ylsJzawlBmNAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:10:31","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:10:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente dueUvimaI3-A1ZdEAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:10:31","type":"socket"}
{"level":"info","message":"Cliente dueUvimaI3-A1ZdEAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:10:31","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"bquegyj1VN-UfQReAAAB","timestamp":"2025-06-15 15:10:57","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente bquegyj1VN-UfQReAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:10:57","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"NWhCtuSqnFnxEbJRAAAD","timestamp":"2025-06-15 15:10:57","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente NWhCtuSqnFnxEbJRAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:10:57","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:11:00","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente bquegyj1VN-UfQReAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:00","type":"socket"}
{"level":"info","message":"Cliente bquegyj1VN-UfQReAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:00","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:11:00","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente NWhCtuSqnFnxEbJRAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:00","type":"socket"}
{"level":"info","message":"Cliente NWhCtuSqnFnxEbJRAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:00","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"9-ICotNj0B2k94s1AAAB","timestamp":"2025-06-15 15:11:10","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 9-ICotNj0B2k94s1AAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:11:10","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Y_ZFehkukcX0d2yFAAAD","timestamp":"2025-06-15 15:11:10","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Y_ZFehkukcX0d2yFAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:11:10","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:11:13","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 9-ICotNj0B2k94s1AAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:13","type":"socket"}
{"level":"info","message":"Cliente 9-ICotNj0B2k94s1AAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:13","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:11:13","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Y_ZFehkukcX0d2yFAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:13","type":"socket"}
{"level":"info","message":"Cliente Y_ZFehkukcX0d2yFAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:13","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"3Wg0MzSh7Eg_y43ZAAAB","timestamp":"2025-06-15 15:11:47","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 3Wg0MzSh7Eg_y43ZAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:11:47","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"syhDrXFyaQgbrODCAAAD","timestamp":"2025-06-15 15:11:47","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente syhDrXFyaQgbrODCAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:11:47","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:11:48","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 3Wg0MzSh7Eg_y43ZAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:48","type":"socket"}
{"level":"info","message":"Cliente 3Wg0MzSh7Eg_y43ZAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:48","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:11:49","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente syhDrXFyaQgbrODCAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:49","type":"socket"}
{"level":"info","message":"Cliente syhDrXFyaQgbrODCAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:11:49","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"fWnwzx9F76UGwEowAAAB","timestamp":"2025-06-15 15:12:03","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente fWnwzx9F76UGwEowAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:12:03","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"0KWxzyoi3desPvLiAAAD","timestamp":"2025-06-15 15:12:04","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 0KWxzyoi3desPvLiAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:12:04","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:12:04","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente fWnwzx9F76UGwEowAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:04","type":"socket"}
{"level":"info","message":"Cliente fWnwzx9F76UGwEowAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:04","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:12:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 0KWxzyoi3desPvLiAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:05","type":"socket"}
{"level":"info","message":"Cliente 0KWxzyoi3desPvLiAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:05","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"fWnwzx9F76UGwEowAAAB","timestamp":"2025-06-15 15:12:10","type":"socket"}
{"level":"info","message":"Cliente fWnwzx9F76UGwEowAAAB removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:12:10","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"0KWxzyoi3desPvLiAAAD","timestamp":"2025-06-15 15:12:10","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:10","type":"socket"}
{"body":{"userId":null},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/check-route","service":"notifications-app-api","timestamp":"2025-06-15 15:12:18.856"}
{"duration":"13ms","level":"info","message":"Resposta enviada","method":"POST","path":"/check-route","service":"notifications-app-api","statusCode":400,"timestamp":"2025-06-15 15:12:18.869"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:12:18.874"}
{"duration":"212ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:12:19.086"}
{"body":{"userId":14},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/check-route","service":"notifications-app-api","timestamp":"2025-06-15 15:12:19.139"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"9JhFmAD5fkw3YDr1AAAC","timestamp":"2025-06-15 15:12:19","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"-dehEN2oMdyrNitzAAAD","timestamp":"2025-06-15 15:12:19","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 9JhFmAD5fkw3YDr1AAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:12:19","type":"socket"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:12:19.295"}
{"level":"info","message":"Evento set-route recebido do cliente -dehEN2oMdyrNitzAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:12:19","type":"socket"}
{"duration":"404ms","level":"info","message":"Resposta enviada","method":"POST","path":"/check-route","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:12:19.543"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:12:19","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 9JhFmAD5fkw3YDr1AAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:19","type":"socket"}
{"level":"info","message":"Cliente 9JhFmAD5fkw3YDr1AAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:19","totalClients":1,"type":"socket"}
{"duration":"666ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:12:19.961"}
{"body":{"query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:12:19.988"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:12:20","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente -dehEN2oMdyrNitzAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:20","type":"socket"}
{"level":"info","message":"Cliente -dehEN2oMdyrNitzAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:20","totalClients":2,"type":"socket"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:12:20.272"}
{"duration":"392ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:12:20.380"}
{"duration":"212ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:12:20.484"}
{"body":{"query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:12:20.514"}
{"duration":"212ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:12:20.727"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"M_09cqjFZYp89ViQAAAC","timestamp":"2025-06-15 15:12:53","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Bb3MTafNgb3bKlwLAAAD","timestamp":"2025-06-15 15:12:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente M_09cqjFZYp89ViQAAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:12:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Bb3MTafNgb3bKlwLAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:12:53","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:12:55","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente M_09cqjFZYp89ViQAAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:55","type":"socket"}
{"level":"info","message":"Cliente M_09cqjFZYp89ViQAAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:55","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:12:55","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Bb3MTafNgb3bKlwLAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:55","type":"socket"}
{"level":"info","message":"Cliente Bb3MTafNgb3bKlwLAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:55","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"Bb3MTafNgb3bKlwLAAAD","timestamp":"2025-06-15 15:12:58","type":"socket"}
{"level":"info","message":"Cliente Bb3MTafNgb3bKlwLAAAD removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:12:58","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"M_09cqjFZYp89ViQAAAC","timestamp":"2025-06-15 15:12:58","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:12:58","type":"socket"}
{"body":{"userId":null},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/check-route","service":"notifications-app-api","timestamp":"2025-06-15 15:13:29.256"}
{"duration":"11ms","level":"info","message":"Resposta enviada","method":"POST","path":"/check-route","service":"notifications-app-api","statusCode":400,"timestamp":"2025-06-15 15:13:29.266"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:13:29.330"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:13:29.551"}
{"body":{"query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:13:29.563"}
{"duration":"1258ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:13:30.587"}
{"body":{"userId":14},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/check-route","service":"notifications-app-api","timestamp":"2025-06-15 15:13:30.675"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"rJlCs_2aMrb8DsvjAAAC","timestamp":"2025-06-15 15:13:30","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"VZ2vJ76gkRUmlDtgAAAD","timestamp":"2025-06-15 15:13:30","type":"socket"}
{"duration":"1246ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:13:30.797"}
{"duration":"1248ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:13:30.810"}
{"body":{"query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:13:30.828"}
{"level":"info","message":"Evento set-route recebido do cliente rJlCs_2aMrb8DsvjAAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:13:30","type":"socket"}
{"body":{"query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14"},"ip":"192.168.0.102","level":"info","message":"Requisição recebida","method":"POST","path":"/","service":"notifications-app-api","timestamp":"2025-06-15 15:13:30.869"}
{"level":"info","message":"Evento set-route recebido do cliente VZ2vJ76gkRUmlDtgAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:13:30","type":"socket"}
{"duration":"329ms","level":"info","message":"Resposta enviada","method":"POST","path":"/check-route","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:13:31.004"}
{"duration":"237ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:13:31.065"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:13:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente rJlCs_2aMrb8DsvjAAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:13:31","type":"socket"}
{"level":"info","message":"Cliente rJlCs_2aMrb8DsvjAAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:13:31","totalClients":1,"type":"socket"}
{"duration":"348ms","level":"info","message":"Resposta enviada","method":"POST","path":"/","service":"notifications-app-api","statusCode":200,"timestamp":"2025-06-15 15:13:31.217"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:13:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente VZ2vJ76gkRUmlDtgAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:13:31","type":"socket"}
{"level":"info","message":"Cliente VZ2vJ76gkRUmlDtgAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:13:31","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"tO2TAGycVy8OaEwfAAAB","timestamp":"2025-06-15 15:16:20","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente tO2TAGycVy8OaEwfAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:16:20","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"PfcBbvcuU_xqJeeIAAAD","timestamp":"2025-06-15 15:16:22","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente PfcBbvcuU_xqJeeIAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:16:22","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:16:23","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente tO2TAGycVy8OaEwfAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:16:23","type":"socket"}
{"level":"info","message":"Cliente tO2TAGycVy8OaEwfAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:16:23","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:16:23","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente PfcBbvcuU_xqJeeIAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:16:23","type":"socket"}
{"level":"info","message":"Cliente PfcBbvcuU_xqJeeIAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:16:23","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"EuTkUllujmuCWkWXAAAB","timestamp":"2025-06-15 15:17:39","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente EuTkUllujmuCWkWXAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:17:39","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"TLyCX860dCqE5gjkAAAD","timestamp":"2025-06-15 15:17:40","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente TLyCX860dCqE5gjkAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:17:40","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:17:41","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente EuTkUllujmuCWkWXAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:41","type":"socket"}
{"level":"info","message":"Cliente EuTkUllujmuCWkWXAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:41","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:17:41","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente TLyCX860dCqE5gjkAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:41","type":"socket"}
{"level":"info","message":"Cliente TLyCX860dCqE5gjkAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:41","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"5nqfloR78pXtR1rNAAAB","timestamp":"2025-06-15 15:17:56","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 5nqfloR78pXtR1rNAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:17:56","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"4_EF9XS12AdZaHv3AAAD","timestamp":"2025-06-15 15:17:56","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 4_EF9XS12AdZaHv3AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:17:56","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:17:57","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 4_EF9XS12AdZaHv3AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:57","type":"socket"}
{"level":"info","message":"Cliente 4_EF9XS12AdZaHv3AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:57","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:17:57","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 5nqfloR78pXtR1rNAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:57","type":"socket"}
{"level":"info","message":"Cliente 5nqfloR78pXtR1rNAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:17:57","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"FSX_WOc4sXNurv9rAAAB","timestamp":"2025-06-15 15:18:51","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente FSX_WOc4sXNurv9rAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:18:51","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"xixtvtEfFSYgvEqdAAAD","timestamp":"2025-06-15 15:18:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente xixtvtEfFSYgvEqdAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:18:53","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:18:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente FSX_WOc4sXNurv9rAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:18:54","type":"socket"}
{"level":"info","message":"Cliente FSX_WOc4sXNurv9rAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:18:54","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:18:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente xixtvtEfFSYgvEqdAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:18:54","type":"socket"}
{"level":"info","message":"Cliente xixtvtEfFSYgvEqdAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:18:54","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"AoT-B1IXj_CF1NS3AAAC","timestamp":"2025-06-15 15:19:02","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"4IwlcYmNsUPKReIJAAAD","timestamp":"2025-06-15 15:19:02","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente AoT-B1IXj_CF1NS3AAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:19:02","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 4IwlcYmNsUPKReIJAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:19:02","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:19:04","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente AoT-B1IXj_CF1NS3AAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:04","type":"socket"}
{"level":"info","message":"Cliente AoT-B1IXj_CF1NS3AAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:04","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:19:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 4IwlcYmNsUPKReIJAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:05","type":"socket"}
{"level":"info","message":"Cliente 4IwlcYmNsUPKReIJAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:05","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"AoT-B1IXj_CF1NS3AAAC","timestamp":"2025-06-15 15:19:42","type":"socket"}
{"level":"info","message":"Cliente AoT-B1IXj_CF1NS3AAAC removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:19:42","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"4IwlcYmNsUPKReIJAAAD","timestamp":"2025-06-15 15:19:42","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:42","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"mEU5efa19m9_GuC_AAAG","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"1KRTfOaaLMsJrDfDAAAH","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente mEU5efa19m9_GuC_AAAG","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 1KRTfOaaLMsJrDfDAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente mEU5efa19m9_GuC_AAAG.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Cliente mEU5efa19m9_GuC_AAAG associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 1KRTfOaaLMsJrDfDAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","type":"socket"}
{"level":"info","message":"Cliente 1KRTfOaaLMsJrDfDAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:19:48","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"mEU5efa19m9_GuC_AAAG","timestamp":"2025-06-15 15:22:14","type":"socket"}
{"level":"info","message":"Cliente mEU5efa19m9_GuC_AAAG removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:22:14","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"1KRTfOaaLMsJrDfDAAAH","timestamp":"2025-06-15 15:22:14","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:14","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"yQSpmsUjCjiJ0NfNAAAK","timestamp":"2025-06-15 15:22:17","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"rnIiuZMn83bKOh5YAAAL","timestamp":"2025-06-15 15:22:17","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente yQSpmsUjCjiJ0NfNAAAK","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:22:17","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente rnIiuZMn83bKOh5YAAAL","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:22:17","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:22:18","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente yQSpmsUjCjiJ0NfNAAAK.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:18","type":"socket"}
{"level":"info","message":"Cliente yQSpmsUjCjiJ0NfNAAAK associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:18","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:22:18","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente rnIiuZMn83bKOh5YAAAL.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:18","type":"socket"}
{"level":"info","message":"Cliente rnIiuZMn83bKOh5YAAAL associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:18","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"kTDBIp3D7RRXzdWbAAAB","timestamp":"2025-06-15 15:22:30","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente kTDBIp3D7RRXzdWbAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:22:30","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"8Xg3cz3XwH35AH0OAAAD","timestamp":"2025-06-15 15:22:31","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 8Xg3cz3XwH35AH0OAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:22:31","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:22:33","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente kTDBIp3D7RRXzdWbAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:33","type":"socket"}
{"level":"info","message":"Cliente kTDBIp3D7RRXzdWbAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:33","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:22:33","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 8Xg3cz3XwH35AH0OAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:33","type":"socket"}
{"level":"info","message":"Cliente 8Xg3cz3XwH35AH0OAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:22:33","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"8Xg3cz3XwH35AH0OAAAD","timestamp":"2025-06-15 15:24:26","type":"socket"}
{"level":"info","message":"Cliente 8Xg3cz3XwH35AH0OAAAD removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:24:26","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"kTDBIp3D7RRXzdWbAAAB","timestamp":"2025-06-15 15:24:26","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:26","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"ddGh2YK3DLlACIpTAAAG","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"yMtQKIWBSgtEJE6gAAAH","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente ddGh2YK3DLlACIpTAAAG","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente yMtQKIWBSgtEJE6gAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente ddGh2YK3DLlACIpTAAAG.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Cliente ddGh2YK3DLlACIpTAAAG associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente yMtQKIWBSgtEJE6gAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","type":"socket"}
{"level":"info","message":"Cliente yMtQKIWBSgtEJE6gAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:28","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"ddGh2YK3DLlACIpTAAAG","timestamp":"2025-06-15 15:24:42","type":"socket"}
{"level":"info","message":"Cliente ddGh2YK3DLlACIpTAAAG removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:24:42","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"yMtQKIWBSgtEJE6gAAAH","timestamp":"2025-06-15 15:24:42","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:42","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"ZgLmlbMyFXqF9QlIAAAK","timestamp":"2025-06-15 15:24:48","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"8g7cBpAPVTqUPHwuAAAL","timestamp":"2025-06-15 15:24:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente ZgLmlbMyFXqF9QlIAAAK","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:24:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 8g7cBpAPVTqUPHwuAAAL","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:24:48","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:24:49","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente ZgLmlbMyFXqF9QlIAAAK.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:49","type":"socket"}
{"level":"info","message":"Cliente ZgLmlbMyFXqF9QlIAAAK associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:24:49","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 8g7cBpAPVTqUPHwuAAAL.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:49","type":"socket"}
{"level":"info","message":"Cliente 8g7cBpAPVTqUPHwuAAAL associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:24:49","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"ZgLmlbMyFXqF9QlIAAAK","timestamp":"2025-06-15 15:25:26","type":"socket"}
{"level":"info","message":"Cliente ZgLmlbMyFXqF9QlIAAAK removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:25:26","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"8g7cBpAPVTqUPHwuAAAL","timestamp":"2025-06-15 15:25:26","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:26","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"ZNPLbHz9qSu0iZXsAAAO","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"FZiiJMLf4pNtwUaFAAAP","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente ZNPLbHz9qSu0iZXsAAAO","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente FZiiJMLf4pNtwUaFAAAP","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente ZNPLbHz9qSu0iZXsAAAO.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Cliente ZNPLbHz9qSu0iZXsAAAO associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente FZiiJMLf4pNtwUaFAAAP.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","type":"socket"}
{"level":"info","message":"Cliente FZiiJMLf4pNtwUaFAAAP associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:28","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"FZiiJMLf4pNtwUaFAAAP","timestamp":"2025-06-15 15:25:30","type":"socket"}
{"level":"info","message":"Cliente FZiiJMLf4pNtwUaFAAAP removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:25:30","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"ZNPLbHz9qSu0iZXsAAAO","timestamp":"2025-06-15 15:25:30","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:30","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"UvJicTxZI76-INuAAAAS","timestamp":"2025-06-15 15:25:34","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"KKJ3a1hQvSNRg3jYAAAT","timestamp":"2025-06-15 15:25:34","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente UvJicTxZI76-INuAAAAS","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:25:34","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente KKJ3a1hQvSNRg3jYAAAT","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:25:34","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:25:35","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente UvJicTxZI76-INuAAAAS.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:35","type":"socket"}
{"level":"info","message":"Cliente UvJicTxZI76-INuAAAAS associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:35","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:25:35","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente KKJ3a1hQvSNRg3jYAAAT.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:35","type":"socket"}
{"level":"info","message":"Cliente KKJ3a1hQvSNRg3jYAAAT associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:35","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"UvJicTxZI76-INuAAAAS","timestamp":"2025-06-15 15:25:48","type":"socket"}
{"level":"info","message":"Cliente UvJicTxZI76-INuAAAAS removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:25:48","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"KKJ3a1hQvSNRg3jYAAAT","timestamp":"2025-06-15 15:25:48","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:48","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"wo2THehg5W7ZZhQSAAAW","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"JPzNicFBgkzssC4PAAAX","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente wo2THehg5W7ZZhQSAAAW","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente JPzNicFBgkzssC4PAAAX","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente wo2THehg5W7ZZhQSAAAW.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Cliente wo2THehg5W7ZZhQSAAAW associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente JPzNicFBgkzssC4PAAAX.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","type":"socket"}
{"level":"info","message":"Cliente JPzNicFBgkzssC4PAAAX associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:25:54","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"JPzNicFBgkzssC4PAAAX","timestamp":"2025-06-15 15:27:15","type":"socket"}
{"level":"info","message":"Cliente JPzNicFBgkzssC4PAAAX removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:27:15","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"lOF1K1CQCexchkWmAAAZ","timestamp":"2025-06-15 15:27:15","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente lOF1K1CQCexchkWmAAAZ","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:27:15","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:27:17","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente lOF1K1CQCexchkWmAAAZ.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:17","type":"socket"}
{"level":"info","message":"Cliente lOF1K1CQCexchkWmAAAZ associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:17","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"lOF1K1CQCexchkWmAAAZ","timestamp":"2025-06-15 15:27:24","type":"socket"}
{"level":"info","message":"Cliente lOF1K1CQCexchkWmAAAZ removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:27:24","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"abJ3WLD5vjx6c_ReAAAb","timestamp":"2025-06-15 15:27:25","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente abJ3WLD5vjx6c_ReAAAb","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:27:25","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:27:25","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente abJ3WLD5vjx6c_ReAAAb.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:25","type":"socket"}
{"level":"info","message":"Cliente abJ3WLD5vjx6c_ReAAAb associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:25","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"abJ3WLD5vjx6c_ReAAAb","timestamp":"2025-06-15 15:27:35","type":"socket"}
{"level":"info","message":"Cliente abJ3WLD5vjx6c_ReAAAb removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:27:35","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"wo2THehg5W7ZZhQSAAAW","timestamp":"2025-06-15 15:27:35","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:35","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"cD94hYtNq6CPLpZfAAAe","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"TfvGmGGaGC1dTKV7AAAf","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente cD94hYtNq6CPLpZfAAAe","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente TfvGmGGaGC1dTKV7AAAf","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente cD94hYtNq6CPLpZfAAAe.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Cliente cD94hYtNq6CPLpZfAAAe associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente TfvGmGGaGC1dTKV7AAAf.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","type":"socket"}
{"level":"info","message":"Cliente TfvGmGGaGC1dTKV7AAAf associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:27:41","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"TfvGmGGaGC1dTKV7AAAf","timestamp":"2025-06-15 15:28:06","type":"socket"}
{"level":"info","message":"Cliente TfvGmGGaGC1dTKV7AAAf removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:28:06","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"cD94hYtNq6CPLpZfAAAe","timestamp":"2025-06-15 15:28:06","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:06","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"gRQnMzmGGaTlsXowAAAi","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"lQLs3kEaOSW0n5UiAAAj","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente gRQnMzmGGaTlsXowAAAi","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente lQLs3kEaOSW0n5UiAAAj","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente gRQnMzmGGaTlsXowAAAi.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Cliente gRQnMzmGGaTlsXowAAAi associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente lQLs3kEaOSW0n5UiAAAj.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","type":"socket"}
{"level":"info","message":"Cliente lQLs3kEaOSW0n5UiAAAj associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:12","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"lQLs3kEaOSW0n5UiAAAj","timestamp":"2025-06-15 15:28:40","type":"socket"}
{"level":"info","message":"Cliente lQLs3kEaOSW0n5UiAAAj removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:28:40","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"5i3yTrKM4PCy2gUqAAAl","timestamp":"2025-06-15 15:28:40","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 5i3yTrKM4PCy2gUqAAAl","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:28:40","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:28:41","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 5i3yTrKM4PCy2gUqAAAl.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:41","type":"socket"}
{"level":"info","message":"Cliente 5i3yTrKM4PCy2gUqAAAl associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:41","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"5i3yTrKM4PCy2gUqAAAl","timestamp":"2025-06-15 15:28:52","type":"socket"}
{"level":"info","message":"Cliente 5i3yTrKM4PCy2gUqAAAl removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:28:52","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Rd59b6cx4s6fehwWAAAo","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Z3YiBoDq6dAx-m3AAAAp","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Z3YiBoDq6dAx-m3AAAAp","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Rd59b6cx4s6fehwWAAAo","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Z3YiBoDq6dAx-m3AAAAp.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Cliente Z3YiBoDq6dAx-m3AAAAp associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Rd59b6cx4s6fehwWAAAo.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","type":"socket"}
{"level":"info","message":"Cliente Rd59b6cx4s6fehwWAAAo associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:54","totalClients":3,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"Rd59b6cx4s6fehwWAAAo","timestamp":"2025-06-15 15:28:55","type":"socket"}
{"level":"info","message":"Cliente Rd59b6cx4s6fehwWAAAo removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:28:55","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"Z3YiBoDq6dAx-m3AAAAp","timestamp":"2025-06-15 15:28:55","type":"socket"}
{"level":"info","message":"Cliente Z3YiBoDq6dAx-m3AAAAp removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:28:55","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"gRQnMzmGGaTlsXowAAAi","timestamp":"2025-06-15 15:28:55","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:28:55","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"dgjryMOP3Pam9e6xAAAs","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"m76YsYanqmM2wP-VAAAt","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente dgjryMOP3Pam9e6xAAAs","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente m76YsYanqmM2wP-VAAAt","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente dgjryMOP3Pam9e6xAAAs.","service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Cliente dgjryMOP3Pam9e6xAAAs associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente m76YsYanqmM2wP-VAAAt.","service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","type":"socket"}
{"level":"info","message":"Cliente m76YsYanqmM2wP-VAAAt associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:29:00","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"m76YsYanqmM2wP-VAAAt","timestamp":"2025-06-15 15:30:09","type":"socket"}
{"level":"info","message":"Cliente m76YsYanqmM2wP-VAAAt removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:30:09","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"e55NqAtPh-EczW0oAAAv","timestamp":"2025-06-15 15:30:09","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente e55NqAtPh-EczW0oAAAv","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:30:09","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:30:10","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente e55NqAtPh-EczW0oAAAv.","service":"notifications-app-api","timestamp":"2025-06-15 15:30:10","type":"socket"}
{"level":"info","message":"Cliente e55NqAtPh-EczW0oAAAv associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:30:10","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"e55NqAtPh-EczW0oAAAv","timestamp":"2025-06-15 15:30:24","type":"socket"}
{"level":"info","message":"Cliente e55NqAtPh-EczW0oAAAv removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:30:24","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"r47phGOf1s99-eSxAAAy","timestamp":"2025-06-15 15:30:24","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"-JlYdqGJtStGFLBOAAAz","timestamp":"2025-06-15 15:30:24","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente r47phGOf1s99-eSxAAAy","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:30:24","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente -JlYdqGJtStGFLBOAAAz","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:30:24","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:30:26","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente r47phGOf1s99-eSxAAAy.","service":"notifications-app-api","timestamp":"2025-06-15 15:30:26","type":"socket"}
{"level":"info","message":"Cliente r47phGOf1s99-eSxAAAy associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:30:26","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:30:26","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente -JlYdqGJtStGFLBOAAAz.","service":"notifications-app-api","timestamp":"2025-06-15 15:30:26","type":"socket"}
{"level":"info","message":"Cliente -JlYdqGJtStGFLBOAAAz associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:30:26","totalClients":3,"type":"socket"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.MESSAGE is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.MESSAGE is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:30:46"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"YUUVRnbtYi1rtejZAAAB","timestamp":"2025-06-15 15:31:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente YUUVRnbtYi1rtejZAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:31:29","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"FLiKsiZI-MTRRp_XAAAD","timestamp":"2025-06-15 15:31:29","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"7jPHt4O2KG6HaJFFAAAF","timestamp":"2025-06-15 15:31:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente FLiKsiZI-MTRRp_XAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:31:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 7jPHt4O2KG6HaJFFAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:31:29","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente YUUVRnbtYi1rtejZAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","type":"socket"}
{"level":"info","message":"Cliente YUUVRnbtYi1rtejZAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente FLiKsiZI-MTRRp_XAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","type":"socket"}
{"level":"info","message":"Cliente FLiKsiZI-MTRRp_XAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 7jPHt4O2KG6HaJFFAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","type":"socket"}
{"level":"info","message":"Cliente 7jPHt4O2KG6HaJFFAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:31:31","totalClients":3,"type":"socket"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.message is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.message is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:31:32"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"fdr6ckgWvD2a15m_AAAB","timestamp":"2025-06-15 15:32:02","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente fdr6ckgWvD2a15m_AAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:02","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"uN6LJ4VI-FvENEHJAAAE","timestamp":"2025-06-15 15:32:04","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"8eLA8NPt9DrJutvUAAAF","timestamp":"2025-06-15 15:32:04","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 8eLA8NPt9DrJutvUAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:04","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente uN6LJ4VI-FvENEHJAAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:04","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente fdr6ckgWvD2a15m_AAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","type":"socket"}
{"level":"info","message":"Cliente fdr6ckgWvD2a15m_AAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 8eLA8NPt9DrJutvUAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","type":"socket"}
{"level":"info","message":"Cliente 8eLA8NPt9DrJutvUAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente uN6LJ4VI-FvENEHJAAAE.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","type":"socket"}
{"level":"info","message":"Cliente uN6LJ4VI-FvENEHJAAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:05","totalClients":3,"type":"socket"}
{"body":{"category":"category","channel":"channel","content":"content","custom_attributes":{"url":"url"},"message":"message","route":"felipe","type":"info"},"error":"logger.message is not a function","level":"error","message":"Erro ao processar mensagem:","service":"notifications-app-api","stack":"TypeError: logger.message is not a function\n    at C:\\Users\\felip\\projects\\notifications-app-api\\routes\\sendMessage.js:59:14\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-06-15 15:32:10"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"BlgzNTPQlkJSBAIoAAAB","timestamp":"2025-06-15 15:32:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente BlgzNTPQlkJSBAIoAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:29","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"v6XbkGlXx7n26eGEAAAD","timestamp":"2025-06-15 15:32:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente v6XbkGlXx7n26eGEAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:29","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"P21VCcCbrTuAjZhRAAAF","timestamp":"2025-06-15 15:32:31","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente P21VCcCbrTuAjZhRAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:31","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente P21VCcCbrTuAjZhRAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","type":"socket"}
{"level":"info","message":"Cliente P21VCcCbrTuAjZhRAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente BlgzNTPQlkJSBAIoAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","type":"socket"}
{"level":"info","message":"Cliente BlgzNTPQlkJSBAIoAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente v6XbkGlXx7n26eGEAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","type":"socket"}
{"level":"info","message":"Cliente v6XbkGlXx7n26eGEAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:32:32","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:33","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:32:33","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6606,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:32:33","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:41","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:32:41","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6607,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:32:41","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:46","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:32:46","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6608,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:32:46","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:32:49","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:32:49","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6609,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:32:49","type":"message"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"v6XbkGlXx7n26eGEAAAD","timestamp":"2025-06-15 15:33:17","type":"socket"}
{"level":"info","message":"Cliente v6XbkGlXx7n26eGEAAAD removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:33:17","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"P21VCcCbrTuAjZhRAAAF","timestamp":"2025-06-15 15:33:17","type":"socket"}
{"level":"info","message":"Cliente P21VCcCbrTuAjZhRAAAF removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:33:17","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"BlgzNTPQlkJSBAIoAAAB","timestamp":"2025-06-15 15:33:17","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:33:17","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"pu43bCmctBbEvB4CAAAI","timestamp":"2025-06-15 15:33:23","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"wPE1s1TKXR9lk8-XAAAJ","timestamp":"2025-06-15 15:33:23","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente pu43bCmctBbEvB4CAAAI","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:33:23","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente wPE1s1TKXR9lk8-XAAAJ","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:33:24","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:33:24","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente pu43bCmctBbEvB4CAAAI.","service":"notifications-app-api","timestamp":"2025-06-15 15:33:24","type":"socket"}
{"level":"info","message":"Cliente pu43bCmctBbEvB4CAAAI associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:33:24","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:33:24","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente wPE1s1TKXR9lk8-XAAAJ.","service":"notifications-app-api","timestamp":"2025-06-15 15:33:24","type":"socket"}
{"level":"info","message":"Cliente wPE1s1TKXR9lk8-XAAAJ associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:33:24","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"wPE1s1TKXR9lk8-XAAAJ","timestamp":"2025-06-15 15:34:35","type":"socket"}
{"level":"info","message":"Cliente wPE1s1TKXR9lk8-XAAAJ removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:34:35","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"EYOW7M4MBFlF5KJEAAAL","timestamp":"2025-06-15 15:34:35","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente EYOW7M4MBFlF5KJEAAAL","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:34:35","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:34:36","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente EYOW7M4MBFlF5KJEAAAL.","service":"notifications-app-api","timestamp":"2025-06-15 15:34:36","type":"socket"}
{"level":"info","message":"Cliente EYOW7M4MBFlF5KJEAAAL associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:34:36","totalClients":2,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:34:40","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:34:41","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6610,"service":"notifications-app-api","socketCount":2,"timestamp":"2025-06-15 15:34:41","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:34:46","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:34:47","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6611,"service":"notifications-app-api","socketCount":2,"timestamp":"2025-06-15 15:34:47","type":"message"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"_D5xpMKwEGC_rE_HAAAB","timestamp":"2025-06-15 15:35:19","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente _D5xpMKwEGC_rE_HAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:35:19","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Nc1GQcs600HQNLm9AAAD","timestamp":"2025-06-15 15:35:21","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Nc1GQcs600HQNLm9AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:35:21","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:35:21","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente _D5xpMKwEGC_rE_HAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:21","type":"socket"}
{"level":"info","message":"Cliente _D5xpMKwEGC_rE_HAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:21","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:35:22","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Nc1GQcs600HQNLm9AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:22","type":"socket"}
{"level":"info","message":"Cliente Nc1GQcs600HQNLm9AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:22","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"Nc1GQcs600HQNLm9AAAD","timestamp":"2025-06-15 15:35:25","type":"socket"}
{"level":"info","message":"Cliente Nc1GQcs600HQNLm9AAAD removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:35:25","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"CYxwSHPAoXNBFxKgAAAB","timestamp":"2025-06-15 15:35:42","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente CYxwSHPAoXNBFxKgAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:35:42","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:35:42","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente CYxwSHPAoXNBFxKgAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:42","type":"socket"}
{"level":"info","message":"Cliente CYxwSHPAoXNBFxKgAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"m29HPqFqePwoQTSRAAAD","timestamp":"2025-06-15 15:35:43","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente m29HPqFqePwoQTSRAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:35:43","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:35:43","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente m29HPqFqePwoQTSRAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:43","type":"socket"}
{"level":"info","message":"Cliente m29HPqFqePwoQTSRAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:35:43","totalClients":2,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:36:33","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:36:33","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6612,"service":"notifications-app-api","socketCount":2,"timestamp":"2025-06-15 15:36:33","type":"message"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"zlo-2mybIRQI2nWVAAAC","timestamp":"2025-06-15 15:37:09","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"OypmTLQb8ES9TMoCAAAD","timestamp":"2025-06-15 15:37:09","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente zlo-2mybIRQI2nWVAAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:37:09","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente OypmTLQb8ES9TMoCAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:37:09","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:37:10","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente zlo-2mybIRQI2nWVAAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:37:10","type":"socket"}
{"level":"info","message":"Cliente zlo-2mybIRQI2nWVAAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:37:10","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:37:10","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente OypmTLQb8ES9TMoCAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:37:10","type":"socket"}
{"level":"info","message":"Cliente OypmTLQb8ES9TMoCAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:37:10","totalClients":2,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:37:31","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:37:31","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6613,"service":"notifications-app-api","socketCount":2,"timestamp":"2025-06-15 15:37:31","type":"message"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"OypmTLQb8ES9TMoCAAAD","timestamp":"2025-06-15 15:38:16","type":"socket"}
{"level":"info","message":"Cliente OypmTLQb8ES9TMoCAAAD removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:38:16","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"OLb5NCQ4jPK35xulAAAF","timestamp":"2025-06-15 15:38:18","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente OLb5NCQ4jPK35xulAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:38:18","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:38:18","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente OLb5NCQ4jPK35xulAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:18","type":"socket"}
{"level":"info","message":"Cliente OLb5NCQ4jPK35xulAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:18","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"OLb5NCQ4jPK35xulAAAF","timestamp":"2025-06-15 15:38:33","type":"socket"}
{"level":"info","message":"Cliente OLb5NCQ4jPK35xulAAAF removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:38:33","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"v6rgQfnDrhQMHIXeAAAI","timestamp":"2025-06-15 15:38:33","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"6prB7J6IXE5vO3WfAAAJ","timestamp":"2025-06-15 15:38:33","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente v6rgQfnDrhQMHIXeAAAI","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:38:33","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 6prB7J6IXE5vO3WfAAAJ","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:38:33","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:38:34","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 6prB7J6IXE5vO3WfAAAJ.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:34","type":"socket"}
{"level":"info","message":"Cliente 6prB7J6IXE5vO3WfAAAJ associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:34","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:38:34","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente v6rgQfnDrhQMHIXeAAAI.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:34","type":"socket"}
{"level":"info","message":"Cliente v6rgQfnDrhQMHIXeAAAI associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:34","totalClients":3,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"zlo-2mybIRQI2nWVAAAC","timestamp":"2025-06-15 15:38:48","type":"socket"}
{"level":"info","message":"Cliente zlo-2mybIRQI2nWVAAAC removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:38:48","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"v6rgQfnDrhQMHIXeAAAI","timestamp":"2025-06-15 15:38:48","type":"socket"}
{"level":"info","message":"Cliente v6rgQfnDrhQMHIXeAAAI removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:38:48","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"6prB7J6IXE5vO3WfAAAJ","timestamp":"2025-06-15 15:38:48","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:48","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"dMWG4RZplZTKWVEqAAAM","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"k1fH9onaGCFlQoSSAAAN","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente dMWG4RZplZTKWVEqAAAM","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente k1fH9onaGCFlQoSSAAAN","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente dMWG4RZplZTKWVEqAAAM.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Cliente dMWG4RZplZTKWVEqAAAM associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente k1fH9onaGCFlQoSSAAAN.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","type":"socket"}
{"level":"info","message":"Cliente k1fH9onaGCFlQoSSAAAN associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:38:55","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"k1fH9onaGCFlQoSSAAAN","timestamp":"2025-06-15 15:39:08","type":"socket"}
{"level":"info","message":"Cliente k1fH9onaGCFlQoSSAAAN removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 15:39:08","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"8sWRna-I9GCdxOOJAAAQ","timestamp":"2025-06-15 15:39:09","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"WyUHPeRp2d4atAftAAAR","timestamp":"2025-06-15 15:39:09","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 8sWRna-I9GCdxOOJAAAQ","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:39:09","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente WyUHPeRp2d4atAftAAAR","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:39:09","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:39:10","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 8sWRna-I9GCdxOOJAAAQ.","service":"notifications-app-api","timestamp":"2025-06-15 15:39:10","type":"socket"}
{"level":"info","message":"Cliente 8sWRna-I9GCdxOOJAAAQ associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:39:10","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:39:10","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente WyUHPeRp2d4atAftAAAR.","service":"notifications-app-api","timestamp":"2025-06-15 15:39:10","type":"socket"}
{"level":"info","message":"Cliente WyUHPeRp2d4atAftAAAR associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:39:10","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"xr9vKHgASy0RauZyAAAB","timestamp":"2025-06-15 15:45:14","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente xr9vKHgASy0RauZyAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:45:14","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"osHZdvAW6Sb9BQ3BAAAD","timestamp":"2025-06-15 15:45:14","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente osHZdvAW6Sb9BQ3BAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:45:14","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"uveWzgyXiLYiFK-VAAAF","timestamp":"2025-06-15 15:45:14","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente uveWzgyXiLYiFK-VAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:45:14","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:45:16","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente xr9vKHgASy0RauZyAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:45:16","type":"socket"}
{"level":"info","message":"Cliente xr9vKHgASy0RauZyAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:45:16","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:45:17","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente osHZdvAW6Sb9BQ3BAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:45:17","type":"socket"}
{"level":"info","message":"Cliente osHZdvAW6Sb9BQ3BAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:45:17","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:45:17","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente uveWzgyXiLYiFK-VAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:45:17","type":"socket"}
{"level":"info","message":"Cliente uveWzgyXiLYiFK-VAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:45:17","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"f47tO7EKcjoAulw1AAAC","timestamp":"2025-06-15 15:46:14","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"q-ZNdl9uWlR1FepaAAAD","timestamp":"2025-06-15 15:46:14","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente f47tO7EKcjoAulw1AAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:46:14","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente q-ZNdl9uWlR1FepaAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:46:14","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"9ptW8jUkDTngSxxmAAAF","timestamp":"2025-06-15 15:46:14","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 9ptW8jUkDTngSxxmAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:46:14","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente f47tO7EKcjoAulw1AAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","type":"socket"}
{"level":"info","message":"Cliente f47tO7EKcjoAulw1AAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente q-ZNdl9uWlR1FepaAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","type":"socket"}
{"level":"info","message":"Cliente q-ZNdl9uWlR1FepaAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 9ptW8jUkDTngSxxmAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","type":"socket"}
{"level":"info","message":"Cliente 9ptW8jUkDTngSxxmAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:15","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6611","service":"notifications-app-api","timestamp":"2025-06-15 15:46:29"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"OtQXidlzzC0YGDgSAAAB","timestamp":"2025-06-15 15:46:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente OtQXidlzzC0YGDgSAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:46:29","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"O1c2LwpMEswsHPv7AAAD","timestamp":"2025-06-15 15:46:30","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente O1c2LwpMEswsHPv7AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:46:30","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"IzUBDSeUs3bguvbSAAAF","timestamp":"2025-06-15 15:46:30","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente IzUBDSeUs3bguvbSAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:46:30","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:46:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente IzUBDSeUs3bguvbSAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:31","type":"socket"}
{"level":"info","message":"Cliente IzUBDSeUs3bguvbSAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:31","totalClients":1,"type":"socket"}
{"error":"detectQueryType is not defined","level":"error","message":"Erro ao executar consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6611","service":"notifications-app-api","timestamp":"2025-06-15 15:46:32"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:46:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente OtQXidlzzC0YGDgSAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:32","type":"socket"}
{"level":"info","message":"Cliente OtQXidlzzC0YGDgSAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:32","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:46:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente O1c2LwpMEswsHPv7AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:32","type":"socket"}
{"level":"info","message":"Cliente O1c2LwpMEswsHPv7AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:46:32","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6610","service":"notifications-app-api","timestamp":"2025-06-15 15:46:37"}
{"error":"detectQueryType is not defined","level":"error","message":"Erro ao executar consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6610","service":"notifications-app-api","timestamp":"2025-06-15 15:46:37"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"rgmbd9fs7WgBxMUxAAAB","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente rgmbd9fs7WgBxMUxAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"kmpyqCDrpSH9WqmuAAAD","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente kmpyqCDrpSH9WqmuAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente rgmbd9fs7WgBxMUxAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Cliente rgmbd9fs7WgBxMUxAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente kmpyqCDrpSH9WqmuAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Cliente kmpyqCDrpSH9WqmuAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","totalClients":2,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"WCv7FwG6t1-v-1OIAAAF","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente WCv7FwG6t1-v-1OIAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente WCv7FwG6t1-v-1OIAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","type":"socket"}
{"level":"info","message":"Cliente WCv7FwG6t1-v-1OIAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:47:17","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"qrkO25NDBgNTIjNbAAAB","timestamp":"2025-06-15 15:48:30","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente qrkO25NDBgNTIjNbAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:48:30","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"8g9nUG7myr3GI-wfAAAD","timestamp":"2025-06-15 15:48:30","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 8g9nUG7myr3GI-wfAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:48:30","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Gcj0CLD0bwxN4ei8AAAF","timestamp":"2025-06-15 15:48:30","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Gcj0CLD0bwxN4ei8AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:48:30","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente qrkO25NDBgNTIjNbAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","type":"socket"}
{"level":"info","message":"Cliente qrkO25NDBgNTIjNbAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 8g9nUG7myr3GI-wfAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","type":"socket"}
{"level":"info","message":"Cliente 8g9nUG7myr3GI-wfAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Gcj0CLD0bwxN4ei8AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","type":"socket"}
{"level":"info","message":"Cliente Gcj0CLD0bwxN4ei8AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:48:33","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:48:36","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:48:36","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6614,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:48:36","type":"message"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6614","service":"notifications-app-api","timestamp":"2025-06-15 15:48:40"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:48:40"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"xb3gQp1XImyPlmjgAAAB","timestamp":"2025-06-15 15:49:24","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente xb3gQp1XImyPlmjgAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:24","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"jEPEOgXTYQDF48LRAAAD","timestamp":"2025-06-15 15:49:24","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente jEPEOgXTYQDF48LRAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:24","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"kP6CUdJC_BjAEZ5TAAAF","timestamp":"2025-06-15 15:49:24","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente kP6CUdJC_BjAEZ5TAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:24","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:25","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente xb3gQp1XImyPlmjgAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:25","type":"socket"}
{"level":"info","message":"Cliente xb3gQp1XImyPlmjgAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:25","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:26","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente jEPEOgXTYQDF48LRAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:26","type":"socket"}
{"level":"info","message":"Cliente jEPEOgXTYQDF48LRAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:26","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:26","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente kP6CUdJC_BjAEZ5TAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:26","type":"socket"}
{"level":"info","message":"Cliente kP6CUdJC_BjAEZ5TAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:26","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"0uAlAHhsotp1M_7YAAAB","timestamp":"2025-06-15 15:49:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 0uAlAHhsotp1M_7YAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:28","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"TjuEyBUVhiVTD_l5AAAD","timestamp":"2025-06-15 15:49:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente TjuEyBUVhiVTD_l5AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:28","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"yzLP8oPuYhe5l5l-AAAF","timestamp":"2025-06-15 15:49:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente yzLP8oPuYhe5l5l-AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:29","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 0uAlAHhsotp1M_7YAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","type":"socket"}
{"level":"info","message":"Cliente 0uAlAHhsotp1M_7YAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente TjuEyBUVhiVTD_l5AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","type":"socket"}
{"level":"info","message":"Cliente TjuEyBUVhiVTD_l5AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente yzLP8oPuYhe5l5l-AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","type":"socket"}
{"level":"info","message":"Cliente yzLP8oPuYhe5l5l-AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:31","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"saicnfsoumkkR4zxAAAB","timestamp":"2025-06-15 15:49:52","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente saicnfsoumkkR4zxAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:52","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"b5BB8ZjH-FIzPa2RAAAE","timestamp":"2025-06-15 15:49:52","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"9L91zjVB9IV-3A0QAAAF","timestamp":"2025-06-15 15:49:52","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente b5BB8ZjH-FIzPa2RAAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:52","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 9L91zjVB9IV-3A0QAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:52","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente saicnfsoumkkR4zxAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"socket"}
{"level":"info","message":"Cliente saicnfsoumkkR4zxAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente b5BB8ZjH-FIzPa2RAAAE.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"socket"}
{"level":"info","message":"Cliente b5BB8ZjH-FIzPa2RAAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 9L91zjVB9IV-3A0QAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"socket"}
{"level":"info","message":"Cliente 9L91zjVB9IV-3A0QAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:49:53","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6615,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:49:53","type":"message"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"cviDZI2tvd7uLnTSAAAC","timestamp":"2025-06-15 15:50:31","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente cviDZI2tvd7uLnTSAAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:50:31","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"ctBDoxKKmhh6_IhtAAAF","timestamp":"2025-06-15 15:50:31","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"HTdPjeZHaWYvC1zoAAAG","timestamp":"2025-06-15 15:50:31","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente HTdPjeZHaWYvC1zoAAAG","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:50:31","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente ctBDoxKKmhh6_IhtAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:50:31","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente cviDZI2tvd7uLnTSAAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","type":"socket"}
{"level":"info","message":"Cliente cviDZI2tvd7uLnTSAAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente HTdPjeZHaWYvC1zoAAAG.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","type":"socket"}
{"level":"info","message":"Cliente HTdPjeZHaWYvC1zoAAAG associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente ctBDoxKKmhh6_IhtAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","type":"socket"}
{"level":"info","message":"Cliente ctBDoxKKmhh6_IhtAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:32","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:50:33","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:50:33","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6616,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:50:33","type":"message"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6616","service":"notifications-app-api","timestamp":"2025-06-15 15:50:53"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"9zXtG5uXxYafl-8qAAAB","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 9zXtG5uXxYafl-8qAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"6LDOajXiivbgL9SEAAAD","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 6LDOajXiivbgL9SEAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 9zXtG5uXxYafl-8qAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Cliente 9zXtG5uXxYafl-8qAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","totalClients":1,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"lNIaXqqvuSKgM_CxAAAF","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente lNIaXqqvuSKgM_CxAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 6LDOajXiivbgL9SEAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Cliente 6LDOajXiivbgL9SEAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente lNIaXqqvuSKgM_CxAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","type":"socket"}
{"level":"info","message":"Cliente lNIaXqqvuSKgM_CxAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:50:54","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"9w4VE9GE5vy8JQEKAAAB","timestamp":"2025-06-15 15:51:19","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 9w4VE9GE5vy8JQEKAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:19","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"aZQwanZXC5_X_LyXAAAE","timestamp":"2025-06-15 15:51:19","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"nP8p84Htw76nqW92AAAF","timestamp":"2025-06-15 15:51:19","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente aZQwanZXC5_X_LyXAAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:19","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente nP8p84Htw76nqW92AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:19","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:21","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente aZQwanZXC5_X_LyXAAAE.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:21","type":"socket"}
{"level":"info","message":"Cliente aZQwanZXC5_X_LyXAAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:21","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:21","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente nP8p84Htw76nqW92AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:21","type":"socket"}
{"level":"info","message":"Cliente nP8p84Htw76nqW92AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:21","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:21","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 9w4VE9GE5vy8JQEKAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:22","type":"socket"}
{"level":"info","message":"Cliente 9w4VE9GE5vy8JQEKAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:22","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"BKdJbNC3cuQ9cyVKAAAB","timestamp":"2025-06-15 15:51:26","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente BKdJbNC3cuQ9cyVKAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:26","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"0_tyun3nELXiSTjWAAAE","timestamp":"2025-06-15 15:51:26","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"9BfjN2kiCrXdvAaQAAAF","timestamp":"2025-06-15 15:51:26","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 9BfjN2kiCrXdvAaQAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:26","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 0_tyun3nELXiSTjWAAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:26","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente BKdJbNC3cuQ9cyVKAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","type":"socket"}
{"level":"info","message":"Cliente BKdJbNC3cuQ9cyVKAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 9BfjN2kiCrXdvAaQAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","type":"socket"}
{"level":"info","message":"Cliente 9BfjN2kiCrXdvAaQAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 0_tyun3nELXiSTjWAAAE.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","type":"socket"}
{"level":"info","message":"Cliente 0_tyun3nELXiSTjWAAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:29","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:32","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:51:32","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6617,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:51:32","type":"message"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6617","service":"notifications-app-api","timestamp":"2025-06-15 15:51:34","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:51:34","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"_INrYIPV8jUetvpUAAAB","timestamp":"2025-06-15 15:51:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente _INrYIPV8jUetvpUAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:48","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Ml6p2u1WwXjo1zsxAAAD","timestamp":"2025-06-15 15:51:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Ml6p2u1WwXjo1zsxAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:48","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"CP7E_9oYlxN5-TH6AAAF","timestamp":"2025-06-15 15:51:49","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente CP7E_9oYlxN5-TH6AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:51:49","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:49","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente _INrYIPV8jUetvpUAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:49","type":"socket"}
{"level":"info","message":"Cliente _INrYIPV8jUetvpUAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:50","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Ml6p2u1WwXjo1zsxAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:50","type":"socket"}
{"level":"info","message":"Cliente Ml6p2u1WwXjo1zsxAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:50","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:51:50","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente CP7E_9oYlxN5-TH6AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:50","type":"socket"}
{"level":"info","message":"Cliente CP7E_9oYlxN5-TH6AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:51:50","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:52:13","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:52:13","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6618,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:52:13","type":"message"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6618","service":"notifications-app-api","timestamp":"2025-06-15 15:52:14","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:52:15","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"3GRg1O-byq1nUb1yAAAC","timestamp":"2025-06-15 15:53:50","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"AFaCxBfGtTOL9p81AAAD","timestamp":"2025-06-15 15:53:50","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 3GRg1O-byq1nUb1yAAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:53:50","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente AFaCxBfGtTOL9p81AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:53:50","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"e8UQFdsl8xo3SSpIAAAF","timestamp":"2025-06-15 15:53:51","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente e8UQFdsl8xo3SSpIAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:53:52","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 3GRg1O-byq1nUb1yAAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","type":"socket"}
{"level":"info","message":"Cliente 3GRg1O-byq1nUb1yAAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente AFaCxBfGtTOL9p81AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","type":"socket"}
{"level":"info","message":"Cliente AFaCxBfGtTOL9p81AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente e8UQFdsl8xo3SSpIAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","type":"socket"}
{"level":"info","message":"Cliente e8UQFdsl8xo3SSpIAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:53:53","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"OjFlxChVGW-XqS2aAAAB","timestamp":"2025-06-15 15:54:24","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente OjFlxChVGW-XqS2aAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:54:25","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"MjqtzQ3LW7ckC8xMAAAD","timestamp":"2025-06-15 15:54:25","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente MjqtzQ3LW7ckC8xMAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:54:25","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"rO_SmxT9ZHvyE-e_AAAB","timestamp":"2025-06-15 15:54:29","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"aVjwKYcyH6V0CaqIAAAD","timestamp":"2025-06-15 15:54:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente rO_SmxT9ZHvyE-e_AAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:54:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente aVjwKYcyH6V0CaqIAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:54:29","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"5kwS4ki9phJWUP5AAAAF","timestamp":"2025-06-15 15:54:29","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 5kwS4ki9phJWUP5AAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:54:29","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:54:30","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente rO_SmxT9ZHvyE-e_AAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:54:30","type":"socket"}
{"level":"info","message":"Cliente rO_SmxT9ZHvyE-e_AAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:54:30","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:54:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente aVjwKYcyH6V0CaqIAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:54:31","type":"socket"}
{"level":"info","message":"Cliente aVjwKYcyH6V0CaqIAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:54:31","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:54:31","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 5kwS4ki9phJWUP5AAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:54:31","type":"socket"}
{"level":"info","message":"Cliente 5kwS4ki9phJWUP5AAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:54:31","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:54:50","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 15:54:50","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6619,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 15:54:50","type":"message"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6619","service":"notifications-app-api","timestamp":"2025-06-15 15:54:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:54:54","type":"query"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"aVjwKYcyH6V0CaqIAAAD","timestamp":"2025-06-15 15:55:14","type":"socket"}
{"level":"info","message":"Cliente aVjwKYcyH6V0CaqIAAAD removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:55:14","type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 15:55:19"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 15:55:19","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 15:55:20","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"akCpw-mgnThYEpPcAAAH","timestamp":"2025-06-15 15:55:21","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente akCpw-mgnThYEpPcAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:55:21","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente akCpw-mgnThYEpPcAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"socket"}
{"level":"info","message":"Cliente akCpw-mgnThYEpPcAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","totalClients":3,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:55:22","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"M7Ref1l68ARWHlWLAAAB","timestamp":"2025-06-15 15:56:40","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente M7Ref1l68ARWHlWLAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:56:40","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"xLZu1UFu8KuF1zXIAAAD","timestamp":"2025-06-15 15:56:41","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente xLZu1UFu8KuF1zXIAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:56:42","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"CJGLBDNwDLCzPIKrAAAF","timestamp":"2025-06-15 15:56:42","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente CJGLBDNwDLCzPIKrAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:56:42","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente xLZu1UFu8KuF1zXIAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","type":"socket"}
{"level":"info","message":"Cliente xLZu1UFu8KuF1zXIAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente M7Ref1l68ARWHlWLAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","type":"socket"}
{"level":"info","message":"Cliente M7Ref1l68ARWHlWLAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente CJGLBDNwDLCzPIKrAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","type":"socket"}
{"level":"info","message":"Cliente CJGLBDNwDLCzPIKrAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:56:43","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"iBFjzTRqUWrw3IxxAAAB","timestamp":"2025-06-15 15:57:08","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente iBFjzTRqUWrw3IxxAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:08","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"FSM4TjgQ5sc8eO1xAAAD","timestamp":"2025-06-15 15:57:08","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente FSM4TjgQ5sc8eO1xAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:08","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"kQa_kvzlBMS9a5wXAAAF","timestamp":"2025-06-15 15:57:08","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente kQa_kvzlBMS9a5wXAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:08","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente iBFjzTRqUWrw3IxxAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","type":"socket"}
{"level":"info","message":"Cliente iBFjzTRqUWrw3IxxAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente FSM4TjgQ5sc8eO1xAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","type":"socket"}
{"level":"info","message":"Cliente FSM4TjgQ5sc8eO1xAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente kQa_kvzlBMS9a5wXAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","type":"socket"}
{"level":"info","message":"Cliente kQa_kvzlBMS9a5wXAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:11","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"C2iLJrokORxCmliPAAAB","timestamp":"2025-06-15 15:57:27","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente C2iLJrokORxCmliPAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:27","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"oHFu5581UJ1G9x4fAAAD","timestamp":"2025-06-15 15:57:27","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente oHFu5581UJ1G9x4fAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:27","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"BNeummWW1EcA0bXrAAAF","timestamp":"2025-06-15 15:57:28","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente BNeummWW1EcA0bXrAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:28","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente BNeummWW1EcA0bXrAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","type":"socket"}
{"level":"info","message":"Cliente BNeummWW1EcA0bXrAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente C2iLJrokORxCmliPAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","type":"socket"}
{"level":"info","message":"Cliente C2iLJrokORxCmliPAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente oHFu5581UJ1G9x4fAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","type":"socket"}
{"level":"info","message":"Cliente oHFu5581UJ1G9x4fAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:29","totalClients":3,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"C2iLJrokORxCmliPAAAB","timestamp":"2025-06-15 15:57:37","type":"socket"}
{"level":"info","message":"Cliente C2iLJrokORxCmliPAAAB removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:57:37","type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 15:57:51","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 15:57:51","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"vyVWNSigm8UryfY8AAAH","timestamp":"2025-06-15 15:57:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente vyVWNSigm8UryfY8AAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:57:53","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"route","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente vyVWNSigm8UryfY8AAAH.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"socket"}
{"level":"info","message":"Cliente vyVWNSigm8UryfY8AAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","totalClients":3,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:57:54","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"M7pBRygVXNd91ozYAAAB","timestamp":"2025-06-15 15:58:01","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente M7pBRygVXNd91ozYAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:01","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"5Qg02CE1O1WN33AlAAAE","timestamp":"2025-06-15 15:58:01","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"VD3DY9qmZ5zqTxZBAAAF","timestamp":"2025-06-15 15:58:01","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 5Qg02CE1O1WN33AlAAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:01","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente VD3DY9qmZ5zqTxZBAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:01","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:03","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente M7pBRygVXNd91ozYAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:03","type":"socket"}
{"level":"info","message":"Cliente M7pBRygVXNd91ozYAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:03","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:04","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 5Qg02CE1O1WN33AlAAAE.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:04","type":"socket"}
{"level":"info","message":"Cliente 5Qg02CE1O1WN33AlAAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:04","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:04","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente VD3DY9qmZ5zqTxZBAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:04","type":"socket"}
{"level":"info","message":"Cliente VD3DY9qmZ5zqTxZBAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:04","totalClients":3,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"M7pBRygVXNd91ozYAAAB","timestamp":"2025-06-15 15:58:07","type":"socket"}
{"level":"info","message":"Cliente M7pBRygVXNd91ozYAAAB removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:58:07","type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 15:58:09","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 15:58:09","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"mdaw9uU9ez9-Eqa-AAAH","timestamp":"2025-06-15 15:58:10","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente mdaw9uU9ez9-Eqa-AAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente mdaw9uU9ez9-Eqa-AAAH.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","type":"socket"}
{"level":"info","message":"Cliente mdaw9uU9ez9-Eqa-AAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:10","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:58:11","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"mD8CspiZC8E8KpUkAAAB","timestamp":"2025-06-15 15:58:44","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente mD8CspiZC8E8KpUkAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:44","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"-d9_vjj7ahCUu5IcAAAD","timestamp":"2025-06-15 15:58:44","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente -d9_vjj7ahCUu5IcAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:44","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"fdg44CvhBJ-PvDJaAAAF","timestamp":"2025-06-15 15:58:46","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente fdg44CvhBJ-PvDJaAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:46","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente mD8CspiZC8E8KpUkAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","type":"socket"}
{"level":"info","message":"Cliente mD8CspiZC8E8KpUkAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente -d9_vjj7ahCUu5IcAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","type":"socket"}
{"level":"info","message":"Cliente -d9_vjj7ahCUu5IcAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente fdg44CvhBJ-PvDJaAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","type":"socket"}
{"level":"info","message":"Cliente fdg44CvhBJ-PvDJaAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:47","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"nadVThZfhM0b7OEiAAAC","timestamp":"2025-06-15 15:58:54","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"MLUeVA2FFCyCK4s7AAAD","timestamp":"2025-06-15 15:58:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente nadVThZfhM0b7OEiAAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente MLUeVA2FFCyCK4s7AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:54","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"ab_ufwW1EcnfEId1AAAF","timestamp":"2025-06-15 15:58:54","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente ab_ufwW1EcnfEId1AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:58:54","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente nadVThZfhM0b7OEiAAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","type":"socket"}
{"level":"info","message":"Cliente nadVThZfhM0b7OEiAAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente MLUeVA2FFCyCK4s7AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","type":"socket"}
{"level":"info","message":"Cliente MLUeVA2FFCyCK4s7AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente ab_ufwW1EcnfEId1AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","type":"socket"}
{"level":"info","message":"Cliente ab_ufwW1EcnfEId1AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:58:57","totalClients":3,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"MLUeVA2FFCyCK4s7AAAD","timestamp":"2025-06-15 15:59:02","type":"socket"}
{"level":"info","message":"Cliente MLUeVA2FFCyCK4s7AAAD removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:59:02","type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 15:59:05","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 15:59:05","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 15:59:05","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"EEz9fAQyM_WkKJbMAAAH","timestamp":"2025-06-15 15:59:06","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente EEz9fAQyM_WkKJbMAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente EEz9fAQyM_WkKJbMAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"socket"}
{"level":"info","message":"Cliente EEz9fAQyM_WkKJbMAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","totalClients":3,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:59:06","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 15:59:07","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 15:59:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 15:59:07","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"5bydyZVx1d7xwpX6AAAC","timestamp":"2025-06-15 15:59:44","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"JM9W1OmHlZx_Jfa0AAAD","timestamp":"2025-06-15 15:59:44","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 5bydyZVx1d7xwpX6AAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:59:44","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente JM9W1OmHlZx_Jfa0AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:59:44","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"bWV8ChbwjtnS-nO6AAAF","timestamp":"2025-06-15 15:59:44","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente bWV8ChbwjtnS-nO6AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 15:59:44","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:59:45","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 5bydyZVx1d7xwpX6AAAC.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:45","type":"socket"}
{"level":"info","message":"Cliente 5bydyZVx1d7xwpX6AAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:45","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:59:46","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente JM9W1OmHlZx_Jfa0AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:46","type":"socket"}
{"level":"info","message":"Cliente JM9W1OmHlZx_Jfa0AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:46","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 15:59:46","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente bWV8ChbwjtnS-nO6AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:46","type":"socket"}
{"level":"info","message":"Cliente bWV8ChbwjtnS-nO6AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 15:59:46","totalClients":3,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"bWV8ChbwjtnS-nO6AAAF","timestamp":"2025-06-15 15:59:48","type":"socket"}
{"level":"info","message":"Cliente bWV8ChbwjtnS-nO6AAAF removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 15:59:48","type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 16:00:03","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 16:00:03","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"ddCw9URq9_Oux6ZXAAAH","timestamp":"2025-06-15 16:00:05","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente ddCw9URq9_Oux6ZXAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"route","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:00:05","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente ddCw9URq9_Oux6ZXAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"socket"}
{"level":"info","message":"Cliente ddCw9URq9_Oux6ZXAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","totalClients":3,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:00:06","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"wuIcGUKNNbNXnjvJAAAB","timestamp":"2025-06-15 16:00:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente wuIcGUKNNbNXnjvJAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:00:48","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"zRdakDra_Tlc94D9AAAD","timestamp":"2025-06-15 16:00:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente zRdakDra_Tlc94D9AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:00:48","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"wuIcGUKNNbNXnjvJAAAB","timestamp":"2025-06-15 16:00:49","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"LA5yAFExBcYuPkh4AAAF","timestamp":"2025-06-15 16:00:50","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente LA5yAFExBcYuPkh4AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:00:50","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente wuIcGUKNNbNXnjvJAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","type":"socket"}
{"level":"info","message":"Cliente wuIcGUKNNbNXnjvJAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente zRdakDra_Tlc94D9AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","type":"socket"}
{"level":"info","message":"Cliente zRdakDra_Tlc94D9AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente LA5yAFExBcYuPkh4AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","type":"socket"}
{"level":"info","message":"Cliente LA5yAFExBcYuPkh4AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:51","totalClients":3,"type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"Lett_UoiHJhe0iJPAAAH","timestamp":"2025-06-15 16:00:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente Lett_UoiHJhe0iJPAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:00:53","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente Lett_UoiHJhe0iJPAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"socket"}
{"level":"info","message":"Cliente Lett_UoiHJhe0iJPAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","totalClients":4,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:00:54","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"fepxiN6UwiCFjQwzAAAB","timestamp":"2025-06-15 16:01:26","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente fepxiN6UwiCFjQwzAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:01:26","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"z0AN0-xOIhL-F9rzAAAD","timestamp":"2025-06-15 16:01:26","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente z0AN0-xOIhL-F9rzAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:01:26","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"CtFT_xoXCgsceNHGAAAF","timestamp":"2025-06-15 16:01:27","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente CtFT_xoXCgsceNHGAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:01:27","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente fepxiN6UwiCFjQwzAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","type":"socket"}
{"level":"info","message":"Cliente fepxiN6UwiCFjQwzAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente z0AN0-xOIhL-F9rzAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","type":"socket"}
{"level":"info","message":"Cliente z0AN0-xOIhL-F9rzAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente CtFT_xoXCgsceNHGAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","type":"socket"}
{"level":"info","message":"Cliente CtFT_xoXCgsceNHGAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:28","totalClients":3,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"z0AN0-xOIhL-F9rzAAAD","timestamp":"2025-06-15 16:01:32","type":"socket"}
{"level":"info","message":"Cliente z0AN0-xOIhL-F9rzAAAD removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 16:01:32","type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"EHjFA604J-3SRyZ1AAAH","timestamp":"2025-06-15 16:01:36","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente EHjFA604J-3SRyZ1AAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:01:36","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente EHjFA604J-3SRyZ1AAAH.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"socket"}
{"level":"info","message":"Cliente EHjFA604J-3SRyZ1AAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:01:37","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"18B-7aV9SY3VHApLAAAB","timestamp":"2025-06-15 16:02:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 18B-7aV9SY3VHApLAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:02:53","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"7ygcFIMoDwtzkLIeAAAD","timestamp":"2025-06-15 16:02:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 7ygcFIMoDwtzkLIeAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:02:53","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"mNDEzXyUqfc-FdQWAAAF","timestamp":"2025-06-15 16:02:53","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente mNDEzXyUqfc-FdQWAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:02:53","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:02:55","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 18B-7aV9SY3VHApLAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 16:02:55","type":"socket"}
{"level":"info","message":"Cliente 18B-7aV9SY3VHApLAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:02:55","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:02:55","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 7ygcFIMoDwtzkLIeAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:02:55","type":"socket"}
{"level":"info","message":"Cliente 7ygcFIMoDwtzkLIeAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:02:55","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:02:56","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente mNDEzXyUqfc-FdQWAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:02:56","type":"socket"}
{"level":"info","message":"Cliente mNDEzXyUqfc-FdQWAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:02:56","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"RFXVYvBR825lDxeMAAAB","timestamp":"2025-06-15 16:03:02","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente RFXVYvBR825lDxeMAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:03:02","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"0flndUe7eE2gnXYMAAAD","timestamp":"2025-06-15 16:03:03","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 0flndUe7eE2gnXYMAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:03:03","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"uFqz2VvcjWx-ktjmAAAF","timestamp":"2025-06-15 16:03:04","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente uFqz2VvcjWx-ktjmAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:03:04","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:03:04","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 0flndUe7eE2gnXYMAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:04","type":"socket"}
{"level":"info","message":"Cliente 0flndUe7eE2gnXYMAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:04","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:03:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente RFXVYvBR825lDxeMAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:05","type":"socket"}
{"level":"info","message":"Cliente RFXVYvBR825lDxeMAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:05","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"uFqz2VvcjWx-ktjmAAAF","timestamp":"2025-06-15 16:03:05","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:03:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente uFqz2VvcjWx-ktjmAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:05","type":"socket"}
{"level":"info","message":"Cliente uFqz2VvcjWx-ktjmAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:05","totalClients":3,"type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 16:03:08","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 16:03:08","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 16:03:08","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:03:08","type":"route","userId":null}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"pq9d8MzPSwSJEwDNAAAE","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"m0YPIivx5MF0vTlSAAAF","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente pq9d8MzPSwSJEwDNAAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente m0YPIivx5MF0vTlSAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente pq9d8MzPSwSJEwDNAAAE.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Cliente pq9d8MzPSwSJEwDNAAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente m0YPIivx5MF0vTlSAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","type":"socket"}
{"level":"info","message":"Cliente m0YPIivx5MF0vTlSAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:40","totalClients":2,"type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 16:03:45","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 16:03:45","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 16:03:45","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:03:45","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:03:45","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"-MLCjos4yo5iFBSDAAAH","timestamp":"2025-06-15 16:03:46","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente -MLCjos4yo5iFBSDAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente -MLCjos4yo5iFBSDAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"socket"}
{"level":"info","message":"Cliente -MLCjos4yo5iFBSDAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:03:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:03:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:03:47","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"is6BjaYuKZEGtssQAAAB","timestamp":"2025-06-15 16:04:18","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente is6BjaYuKZEGtssQAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:18","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"r-AHZa-OQ8ewOWwDAAAD","timestamp":"2025-06-15 16:04:19","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente r-AHZa-OQ8ewOWwDAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:19","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"XajYtjUs0dX3DgjQAAAF","timestamp":"2025-06-15 16:04:19","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente XajYtjUs0dX3DgjQAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:19","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"n32cJf_5Q_YyS2H8AAAD","timestamp":"2025-06-15 16:04:22","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"y4VRPXPRj4XEVvk4AAAE","timestamp":"2025-06-15 16:04:22","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"BQwzDiCNJ6afLN-kAAAF","timestamp":"2025-06-15 16:04:22","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente n32cJf_5Q_YyS2H8AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:22","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente BQwzDiCNJ6afLN-kAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:22","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente y4VRPXPRj4XEVvk4AAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:22","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente n32cJf_5Q_YyS2H8AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","type":"socket"}
{"level":"info","message":"Cliente n32cJf_5Q_YyS2H8AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente BQwzDiCNJ6afLN-kAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","type":"socket"}
{"level":"info","message":"Cliente BQwzDiCNJ6afLN-kAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente y4VRPXPRj4XEVvk4AAAE.","service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","type":"socket"}
{"level":"info","message":"Cliente y4VRPXPRj4XEVvk4AAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:04:25","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6615","service":"notifications-app-api","timestamp":"2025-06-15 16:04:26","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:04:26","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"V8jVYsmzDZc_CsN0AAAC","timestamp":"2025-06-15 16:04:58","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"_G4iC1-ulbWoEmEtAAAE","timestamp":"2025-06-15 16:04:58","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"TqfIAPomXAA1TilKAAAF","timestamp":"2025-06-15 16:04:58","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente V8jVYsmzDZc_CsN0AAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:58","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente _G4iC1-ulbWoEmEtAAAE","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:58","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente TqfIAPomXAA1TilKAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:04:58","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente _G4iC1-ulbWoEmEtAAAE.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","type":"socket"}
{"level":"info","message":"Cliente _G4iC1-ulbWoEmEtAAAE associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente V8jVYsmzDZc_CsN0AAAC.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","type":"socket"}
{"level":"info","message":"Cliente V8jVYsmzDZc_CsN0AAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente TqfIAPomXAA1TilKAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","type":"socket"}
{"level":"info","message":"Cliente TqfIAPomXAA1TilKAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:00","totalClients":3,"type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"CjSdsiZzJTKh3IpfAAAB","timestamp":"2025-06-15 16:05:03","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente CjSdsiZzJTKh3IpfAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:03","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"iAisTJiEQvvuooBUAAAD","timestamp":"2025-06-15 16:05:03","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente iAisTJiEQvvuooBUAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:03","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"XvgX6X8clp2pbL-KAAAF","timestamp":"2025-06-15 16:05:04","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente XvgX6X8clp2pbL-KAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:04","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente CjSdsiZzJTKh3IpfAAAB.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","type":"socket"}
{"level":"info","message":"Cliente CjSdsiZzJTKh3IpfAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente iAisTJiEQvvuooBUAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","type":"socket"}
{"level":"info","message":"Cliente iAisTJiEQvvuooBUAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente XvgX6X8clp2pbL-KAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","type":"socket"}
{"level":"info","message":"Cliente XvgX6X8clp2pbL-KAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:05","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:06","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:05:06","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6620,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:05:06","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:13","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:05:13","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6621,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:05:13","type":"message"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"XvgX6X8clp2pbL-KAAAF","timestamp":"2025-06-15 16:05:20","type":"socket"}
{"level":"info","message":"Cliente XvgX6X8clp2pbL-KAAAF removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 16:05:20","type":"socket"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Tentativa de login","service":"notifications-app-api","timestamp":"2025-06-15 16:05:22","type":"user"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Executando consulta de login","service":"notifications-app-api","timestamp":"2025-06-15 16:05:22","type":"query"}
{"email":"feliperosenek@gmail.com","level":"info","message":"Login bem-sucedido","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"user","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"j0Y5eF7M8vYJfjNKAAAH","timestamp":"2025-06-15 16:05:23","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente j0Y5eF7M8vYJfjNKAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"route","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:05:23","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente j0Y5eF7M8vYJfjNKAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"socket"}
{"level":"info","message":"Cliente j0Y5eF7M8vYJfjNKAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:05:24","type":"query"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:05:27","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:05:27","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6622,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:05:27","type":"message"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"j0Y5eF7M8vYJfjNKAAAH","timestamp":"2025-06-15 16:06:19","type":"socket"}
{"level":"info","message":"Cliente j0Y5eF7M8vYJfjNKAAAH removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 16:06:19","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:06:21","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:06:21","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:06:21","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:06:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:06:22","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"kfDxxCVEPJ1as_HdAAAJ","timestamp":"2025-06-15 16:06:23","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"query"}
{"level":"info","message":"Evento set-route recebido do cliente kfDxxCVEPJ1as_HdAAAJ","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"route","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente kfDxxCVEPJ1as_HdAAAJ.","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"socket"}
{"level":"info","message":"Cliente kfDxxCVEPJ1as_HdAAAJ associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","totalClients":3,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:06:23","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:06:24","type":"query"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:06:26","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:06:26","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6623,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:06:26","type":"message"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6620","service":"notifications-app-api","timestamp":"2025-06-15 16:06:29","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:06:29","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6621","service":"notifications-app-api","timestamp":"2025-06-15 16:06:30","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:06:30","type":"query"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:06:34","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:06:34","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6624,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:06:34","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:06:48","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:06:49","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6625,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:06:49","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:07:20","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:07:21","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6626,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:07:21","type":"message"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"pys3jU9niSoTlTt0AAAB","timestamp":"2025-06-15 16:08:25","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"lVob_9c_kYPtfdH-AAAD","timestamp":"2025-06-15 16:08:25","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente pys3jU9niSoTlTt0AAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:08:25","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente lVob_9c_kYPtfdH-AAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:08:25","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"wGpIIVOhni3-23lbAAAF","timestamp":"2025-06-15 16:08:25","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente wGpIIVOhni3-23lbAAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:08:25","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente pys3jU9niSoTlTt0AAAB.","service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","type":"socket"}
{"level":"info","message":"Cliente pys3jU9niSoTlTt0AAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente lVob_9c_kYPtfdH-AAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","type":"socket"}
{"level":"info","message":"Cliente lVob_9c_kYPtfdH-AAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","totalClients":2,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente wGpIIVOhni3-23lbAAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","type":"socket"}
{"level":"info","message":"Cliente wGpIIVOhni3-23lbAAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:08:28","totalClients":3,"type":"socket"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:08:32","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:08:32","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6627,"service":"notifications-app-api","socketCount":3,"timestamp":"2025-06-15 16:08:32","type":"message"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"lVob_9c_kYPtfdH-AAAD","timestamp":"2025-06-15 16:10:35","type":"socket"}
{"level":"info","message":"Cliente lVob_9c_kYPtfdH-AAAD removido da rota felipe.","remainingClients":2,"service":"notifications-app-api","timestamp":"2025-06-15 16:10:35","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"pys3jU9niSoTlTt0AAAB","timestamp":"2025-06-15 16:10:35","type":"socket"}
{"level":"info","message":"Cliente pys3jU9niSoTlTt0AAAB removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 16:10:35","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"wGpIIVOhni3-23lbAAAF","timestamp":"2025-06-15 16:10:35","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 16:10:35","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:10:40","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:10:40","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:10:40","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:10:40","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:10:41","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:10:41","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:10:41","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"--AES3uPS6qQ3-dZAAAI","timestamp":"2025-06-15 16:10:41","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"2cd_EL5u3w0IiR0pAAAJ","timestamp":"2025-06-15 16:10:41","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:10:41","type":"query"}
{"level":"info","message":"Evento set-route recebido do cliente --AES3uPS6qQ3-dZAAAI","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:10:41","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente 2cd_EL5u3w0IiR0pAAAJ","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:10:41","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente --AES3uPS6qQ3-dZAAAI.","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"socket"}
{"level":"info","message":"Cliente --AES3uPS6qQ3-dZAAAI associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente 2cd_EL5u3w0IiR0pAAAJ.","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"socket"}
{"level":"info","message":"Cliente 2cd_EL5u3w0IiR0pAAAJ associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:10:42","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:10:43","type":"query"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"LCMhel65zdjsB6trAAAC","timestamp":"2025-06-15 16:12:17","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"q2DKheVpaz6LSDStAAAD","timestamp":"2025-06-15 16:12:17","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente LCMhel65zdjsB6trAAAC","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:12:17","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente q2DKheVpaz6LSDStAAAD","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:12:17","type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:12:20","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente LCMhel65zdjsB6trAAAC.","service":"notifications-app-api","timestamp":"2025-06-15 16:12:20","type":"socket"}
{"level":"info","message":"Cliente LCMhel65zdjsB6trAAAC associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:12:20","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:12:20","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente q2DKheVpaz6LSDStAAAD.","service":"notifications-app-api","timestamp":"2025-06-15 16:12:20","type":"socket"}
{"level":"info","message":"Cliente q2DKheVpaz6LSDStAAAD associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:12:20","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"q2DKheVpaz6LSDStAAAD","timestamp":"2025-06-15 16:12:44","type":"socket"}
{"level":"info","message":"Cliente q2DKheVpaz6LSDStAAAD removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 16:12:44","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:12:47","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:12:47","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:12:47","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:12:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:12:48","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:12:48","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:12:48","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"NzyGvZc4cJoUNTN7AAAF","timestamp":"2025-06-15 16:12:48","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente NzyGvZc4cJoUNTN7AAAF","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente NzyGvZc4cJoUNTN7AAAF.","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"socket"}
{"level":"info","message":"Cliente NzyGvZc4cJoUNTN7AAAF associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:12:49","type":"query"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"NzyGvZc4cJoUNTN7AAAF","timestamp":"2025-06-15 16:12:59","type":"socket"}
{"level":"info","message":"Cliente NzyGvZc4cJoUNTN7AAAF removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 16:12:59","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:13:08","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:13:08","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:13:08","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:13:08","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:13:09","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:13:09","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:13:09","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"M6u1PH7ajeGKVppwAAAH","timestamp":"2025-06-15 16:13:09","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:13:09","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:13:09","type":"query"}
{"level":"info","message":"Evento set-route recebido do cliente M6u1PH7ajeGKVppwAAAH","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:13:09","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"route","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente M6u1PH7ajeGKVppwAAAH.","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"socket"}
{"level":"info","message":"Cliente M6u1PH7ajeGKVppwAAAH associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","totalClients":2,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:13:10","type":"query"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"M6u1PH7ajeGKVppwAAAH","timestamp":"2025-06-15 16:13:24","type":"socket"}
{"level":"info","message":"Cliente M6u1PH7ajeGKVppwAAAH removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 16:13:24","type":"socket"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"LCMhel65zdjsB6trAAAC","timestamp":"2025-06-15 16:13:24","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 16:13:24","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:13:30","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:13:30","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:13:30","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:13:31","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"hfRUATA3j3-50F8_AAAK","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"uIbpIwufF0_ljG6fAAAL","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Evento set-route recebido do cliente hfRUATA3j3-50F8_AAAK","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"query"}
{"level":"info","message":"Evento set-route recebido do cliente uIbpIwufF0_ljG6fAAAL","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente hfRUATA3j3-50F8_AAAK.","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Cliente hfRUATA3j3-50F8_AAAK associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","totalClients":1,"type":"socket"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente uIbpIwufF0_ljG6fAAAL.","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","type":"socket"}
{"level":"info","message":"Cliente uIbpIwufF0_ljG6fAAAL associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:13:32","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:13:33","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:13:33","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:13:33","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:13:33","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:13:33","type":"query"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"uIbpIwufF0_ljG6fAAAL","timestamp":"2025-06-15 16:15:55","type":"socket"}
{"level":"info","message":"Cliente uIbpIwufF0_ljG6fAAAL removido da rota felipe.","remainingClients":1,"service":"notifications-app-api","timestamp":"2025-06-15 16:15:55","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:15:55","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:15:55","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:15:55","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:15:55","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:15:56","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:15:56","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:15:56","type":"query","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:15:57","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:15:57","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:15:57","type":"route","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:15:57","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:15:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:15:57","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:15:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:15:58","type":"query"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"hfRUATA3j3-50F8_AAAK","timestamp":"2025-06-15 16:16:03","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 16:16:03","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:16:07","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:16:07","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:16:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:16:07","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:16:07","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:16:07","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"irKv8q4VD-9-o1frAAAN","timestamp":"2025-06-15 16:16:07","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"query"}
{"level":"info","message":"Evento set-route recebido do cliente irKv8q4VD-9-o1frAAAN","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"route","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente irKv8q4VD-9-o1frAAAN.","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"socket"}
{"level":"info","message":"Cliente irKv8q4VD-9-o1frAAAN associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","totalClients":1,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:16:08","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:16:09","type":"query"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:16:31","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:16:31","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6628,"service":"notifications-app-api","socketCount":1,"timestamp":"2025-06-15 16:16:31","type":"message"}
{"level":"info","message":"Cliente desconectado","service":"notifications-app-api","socketId":"irKv8q4VD-9-o1frAAAN","timestamp":"2025-06-15 16:16:39","type":"socket"}
{"level":"info","message":"Nenhum cliente restante na rota felipe, removendo rota.","service":"notifications-app-api","timestamp":"2025-06-15 16:16:39","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:16:43","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-06-15 16:16:43","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:16:43","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:16:44","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:16:44","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"query","userId":14}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"nxqdNBODd2JxSDYyAAAP","timestamp":"2025-06-15 16:16:45","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"query"}
{"level":"info","message":"Evento set-route recebido do cliente nxqdNBODd2JxSDYyAAAP","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"query"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"route","userId":14}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente nxqdNBODd2JxSDYyAAAP.","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"socket"}
{"level":"info","message":"Cliente nxqdNBODd2JxSDYyAAAP associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-06-15 16:16:45","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-06-15 16:16:46","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:16:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:16:46","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6628","service":"notifications-app-api","timestamp":"2025-06-15 16:17:03","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:17:05","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6627","service":"notifications-app-api","timestamp":"2025-06-15 16:17:14","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:17:14","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-06-15 16:17:20","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-06-15 16:17:20","type":"query"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:19:24","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:19:24","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6629,"service":"notifications-app-api","socketCount":1,"timestamp":"2025-06-15 16:19:24","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:19:27","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:19:27","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6630,"service":"notifications-app-api","socketCount":1,"timestamp":"2025-06-15 16:19:27","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:19:28","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:19:29","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6631,"service":"notifications-app-api","socketCount":1,"timestamp":"2025-06-15 16:19:29","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-06-15 16:19:30","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[cvkrBuDBX8hyUvjf_7T-xX]","service":"notifications-app-api","timestamp":"2025-06-15 16:19:30","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":6632,"service":"notifications-app-api","socketCount":1,"timestamp":"2025-06-15 16:19:30","type":"message"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6632","service":"notifications-app-api","timestamp":"2025-06-15 16:19:41","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:19:43","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 6631","service":"notifications-app-api","timestamp":"2025-06-15 16:19:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-06-15 16:19:47","type":"query"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:49:17","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:49:17","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7257,"service":"notifications-app-api","timestamp":"2025-07-14 15:49:18","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"teste","service":"notifications-app-api","timestamp":"2025-07-14 15:49:26","type":"message","userId":15}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:49:26","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7258,"service":"notifications-app-api","timestamp":"2025-07-14 15:49:26","type":"message"}
{"level":"info","message":"Nenhum cliente conectado na rota teste e sem token push válido na Web","service":"notifications-app-api","timestamp":"2025-07-14 15:49:26","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:49:49","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:49:50","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7259,"service":"notifications-app-api","timestamp":"2025-07-14 15:49:50","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:50:22","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:50:22","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7260,"service":"notifications-app-api","timestamp":"2025-07-14 15:50:23","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:50:30","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:50:30","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7261,"service":"notifications-app-api","timestamp":"2025-07-14 15:50:30","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:53:54","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:53:54","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7262,"service":"notifications-app-api","timestamp":"2025-07-14 15:53:54","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:55:10","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:55:10","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7263,"service":"notifications-app-api","timestamp":"2025-07-14 15:55:10","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:55:46","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:55:46","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7264,"service":"notifications-app-api","timestamp":"2025-07-14 15:55:46","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"teste","service":"notifications-app-api","timestamp":"2025-07-14 15:55:55","type":"message","userId":15}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:55:55","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7265,"service":"notifications-app-api","timestamp":"2025-07-14 15:55:55","type":"message"}
{"level":"info","message":"Nenhum cliente conectado na rota teste e sem token push válido na Web","service":"notifications-app-api","timestamp":"2025-07-14 15:55:55","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"teste","service":"notifications-app-api","timestamp":"2025-07-14 15:57:25","type":"message","userId":15}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[eFdKZJCcmQT4wZ0RXSpsPm]","service":"notifications-app-api","timestamp":"2025-07-14 15:57:25","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:58:53","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[-OhRP0ElBZP1f1kD0mZnVX]","service":"notifications-app-api","timestamp":"2025-07-14 15:58:53","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7267,"service":"notifications-app-api","timestamp":"2025-07-14 15:58:54","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:59:26","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[-OhRP0ElBZP1f1kD0mZnVX]","service":"notifications-app-api","timestamp":"2025-07-14 15:59:27","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7268,"service":"notifications-app-api","timestamp":"2025-07-14 15:59:27","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:59:35","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[-OhRP0ElBZP1f1kD0mZnVX]","service":"notifications-app-api","timestamp":"2025-07-14 15:59:35","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7269,"service":"notifications-app-api","timestamp":"2025-07-14 15:59:36","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 15:59:41","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[-OhRP0ElBZP1f1kD0mZnVX]","service":"notifications-app-api","timestamp":"2025-07-14 15:59:42","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7270,"service":"notifications-app-api","timestamp":"2025-07-14 15:59:42","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 16:08:10","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[-OhRP0ElBZP1f1kD0mZnVX]","service":"notifications-app-api","timestamp":"2025-07-14 16:08:10","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7271,"service":"notifications-app-api","timestamp":"2025-07-14 16:08:11","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-14 16:09:27","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[-OhRP0ElBZP1f1kD0mZnVX]","service":"notifications-app-api","timestamp":"2025-07-14 16:09:27","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7272,"service":"notifications-app-api","timestamp":"2025-07-14 16:09:27","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 14:24:49","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[1HegZzNny-E4Lcchc5ryGR]","service":"notifications-app-api","timestamp":"2025-07-31 14:24:49","type":"message"}
{"expoResult":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"level":"info","message":"Notificação Expo enviada","messageId":7831,"service":"notifications-app-api","timestamp":"2025-07-31 14:24:49","type":"message"}
{"level":"info","message":"Novo cliente conectado","service":"notifications-app-api","socketId":"gfH_rhMEtJ2etDkgAAAB","timestamp":"2025-07-31 14:26:18","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 14:26:18","type":"query"}
{"level":"info","message":"Evento set-route recebido do cliente gfH_rhMEtJ2etDkgAAAB","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 14:26:18","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 14:26:18","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 14:26:18","type":"query","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 14:26:18","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","type":"query"}
{"level":"info","message":"Resultado da consulta ao banco para a rota felipe","result":[{"id":14}],"service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","type":"socket"}
{"level":"info","message":"Rota felipe validada para o cliente gfH_rhMEtJ2etDkgAAAB.","service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","type":"socket"}
{"level":"info","message":"Cliente gfH_rhMEtJ2etDkgAAAB associado à rota felipe.","service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","type":"route","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET token_notification_android = 'ExponentPushToken[1HegZzNny-E4Lcchc5ryGR]' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-07-31 14:26:20","type":"query"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 14:26:33","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[1HegZzNny-E4Lcchc5ryGR]","service":"notifications-app-api","timestamp":"2025-07-31 14:26:33","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":7832,"service":"notifications-app-api","socketCount":1,"timestamp":"2025-07-31 14:26:33","type":"message"}
{"level":"info","message":"Usuário encontrado","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 14:43:25","type":"message","userId":14}
{"level":"info","message":"Token de notificação Android encontrado","pushToken":"ExponentPushToken[1HegZzNny-E4Lcchc5ryGR]","service":"notifications-app-api","timestamp":"2025-07-31 14:43:25","type":"message"}
{"level":"info","message":"Mensagem enviada via WebSocket para a rota felipe","messageId":7833,"service":"notifications-app-api","socketCount":1,"timestamp":"2025-07-31 14:43:25","type":"message"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 15:21:12"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 15:21:12"}
{"level":"info","message":"Servidor iniciado na porta 3000","service":"notifications-app-api","timestamp":"2025-07-31 15:21:45"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 15:21:45"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 15:25:01"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 15:25:01"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 15:29:23"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 15:29:23"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 15:32:36"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 15:32:36"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7836,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 15:32:44","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7837,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 15:32:59","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7838,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 16:45:27","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7839,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 16:45:32","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7840,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 16:45:49","type":"message"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:03:44"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:03:44"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:03:52","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:03:52","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 17:03:52","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:03:55","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:03:56","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:03:56","type":"query","userId":14}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:03:56","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"T0vqBtodHTSXPapZAAAB","timestamp":"2025-07-31 17:03:56","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:03:56","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"T0vqBtodHTSXPapZAAAB","timestamp":"2025-07-31 17:03:56","totalClients":1,"type":"socket"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7841,"service":"notifications-app-api","timestamp":"2025-07-31 17:04:09","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7841,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:04:09","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7842,"service":"notifications-app-api","timestamp":"2025-07-31 17:04:29","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7842,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:04:29","type":"message"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:04:35","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 17:04:35","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:04:35","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:04:36","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:04:36","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:04:36","type":"query","userId":14}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:04:36","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:04:36","type":"route","userId":14}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7843,"service":"notifications-app-api","timestamp":"2025-07-31 17:04:47","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7843,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:04:47","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7844,"service":"notifications-app-api","timestamp":"2025-07-31 17:06:28","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7844,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:06:29","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7845,"service":"notifications-app-api","timestamp":"2025-07-31 17:06:39","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7845,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:06:39","type":"message"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:08:35","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 17:08:35","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:08:35","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:08:36","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:08:37","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:08:37","type":"query","userId":14}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:08:37","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:08:37","type":"route","userId":14}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7846,"service":"notifications-app-api","timestamp":"2025-07-31 17:08:42","type":"message"}
{"deliveryResults":{"expo":{"response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7846,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:08:43","type":"message"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:11:35"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:11:35"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"btjHiPnWjUKlAi8lAAAB","timestamp":"2025-07-31 17:11:36","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"btjHiPnWjUKlAi8lAAAB","timestamp":"2025-07-31 17:11:39","totalClients":1,"type":"socket"}
{"hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7847,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"message"}
{"hasToken":false,"isValidToken":false,"level":"info","message":"FCM não disponível","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7847,"service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7847,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:11:42","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7847,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:11:42","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:12:37"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:12:37"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"XgVmjF-7MVmDdvLSAAAB","timestamp":"2025-07-31 17:12:39","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"XgVmjF-7MVmDdvLSAAAB","timestamp":"2025-07-31 17:12:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:28:06"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:28:06"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"faZ_R2jLq9yFoQZbAAAB","timestamp":"2025-07-31 17:28:08","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"faZ_R2jLq9yFoQZbAAAB","timestamp":"2025-07-31 17:28:11","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:28:22"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:28:22"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Gv9mD_MgQmId8uf-AAAB","timestamp":"2025-07-31 17:28:23","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Gv9mD_MgQmId8uf-AAAB","timestamp":"2025-07-31 17:28:26","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:28:36"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:28:36"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"9nRAw9lh85zPwk2FAAAB","timestamp":"2025-07-31 17:28:39","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"9nRAw9lh85zPwk2FAAAB","timestamp":"2025-07-31 17:28:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:29:10"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:29:10"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"LwT9TfqCQdryMqeqAAAB","timestamp":"2025-07-31 17:29:11","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"LwT9TfqCQdryMqeqAAAB","timestamp":"2025-07-31 17:29:15","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:29:24"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:29:24"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"X0I2OmKlDurLxtsyAAAB","timestamp":"2025-07-31 17:29:26","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"X0I2OmKlDurLxtsyAAAB","timestamp":"2025-07-31 17:29:30","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:29:58"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:29:58"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"AtpTfGbPyBPg0k6LAAAB","timestamp":"2025-07-31 17:29:59","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"AtpTfGbPyBPg0k6LAAAB","timestamp":"2025-07-31 17:30:02","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:34:54"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:34:54"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"OOU_xaXnAA0zksx0AAAB","timestamp":"2025-07-31 17:34:55","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OOU_xaXnAA0zksx0AAAB","timestamp":"2025-07-31 17:34:59","totalClients":1,"type":"socket"}
{"hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7848,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:35:01","type":"message"}
{"hasToken":false,"isValidToken":false,"level":"info","message":"FCM não disponível","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:01","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:01","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:01","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:01","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:01","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:02","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7848,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:02","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7848,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:35:02","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7848,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:35:02","type":"delivery"}
{"hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7849,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:35:40","type":"message"}
{"hasToken":false,"isValidToken":false,"level":"info","message":"FCM não disponível","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:40","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:40","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:40","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:40","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:40","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:41","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:41","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:41","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7849,"service":"notifications-app-api","timestamp":"2025-07-31 17:35:41","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7849,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:35:41","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7849,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:35:41","type":"delivery"}
{"hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7850,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"message"}
{"hasToken":false,"isValidToken":false,"level":"info","message":"FCM não disponível","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7850,"service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7850,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:37:54","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7850,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:37:54","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:40:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 17:40:12","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:40:12","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:40:13","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:40:13","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:40:13","type":"query","userId":14}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:40:13","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:40:14","type":"route","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:40:38","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:40:39","type":"query"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:40:39","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:40:51","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:40:53","type":"query"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:40:53","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:41:00","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:41:00","type":"query"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:41:00","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:41:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:41:07","type":"query"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:41:08","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:41:15","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"GdyOCMeEWYk01JS4AAAD","timestamp":"2025-07-31 17:41:15","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:41:15","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"GdyOCMeEWYk01JS4AAAD","timestamp":"2025-07-31 17:41:16","totalClients":2,"type":"socket"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:41:16","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"GdyOCMeEWYk01JS4AAAD","timestamp":"2025-07-31 17:41:44","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"OOU_xaXnAA0zksx0AAAB","timestamp":"2025-07-31 17:41:44","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:41:49","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 17:41:49","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 17:41:49","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 17:41:50","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:41:50","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 17:41:50","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"2SFjhZO_SQig7CayAAAF","timestamp":"2025-07-31 17:41:50","type":"socket"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 17:41:50","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:41:50","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"2SFjhZO_SQig7CayAAAF","timestamp":"2025-07-31 17:41:51","totalClients":1,"type":"socket"}
{"hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7851,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"message"}
{"hasToken":false,"isValidToken":false,"level":"info","message":"FCM não disponível","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7851,"service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7851,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:42:07","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":null,"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7851,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:42:07","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:44:59"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:44:59"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"WRpnVmYR46QDDRecAAAB","timestamp":"2025-07-31 17:45:01","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"WRpnVmYR46QDDRecAAAB","timestamp":"2025-07-31 17:45:04","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:45:14"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:45:14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"z_34_-8hPyYK-MhvAAAB","timestamp":"2025-07-31 17:45:17","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"z_34_-8hPyYK-MhvAAAB","timestamp":"2025-07-31 17:45:24","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:45:38"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:45:38"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"MPzQ8V6_dFZ9JL9QAAAB","timestamp":"2025-07-31 17:45:39","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"MPzQ8V6_dFZ9JL9QAAAB","timestamp":"2025-07-31 17:45:43","totalClients":1,"type":"socket"}
{"level":"info","message":"Enviando notificação FCM","messageId":999,"service":"notifications-app-api","timestamp":"2025-07-31 17:46:02","token":"token-invalido...","type":"message"}
{"error":"The registration token is not a valid FCM registration token","level":"error","message":"Erro ao enviar notificação FCM","messageId":999,"service":"notifications-app-api","timestamp":"2025-07-31 17:46:03","token":"token-invalido..."}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:46:19"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:46:19"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"hCgI5cv4_2stI0PgAAAB","timestamp":"2025-07-31 17:46:20","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"hCgI5cv4_2stI0PgAAAB","timestamp":"2025-07-31 17:46:23","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:46:50"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:46:50"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"SdD3R45vJlnz61SgAAAB","timestamp":"2025-07-31 17:46:53","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SdD3R45vJlnz61SgAAAB","timestamp":"2025-07-31 17:46:56","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:46:59"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:46:59"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"FzgQwLeWxbcXUJ6YAAAB","timestamp":"2025-07-31 17:47:00","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"FzgQwLeWxbcXUJ6YAAAB","timestamp":"2025-07-31 17:47:03","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7852,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:50:37","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:37","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:37","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:37","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:37","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:37","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:38","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:38","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:38","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7852,"service":"notifications-app-api","timestamp":"2025-07-31 17:50:38","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7852,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:50:38","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7852,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:50:38","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 17:54:18"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 17:54:18"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"c6UXKy9RWHifydWQAAAB","timestamp":"2025-07-31 17:54:19","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"c6UXKy9RWHifydWQAAAB","timestamp":"2025-07-31 17:54:22","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7853,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7853,"service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7853,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:54:36","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7853,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:54:36","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7854,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7854,"service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7854,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:55:51","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7854,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:55:51","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7855,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:56:19","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:19","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:19","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:19","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:19","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:19","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:20","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:20","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:20","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7855,"service":"notifications-app-api","timestamp":"2025-07-31 17:56:20","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7855,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 17:56:20","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7855,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 17:56:20","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 18:01:40"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 18:01:40"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"wJ-TLHlD6pF26XfNAAAB","timestamp":"2025-07-31 18:01:43","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wJ-TLHlD6pF26XfNAAAB","timestamp":"2025-07-31 18:01:47","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 18:03:41"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 18:03:41"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"pyzbRKmk4npSVhKQAAAB","timestamp":"2025-07-31 18:03:44","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"pyzbRKmk4npSVhKQAAAB","timestamp":"2025-07-31 18:03:47","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 18:04:06"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 18:04:06"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Uhs3YiKshTr1Q8-dAAAB","timestamp":"2025-07-31 18:04:08","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Uhs3YiKshTr1Q8-dAAAB","timestamp":"2025-07-31 18:04:11","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 18:23:30"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 18:23:30"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 18:33:19","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 18:33:19","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 18:33:19","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 18:33:22","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 18:33:22","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 18:33:22","type":"query","userId":14}
{"count":44,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 18:33:22","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"yKDZzWeigx_2WsyZAAAB","timestamp":"2025-07-31 18:33:22","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 18:33:23","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"yKDZzWeigx_2WsyZAAAB","timestamp":"2025-07-31 18:33:23","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7857,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 18:33:51","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:51","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:51","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:51","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:51","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:51","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:52","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:52","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:52","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7857,"service":"notifications-app-api","timestamp":"2025-07-31 18:33:52","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7857,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 18:33:52","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7857,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 18:33:52","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"yKDZzWeigx_2WsyZAAAB","timestamp":"2025-07-31 18:37:33","type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 19:02:55"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 19:02:55"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 19:03:01","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 19:03:01","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 19:03:01","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 19:03:04","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 19:03:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 19:03:05","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"UvLI4T3__WZFpkJjAAAB","timestamp":"2025-07-31 19:03:05","type":"socket"}
{"count":46,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 19:03:05","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:03:05","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"UvLI4T3__WZFpkJjAAAB","timestamp":"2025-07-31 19:03:05","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7859,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7859,"service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7859,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 19:03:11","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7859,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:03:11","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 19:05:36"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 19:05:36"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Z-QkaIx_SvyXnjI8AAAB","timestamp":"2025-07-31 19:05:39","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Z-QkaIx_SvyXnjI8AAAB","timestamp":"2025-07-31 19:05:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 19:05:54"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 19:05:54"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"metNdwttmzbbF-x2AAAB","timestamp":"2025-07-31 19:05:56","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"metNdwttmzbbF-x2AAAB","timestamp":"2025-07-31 19:05:59","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7860,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:06:07","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:07","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:07","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:08","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:08","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:09","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:14","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7860,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:15","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7860,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 19:06:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7860,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:06:15","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 19:06:24"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 19:06:24"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"czcfyhD2SRsWOZ_7AAAB","timestamp":"2025-07-31 19:06:26","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"czcfyhD2SRsWOZ_7AAAB","timestamp":"2025-07-31 19:06:29","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7861,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:06:51","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:51","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:51","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:51","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:51","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:51","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:52","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:52","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:52","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7861,"service":"notifications-app-api","timestamp":"2025-07-31 19:06:52","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7861,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 19:06:52","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7861,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:06:52","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 19:09:49"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 19:09:49"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"JI8O3hgKVDh9plQnAAAB","timestamp":"2025-07-31 19:09:50","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"JI8O3hgKVDh9plQnAAAB","timestamp":"2025-07-31 19:09:54","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 19:17:55"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 19:17:55"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"8qxKYhY2320NK-4VAAAB","timestamp":"2025-07-31 19:17:55","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"8qxKYhY2320NK-4VAAAB","timestamp":"2025-07-31 19:18:00","totalClients":1,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"8qxKYhY2320NK-4VAAAB","timestamp":"2025-07-31 19:26:31","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 19:28:53","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 19:28:53","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 19:28:53","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 19:28:55","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 19:28:55","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 19:28:55","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"yeAXXfTzVQu0BYhHAAAD","timestamp":"2025-07-31 19:28:55","type":"socket"}
{"count":49,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 19:28:55","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:28:55","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"yeAXXfTzVQu0BYhHAAAD","timestamp":"2025-07-31 19:28:55","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7862,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:29:03","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:03","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:03","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:03","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:03","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:03","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:04","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:04","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:04","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7862,"service":"notifications-app-api","timestamp":"2025-07-31 19:29:04","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7862,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 19:29:04","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7862,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:29:04","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 19:44:41"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 19:44:41"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7863,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","type":"message"}
{"hasClients":false,"level":"info","message":"WebSocket não disponível","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7863,"service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7863,"results":{"expo":false,"fcm":false,"web":false,"websocket":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-07-31 19:44:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7863,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:44:53","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:45:11","type":"user","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:45:12","type":"user","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:49:19","type":"user","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:49:24","type":"user","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 19:51:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 19:51:48","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:52:14","type":"user","userId":14}
{"fcmTokenLength":45,"fcmTokenStart":"fMEPfelipe","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7864,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","tokenLength":45,"tokenStart":"fMEPfelipe123456789a...","tokenStartsWithFmep":true,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","token":"fMEPfelipe123456789a...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","token":"fMEPfelipe123456789a...","type":"message"}
{"error":"data must only contain string values","level":"error","message":"Erro ao enviar notificação FCM","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","token":"fMEPfelipe123456789a..."}
{"fcmError":"FCM_ERROR","fcmMessage":"data must only contain string values","level":"warn","message":"FCM falhou, tentando fallbacks","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","type":"warn"}
{"hasClients":false,"level":"info","message":"WebSocket não disponível","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7864,"service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7864,"results":{"expo":false,"fcm":false,"web":false,"websocket":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-07-31 19:54:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"data must only contain string values","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7864,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 19:54:14","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:21:39","type":"user","userId":14}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7865,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:22:29","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:29","type":"message"}
{"hasClients":false,"level":"info","message":"WebSocket não disponível","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:29","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:29","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:29","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:30","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7865,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:30","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7865,"results":{"expo":false,"fcm":false,"web":false,"websocket":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-07-31 20:22:30","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7865,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:22:30","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7866,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","type":"message"}
{"hasClients":false,"level":"info","message":"WebSocket não disponível","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7866,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7866,"results":{"expo":false,"fcm":false,"web":false,"websocket":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-07-31 20:22:39","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7866,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:22:39","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 20:22:51","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:22:51","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 20:22:51","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 20:22:52","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:22:53","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:22:53","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"cR3m-Wyu9g5Nf0QPAAAB","timestamp":"2025-07-31 20:22:53","type":"socket"}
{"count":54,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 20:22:53","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:22:53","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"cR3m-Wyu9g5Nf0QPAAAB","timestamp":"2025-07-31 20:22:53","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7867,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7867,"service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7867,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 20:22:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7867,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:22:58","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:25:02","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 20:25:02","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 20:25:02","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 20:25:03","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:25:03","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:25:03","type":"query","userId":14}
{"count":55,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 20:25:04","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:25:04","type":"route","userId":14}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7868,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:25:11","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:11","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:11","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:11","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:11","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:11","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:12","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:12","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:12","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7868,"service":"notifications-app-api","timestamp":"2025-07-31 20:25:12","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7868,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 20:25:12","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7868,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:25:12","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"cR3m-Wyu9g5Nf0QPAAAB","timestamp":"2025-07-31 20:26:26","type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 20:36:25"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 20:36:25"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:36:31","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 20:36:31","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 20:36:31","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 20:36:38","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:36:38","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:36:38","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"1AVI50QxSKhMLVVbAAAB","timestamp":"2025-07-31 20:36:38","type":"socket"}
{"count":56,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 20:36:38","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:36:39","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"1AVI50QxSKhMLVVbAAAB","timestamp":"2025-07-31 20:36:39","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7869,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7869,"service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7869,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 20:36:44","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7869,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:36:44","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"1AVI50QxSKhMLVVbAAAB","timestamp":"2025-07-31 20:39:55","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 20:39:59","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:39:59","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 20:39:59","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 20:40:00","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:40:00","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:40:00","type":"query","userId":14}
{"count":57,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 20:40:01","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"B_9rDx3_vIgE5EINAAAD","timestamp":"2025-07-31 20:40:01","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:40:01","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"B_9rDx3_vIgE5EINAAAD","timestamp":"2025-07-31 20:40:01","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:40:47","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 20:40:47","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 20:40:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 20:40:48","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:40:49","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:40:49","type":"query","userId":14}
{"count":57,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 20:40:49","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:40:49","type":"route","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"B_9rDx3_vIgE5EINAAAD","timestamp":"2025-07-31 20:45:29","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:59:08","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 20:59:08","type":"warn"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:59:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 20:59:12","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 20:59:12","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 20:59:14","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:59:14","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 20:59:14","type":"query","userId":14}
{"count":57,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 20:59:14","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"orC5nG_rEMtvw_iFAAAF","timestamp":"2025-07-31 20:59:14","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 20:59:14","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"orC5nG_rEMtvw_iFAAAF","timestamp":"2025-07-31 20:59:14","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7870,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 21:00:33","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:33","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:33","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:33","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:33","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:33","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:34","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7870,"service":"notifications-app-api","timestamp":"2025-07-31 21:00:34","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7870,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 21:00:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7870,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 21:00:34","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7871,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7871,"service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7871,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 21:01:16","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7871,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 21:01:16","type":"delivery"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"NBXiFyp1xFl0To-bAAAH","timestamp":"2025-07-31 21:08:36","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NBXiFyp1xFl0To-bAAAH","timestamp":"2025-07-31 21:08:38","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"orC5nG_rEMtvw_iFAAAF","timestamp":"2025-07-31 21:09:13","type":"socket"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"XoVq9Qv51WXYwERPAAAJ","timestamp":"2025-07-31 21:13:02","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"XoVq9Qv51WXYwERPAAAJ","timestamp":"2025-07-31 21:13:03","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"NBXiFyp1xFl0To-bAAAH","timestamp":"2025-07-31 21:13:33","type":"socket"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"RYSOmMBdZZe42l8kAAAL","timestamp":"2025-07-31 22:01:24","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"RYSOmMBdZZe42l8kAAAL","timestamp":"2025-07-31 22:01:27","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"XoVq9Qv51WXYwERPAAAJ","timestamp":"2025-07-31 22:01:39","type":"socket"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"kfvz8TYwDVKLAdnoAAAN","timestamp":"2025-07-31 22:04:55","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"kfvz8TYwDVKLAdnoAAAN","timestamp":"2025-07-31 22:04:56","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"RYSOmMBdZZe42l8kAAAL","timestamp":"2025-07-31 22:05:30","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"kfvz8TYwDVKLAdnoAAAN","timestamp":"2025-07-31 22:11:43","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 22:12:57","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:12:57","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 22:12:57","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 22:13:03","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:13:03","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:13:03","type":"query","userId":14}
{"count":59,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 22:13:03","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"qj1zPlI3nphYova8AAAP","timestamp":"2025-07-31 22:13:03","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:13:03","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"qj1zPlI3nphYova8AAAP","timestamp":"2025-07-31 22:13:03","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7872,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:13:19","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:19","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:19","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:19","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:19","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:19","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:20","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:20","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:20","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7872,"service":"notifications-app-api","timestamp":"2025-07-31 22:13:20","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7872,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 22:13:20","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7872,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:13:20","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"qj1zPlI3nphYova8AAAP","timestamp":"2025-07-31 22:22:19","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 22:24:40","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:24:40","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 22:24:40","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 22:24:42","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:24:42","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:24:42","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Lz__Y4j8uhsJkocFAAAR","timestamp":"2025-07-31 22:24:42","type":"socket"}
{"count":60,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 22:24:42","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:24:42","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Lz__Y4j8uhsJkocFAAAR","timestamp":"2025-07-31 22:24:42","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7873,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:25:06","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:06","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:06","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:06","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:06","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:06","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:07","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7873,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:07","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7873,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 22:25:07","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7873,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:25:07","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"Lz__Y4j8uhsJkocFAAAR","timestamp":"2025-07-31 22:25:35","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:25:39","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 22:25:39","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 22:25:39","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 22:25:40","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:25:40","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:25:40","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"gaSMG5e9fyk0uuSaAAAT","timestamp":"2025-07-31 22:25:40","type":"socket"}
{"count":61,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 22:25:40","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:25:41","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"gaSMG5e9fyk0uuSaAAAT","timestamp":"2025-07-31 22:25:41","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7874,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:25:50","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:50","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:50","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:50","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:50","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:50","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:51","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:51","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:51","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7874,"service":"notifications-app-api","timestamp":"2025-07-31 22:25:51","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7874,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 22:25:51","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7874,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:25:51","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"gaSMG5e9fyk0uuSaAAAT","timestamp":"2025-07-31 22:40:57","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 22:41:12","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:41:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 22:41:12","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 22:41:14","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:41:14","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:41:14","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"8JN7_UkGP0nrys6-AAAV","timestamp":"2025-07-31 22:41:14","type":"socket"}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 22:41:14","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:41:14","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"8JN7_UkGP0nrys6-AAAV","timestamp":"2025-07-31 22:41:15","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7875,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:42:22","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:22","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:22","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:22","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:22","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:22","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:23","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:23","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:23","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7875,"service":"notifications-app-api","timestamp":"2025-07-31 22:42:23","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7875,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 22:42:23","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7875,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:42:23","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7876,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:43:13","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:13","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:13","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:13","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:13","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:13","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:14","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7876,"service":"notifications-app-api","timestamp":"2025-07-31 22:43:14","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7876,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-07-31 22:43:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7876,"route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:43:14","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-07-31 22:52:05"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-07-31 22:52:05"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:56:37","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-07-31 22:56:37","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-07-31 22:56:37","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-07-31 22:56:41","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:56:41","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-07-31 22:56:41","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"vWHG4B1gCKBb61ydAAAB","timestamp":"2025-07-31 22:56:41","type":"socket"}
{"count":64,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-07-31 22:56:41","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-07-31 22:56:41","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"vWHG4B1gCKBb61ydAAAB","timestamp":"2025-07-31 22:56:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"vWHG4B1gCKBb61ydAAAB","timestamp":"2025-07-31 23:06:01","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:07:16","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:07:16","type":"warn"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:07:22","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:07:22","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 00:07:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 00:07:24","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:07:24","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:07:24","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Wmw7oV8xfI7IZB5TAAAD","timestamp":"2025-08-01 00:07:24","type":"socket"}
{"count":64,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 00:07:24","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:07:24","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Wmw7oV8xfI7IZB5TAAAD","timestamp":"2025-08-01 00:07:24","totalClients":1,"type":"socket"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7877,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","token":"ExponentPushToken[1H...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","token":"ExponentPushToken[1H...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"warn"}
{"level":"info","message":"Tentando envio Web Push","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7877,"service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7877,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 00:08:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7877,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:08:09","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:16:45"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:16:45"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"w-YXyNAjHoPkgNLcAAAB","timestamp":"2025-08-01 00:16:45","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"w-YXyNAjHoPkgNLcAAAB","timestamp":"2025-08-01 00:16:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:17:54"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:17:54"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"fqvCmg_eTuoolsShAAAB","timestamp":"2025-08-01 00:17:55","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"fqvCmg_eTuoolsShAAAB","timestamp":"2025-08-01 00:17:59","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:18:01"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:18:01"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"IsJ4RtbfPqlnpNyhAAAB","timestamp":"2025-08-01 00:18:03","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IsJ4RtbfPqlnpNyhAAAB","timestamp":"2025-08-01 00:18:06","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:18:12"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:18:12"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"UanswfTEz8gSyVIZAAAB","timestamp":"2025-08-01 00:18:13","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"UanswfTEz8gSyVIZAAAB","timestamp":"2025-08-01 00:18:16","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:18:27"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:18:27"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"j6UYtADrB3wPMFnlAAAB","timestamp":"2025-08-01 00:18:30","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"j6UYtADrB3wPMFnlAAAB","timestamp":"2025-08-01 00:18:33","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:18:42"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:18:42"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"BHSZxyupDxqLyXknAAAB","timestamp":"2025-08-01 00:18:45","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"BHSZxyupDxqLyXknAAAB","timestamp":"2025-08-01 00:18:48","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:18:51"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:18:51"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"wkPgFy1ZkCi1jbezAAAB","timestamp":"2025-08-01 00:18:52","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wkPgFy1ZkCi1jbezAAAB","timestamp":"2025-08-01 00:18:55","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFy9TLhYg3cRKE0N4seZwGInO3e6Z8X8RwzIsmj9B5YURY5o3l5ucsyJTym_tSv7lGZ1HighRdxQ5MPdcRFL_Xi-2SNAnE6j4h-_Qp1cgxtQS5VU6o","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:21:08","webTokenLength":0}
{"fcmToken":"cYmFXBr4T5-TW3hag5wg...","fcmTokenLength":142,"level":"warn","message":"Token FCM inválido recebido","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:21:08","type":"warn"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHW3XSVCZmC8gNXvxa1wPa1RYDx06iD9GAe5rvkeEr5l8sFjxuu7RZeDGGVzJumXpGL7o0t2G_9skufovT0UEgYmoS6m_IYe2KuDS5zqEuS2Cgf8cQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:21:12","webTokenLength":0}
{"fcmToken":"cYmFXBr4T5-TW3hag5wg...","fcmTokenLength":142,"level":"warn","message":"Token FCM inválido recebido","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:21:12","type":"warn"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHW3XSVCZmC8gNXvxa1wPa1RYDx06iD9GAe5rvkeEr5l8sFjxuu7RZeDGGVzJumXpGL7o0t2G_9skufovT0UEgYmoS6m_IYe2KuDS5zqEuS2Cgf8cQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:21:12","webTokenLength":0}
{"fcmToken":"cYmFXBr4T5-TW3hag5wg...","fcmTokenLength":142,"level":"warn","message":"Token FCM inválido recebido","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:21:12","type":"warn"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:21:22"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:21:22"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Pw6HjvGRF2JPxwMvAAAB","timestamp":"2025-08-01 00:21:25","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Pw6HjvGRF2JPxwMvAAAB","timestamp":"2025-08-01 00:21:28","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:27:10"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:27:10"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"JwIf4O5JIUQ2lgtPAAAB","timestamp":"2025-08-01 00:27:12","type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:27:19"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:27:19"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"lgTrSwEn9XR3ItpHAAAB","timestamp":"2025-08-01 00:27:23","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHW3XSVCZmC8gNXvxa1wPa1RYDx06iD9GAe5rvkeEr5l8sFjxuu7RZeDGGVzJumXpGL7o0t2G_9skufovT0UEgYmoS6m_IYe2KuDS5zqEuS2Cgf8cQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:26","webTokenLength":0}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgTrSwEn9XR3ItpHAAAB","timestamp":"2025-08-01 00:27:26","totalClients":1,"type":"socket"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:27:26.921Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:26","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnvcQGCVQNJ1SyjRCtkeborqGK7S8BME4srC3CbtQFOPx4N9kVDNb2cQsJ4wRgT9EWs-mY2pPu-j0YRl7fo8zRPTd2FmNVvJiWoJzqqs5-BGPv5Tg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:29","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnvcQGCVQNJ1SyjRCtkeborqGK7S8BME4srC3CbtQFOPx4N9kVDNb2cQsJ4wRgT9EWs-mY2pPu-j0YRl7fo8zRPTd2FmNVvJiWoJzqqs5-BGPv5Tg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:29","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:27:30.360Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:30","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:27:30.380Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:30","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7878,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"data must only contain string values","level":"error","message":"Erro ao enviar notificação FCM","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"data must only contain string values","level":"warn","message":"FCM falhou, tentando fallbacks","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"warn"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7878,"service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7878,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 00:27:44","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"data must only contain string values","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7878,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:27:44","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:28:36"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:28:36"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"6yoRCj3A2Scm-SCBAAAB","timestamp":"2025-08-01 00:28:37","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"6yoRCj3A2Scm-SCBAAAB","timestamp":"2025-08-01 00:28:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:28:47"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:28:47"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"6O2MsXbWMXt9FAtkAAAB","timestamp":"2025-08-01 00:28:51","type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:28:56"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:28:56"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"7389eVVijveNR-gsAAAB","timestamp":"2025-08-01 00:28:58","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7389eVVijveNR-gsAAAB","timestamp":"2025-08-01 00:29:01","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:29:04"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:29:04"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"4poEZdLPckKNAJ6EAAAB","timestamp":"2025-08-01 00:29:05","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"service":"notifications-app-api","socketId":"4poEZdLPckKNAJ6EAAAB","timestamp":"2025-08-01 00:29:08","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4poEZdLPckKNAJ6EAAAB","timestamp":"2025-08-01 00:29:08","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:29:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:29:12","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 00:29:12","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 00:29:12","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:29:12","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:29:12","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"V_qc4Y_-uJm4Da3kAAAD","timestamp":"2025-08-01 00:29:13","type":"socket"}
{"count":66,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 00:29:13","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:29:13","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"V_qc4Y_-uJm4Da3kAAAD","timestamp":"2025-08-01 00:29:13","totalClients":2,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7879,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:29:20","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7879,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:20","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7879,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7879,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7879,"response":"projects/easy-notifications-post/messages/0:1754018955440626%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:29:21","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7879,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754018955440626%d193f810d193f810","sentAt":"2025-08-01T03:29:21.058Z","success":true},"web":null,"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7879,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:29:21","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7880,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:29:40","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7880,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:40","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7880,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7880,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7880,"response":"projects/easy-notifications-post/messages/0:1754018975436709%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:29:41","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7880,"service":"notifications-app-api","timestamp":"2025-08-01 00:29:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754018975436709%d193f810d193f810","sentAt":"2025-08-01T03:29:41.042Z","success":true},"web":null,"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7880,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:29:41","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7881,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:30:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7881,"service":"notifications-app-api","timestamp":"2025-08-01 00:30:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7881,"service":"notifications-app-api","timestamp":"2025-08-01 00:30:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7881,"service":"notifications-app-api","timestamp":"2025-08-01 00:30:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7881,"response":"projects/easy-notifications-post/messages/0:1754019052372533%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:30:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7881,"service":"notifications-app-api","timestamp":"2025-08-01 00:30:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019052372533%d193f810d193f810","sentAt":"2025-08-01T03:30:57.984Z","success":true},"web":null,"websocket":null},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7881,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:30:57","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:31:36"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:31:36"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Ew9pEuTQlHRyiYuCAAAB","timestamp":"2025-08-01 00:31:37","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Ew9pEuTQlHRyiYuCAAAB","timestamp":"2025-08-01 00:31:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:31:46"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:31:46"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"tehvFTNQcZWtVuooAAAB","timestamp":"2025-08-01 00:31:47","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"tehvFTNQcZWtVuooAAAB","timestamp":"2025-08-01 00:31:50","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:31:53"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:31:53"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"23JqkMhZq1trv6zJAAAB","timestamp":"2025-08-01 00:31:55","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"23JqkMhZq1trv6zJAAAB","timestamp":"2025-08-01 00:31:58","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:32:04"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:32:04"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"4jILzowM2HiBX43-AAAB","timestamp":"2025-08-01 00:32:08","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4jILzowM2HiBX43-AAAB","timestamp":"2025-08-01 00:32:10","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7882,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:32:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7882,"response":"projects/easy-notifications-post/messages/0:1754019129689237%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7882,"service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7882,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:32:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019129689237%d193f810d193f810","sentAt":"2025-08-01T03:32:15.271Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7882,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:32:15","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7883,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7883,"response":"projects/easy-notifications-post/messages/0:1754019269363248%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7883,"service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7883,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:34:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019269363248%d193f810d193f810","sentAt":"2025-08-01T03:34:34.949Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7883,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:34:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7884,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7884,"response":"projects/easy-notifications-post/messages/0:1754019295048550%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7884,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7884,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:35:00","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019295048550%d193f810d193f810","sentAt":"2025-08-01T03:35:00.636Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7884,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:35:00","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7885,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7885,"response":"projects/easy-notifications-post/messages/0:1754019320275520%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7885,"service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7885,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:35:25","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019320275520%d193f810d193f810","sentAt":"2025-08-01T03:35:25.865Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7885,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:35:25","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7886,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7886,"response":"projects/easy-notifications-post/messages/0:1754019473326903%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7886,"service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7886,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:37:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019473326903%d193f810d193f810","sentAt":"2025-08-01T03:37:58.907Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7886,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:37:58","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnvcQGCVQNJ1SyjRCtkeborqGK7S8BME4srC3CbtQFOPx4N9kVDNb2cQsJ4wRgT9EWs-mY2pPu-j0YRl7fo8zRPTd2FmNVvJiWoJzqqs5-BGPv5Tg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:04","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnvcQGCVQNJ1SyjRCtkeborqGK7S8BME4srC3CbtQFOPx4N9kVDNb2cQsJ4wRgT9EWs-mY2pPu-j0YRl7fo8zRPTd2FmNVvJiWoJzqqs5-BGPv5Tg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:04","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:38:04","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:38:04","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 00:38:04","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 00:38:04","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:05.203Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:05.417Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","type":"route","userId":14}
{"count":74,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 00:38:05","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGaiwvy7OjN19tFyhvNohJn3VcU5ep26uYdkA1fB8dwDW-jLk0rVp8tP7bjeV4ntORh0me3pqd9plPT61e3QH9seUOjQlYD-uQh5VVFS3-Xo5ITsIc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGaiwvy7OjN19tFyhvNohJn3VcU5ep26uYdkA1fB8dwDW-jLk0rVp8tP7bjeV4ntORh0me3pqd9plPT61e3QH9seUOjQlYD-uQh5VVFS3-Xo5ITsIc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGaiwvy7OjN19tFyhvNohJn3VcU5ep26uYdkA1fB8dwDW-jLk0rVp8tP7bjeV4ntORh0me3pqd9plPT61e3QH9seUOjQlYD-uQh5VVFS3-Xo5ITsIc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:07","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:08.166Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:08.169Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:08.173Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:08","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7887,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7887,"response":"projects/easy-notifications-post/messages/0:1754019487936587%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7887,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7887,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:38:13","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019487936587%d193f810d193f810","sentAt":"2025-08-01T03:38:13.506Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7887,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:13","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7888,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:26","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:26","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7888,"response":"projects/easy-notifications-post/messages/0:1754019501791365%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7888,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7888,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:38:27","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019501791365%d193f810d193f810","sentAt":"2025-08-01T03:38:27.382Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7888,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:27","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGaiwvy7OjN19tFyhvNohJn3VcU5ep26uYdkA1fB8dwDW-jLk0rVp8tP7bjeV4ntORh0me3pqd9plPT61e3QH9seUOjQlYD-uQh5VVFS3-Xo5ITsIc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:38","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:40.080Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:40","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEZsQNgz-mO7Qu7xkhDfV7NVgyQuzxT_2t01YYt-JChW-LsvRbfxvRWHBmY6wif8pHFksumLA2_XOGrARgJFOjBmqRhH2EiN676A8DgMROw5LaGZEo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:41","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEZsQNgz-mO7Qu7xkhDfV7NVgyQuzxT_2t01YYt-JChW-LsvRbfxvRWHBmY6wif8pHFksumLA2_XOGrARgJFOjBmqRhH2EiN676A8DgMROw5LaGZEo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:41","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:42.618Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:42","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:38:42.832Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:42","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7889,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:43","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:43","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7889,"response":"projects/easy-notifications-post/messages/0:1754019518610565%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7889,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7889,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:38:44","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019518610565%d193f810d193f810","sentAt":"2025-08-01T03:38:44.184Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7889,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:44","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7890,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7890,"response":"projects/easy-notifications-post/messages/0:1754019532604002%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7890,"service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7890,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:38:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019532604002%d193f810d193f810","sentAt":"2025-08-01T03:38:58.198Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7890,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:38:58","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 7886","service":"notifications-app-api","timestamp":"2025-08-01 00:39:09","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-01 00:39:10","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-01 00:39:14","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-01 00:39:14","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com nova hierarquia","messageId":7891,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7891,"response":"projects/easy-notifications-post/messages/0:1754019554196061%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"level":"info","message":"Tentando envio WebSocket","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"message"}
{"clientsCount":1,"level":"info","message":"Notificação enviada via WebSocket","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7891,"service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"warn","webError":"Web Push não implementado"}
{"level":"info","message":"Resumo do envio com nova hierarquia","messageId":7891,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:39:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019554196061%d193f810d193f810","sentAt":"2025-08-01T03:39:19.765Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"success":true}},"level":"info","message":"Mensagem processada com nova hierarquia","messageId":7891,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:19","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEZsQNgz-mO7Qu7xkhDfV7NVgyQuzxT_2t01YYt-JChW-LsvRbfxvRWHBmY6wif8pHFksumLA2_XOGrARgJFOjBmqRhH2EiN676A8DgMROw5LaGZEo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:35","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:39:37.640Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:37","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG2EgiCB8sG73phAYxjo7wSuwG9RYcBLunhQI6DV85lwR76Hf4aB9OJ7OgLtPqkghAwO80pUgaEQHv0t1mQurizqUWaj-Pr1MatBUqOywjOn3ACYh8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:39","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG2EgiCB8sG73phAYxjo7wSuwG9RYcBLunhQI6DV85lwR76Hf4aB9OJ7OgLtPqkghAwO80pUgaEQHv0t1mQurizqUWaj-Pr1MatBUqOywjOn3ACYh8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:39","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:39:39.949Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:39","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:39:40.161Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:40","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG2EgiCB8sG73phAYxjo7wSuwG9RYcBLunhQI6DV85lwR76Hf4aB9OJ7OgLtPqkghAwO80pUgaEQHv0t1mQurizqUWaj-Pr1MatBUqOywjOn3ACYh8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:43","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:39:44.268Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:44","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:39:45","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:39:45","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 00:39:45","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 00:39:46","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:39:46","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:39:46","type":"query","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 00:39:46","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:46","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHq0GPHhatQLuOhAJB37G4iCXMtTF9SMrZ1IQCT1K_zMUAZbDjr7T0Z9p-Eh0q80ra3VNgVaGrFD5aKaZ5Hns9CbLEcsgDplOPlooaHIgGidEZ5av8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:47","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:39:47.500Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:47","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHq0GPHhatQLuOhAJB37G4iCXMtTF9SMrZ1IQCT1K_zMUAZbDjr7T0Z9p-Eh0q80ra3VNgVaGrFD5aKaZ5Hns9CbLEcsgDplOPlooaHIgGidEZ5av8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:48","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:39:48.552Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:39:48","userId":14}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:41:49"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:41:49"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"9W05wKvBuf1f5b9pAAAB","timestamp":"2025-08-01 00:41:50","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"9W05wKvBuf1f5b9pAAAB","timestamp":"2025-08-01 00:41:53","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:42:02"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:42:02"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"a_EO7TCBnY4tu3QKAAAB","timestamp":"2025-08-01 00:42:05","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"a_EO7TCBnY4tu3QKAAAB","timestamp":"2025-08-01 00:42:09","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:42:14"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:42:14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"bmBdQO1QiOj--cFQAAAB","timestamp":"2025-08-01 00:42:18","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"bmBdQO1QiOj--cFQAAAB","timestamp":"2025-08-01 00:42:21","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:42:24"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:42:24"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"dUVYNaOe6Z_SSemJAAAB","timestamp":"2025-08-01 00:42:26","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dUVYNaOe6Z_SSemJAAAB","timestamp":"2025-08-01 00:42:30","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:42:36"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:42:36"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"2-VFZx6x_szjI3lLAAAB","timestamp":"2025-08-01 00:42:37","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"2-VFZx6x_szjI3lLAAAB","timestamp":"2025-08-01 00:42:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:42:52"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:42:53"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:44:02"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:44:02"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 00:44:28"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 00:44:28"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7892,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:44:33","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7892,"service":"notifications-app-api","timestamp":"2025-08-01 00:44:33","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7892,"service":"notifications-app-api","timestamp":"2025-08-01 00:44:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7892,"service":"notifications-app-api","timestamp":"2025-08-01 00:44:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7892,"response":"projects/easy-notifications-post/messages/0:1754019868713943%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7892,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":7892,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7892,"service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7892,"service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7892,"service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7892,"service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7892,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 00:44:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019868713943%d193f810d193f810","sentAt":"2025-08-01T03:44:34.280Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7892,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:44:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7893,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:07","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7893,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:07","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7893,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7893,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7893,"response":"projects/easy-notifications-post/messages/0:1754019902544957%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7893,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":7893,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7893,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7893,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7893,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7893,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7893,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 00:45:08","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019902544957%d193f810d193f810","sentAt":"2025-08-01T03:45:08.113Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7893,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:08","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHq0GPHhatQLuOhAJB37G4iCXMtTF9SMrZ1IQCT1K_zMUAZbDjr7T0Z9p-Eh0q80ra3VNgVaGrFD5aKaZ5Hns9CbLEcsgDplOPlooaHIgGidEZ5av8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHq0GPHhatQLuOhAJB37G4iCXMtTF9SMrZ1IQCT1K_zMUAZbDjr7T0Z9p-Eh0q80ra3VNgVaGrFD5aKaZ5Hns9CbLEcsgDplOPlooaHIgGidEZ5av8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:11","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:11","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:45:11","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:12.379Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:12.802Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:12","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"GMnk76LjdOmQY6KfAAAB","timestamp":"2025-08-01 00:45:12","type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:13","type":"route","userId":14}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 00:45:13","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"GMnk76LjdOmQY6KfAAAB","timestamp":"2025-08-01 00:45:13","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHwtk7iV3CRbzJLdIPM6MaeM1EP49qRWPwcYSePO_ArDaFVdIsZR3DxJPdMFHXv68hCQ5oAUGt3IbyisbPWTNUwodUm8uUfQzpXu99hS6hC-Wkklcs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHwtk7iV3CRbzJLdIPM6MaeM1EP49qRWPwcYSePO_ArDaFVdIsZR3DxJPdMFHXv68hCQ5oAUGt3IbyisbPWTNUwodUm8uUfQzpXu99hS6hC-Wkklcs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:15","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:15.499Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:15.502Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:15","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHwtk7iV3CRbzJLdIPM6MaeM1EP49qRWPwcYSePO_ArDaFVdIsZR3DxJPdMFHXv68hCQ5oAUGt3IbyisbPWTNUwodUm8uUfQzpXu99hS6hC-Wkklcs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:16","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:16.494Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:16","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7894,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7894,"response":"projects/easy-notifications-post/messages/0:1754019912158939%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7894,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7894,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7894,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:45:17","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019912158939%d193f810d193f810","sentAt":"2025-08-01T03:45:17.752Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7894,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:17","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7895,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:22","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:22","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7895,"response":"projects/easy-notifications-post/messages/0:1754019917419213%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:45:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7895,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 00:45:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:23","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:23","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:23","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:23","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7895,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:23","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7895,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:45:23","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019917419213%d193f810d193f810","sentAt":"2025-08-01T03:45:22.999Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7895,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:23","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHwtk7iV3CRbzJLdIPM6MaeM1EP49qRWPwcYSePO_ArDaFVdIsZR3DxJPdMFHXv68hCQ5oAUGt3IbyisbPWTNUwodUm8uUfQzpXu99hS6hC-Wkklcs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:29.948Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:29","userId":14}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 00:45:30","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHwtk7iV3CRbzJLdIPM6MaeM1EP49qRWPwcYSePO_ArDaFVdIsZR3DxJPdMFHXv68hCQ5oAUGt3IbyisbPWTNUwodUm8uUfQzpXu99hS6hC-Wkklcs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:30","webTokenLength":0}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:30","type":"route","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:30.785Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:30","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEVSBNQSMwrQ0pkn1InNNNVdYg3Jqfgt7kqsfTrZPuTyJd97T-jHxnsFSfOfX59b-dKVnyyVAx3LGNvm-1pwpixuL2bG_oN0ws3JEoa01FO0ZY3GOk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:32","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEVSBNQSMwrQ0pkn1InNNNVdYg3Jqfgt7kqsfTrZPuTyJd97T-jHxnsFSfOfX59b-dKVnyyVAx3LGNvm-1pwpixuL2bG_oN0ws3JEoa01FO0ZY3GOk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:32","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEVSBNQSMwrQ0pkn1InNNNVdYg3Jqfgt7kqsfTrZPuTyJd97T-jHxnsFSfOfX59b-dKVnyyVAx3LGNvm-1pwpixuL2bG_oN0ws3JEoa01FO0ZY3GOk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:32","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:33.097Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:33.099Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:33.101Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7896,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7896,"response":"projects/easy-notifications-post/messages/0:1754019928428103%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7896,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7896,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7896,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:45:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019928428103%d193f810d193f810","sentAt":"2025-08-01T03:45:34.006Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7896,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7897,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:38","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:38","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7897,"response":"projects/easy-notifications-post/messages/0:1754019933625509%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7897,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7897,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7897,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 00:45:39","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754019933625509%d193f810d193f810","sentAt":"2025-08-01T03:45:39.203Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7897,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:39","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEVSBNQSMwrQ0pkn1InNNNVdYg3Jqfgt7kqsfTrZPuTyJd97T-jHxnsFSfOfX59b-dKVnyyVAx3LGNvm-1pwpixuL2bG_oN0ws3JEoa01FO0ZY3GOk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEVSBNQSMwrQ0pkn1InNNNVdYg3Jqfgt7kqsfTrZPuTyJd97T-jHxnsFSfOfX59b-dKVnyyVAx3LGNvm-1pwpixuL2bG_oN0ws3JEoa01FO0ZY3GOk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:42.675Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:42.697Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"query","userId":14}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:42","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7898,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":7898,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7898,"service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7898,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 00:45:45","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7898,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHLCXLS-dsFw9pwRTnaL2hLkEOMzMYf6ERu5jBKw7Phu6eZzkPk0RTirWZXDafoPJBpJL-AkquV7e_VikW18ek2q7GYEPmdThuaTEtzxfCSacq3AfE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHLCXLS-dsFw9pwRTnaL2hLkEOMzMYf6ERu5jBKw7Phu6eZzkPk0RTirWZXDafoPJBpJL-AkquV7e_VikW18ek2q7GYEPmdThuaTEtzxfCSacq3AfE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHLCXLS-dsFw9pwRTnaL2hLkEOMzMYf6ERu5jBKw7Phu6eZzkPk0RTirWZXDafoPJBpJL-AkquV7e_VikW18ek2q7GYEPmdThuaTEtzxfCSacq3AfE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:45.986Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:45.990Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:45","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T03:45:46.005Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 00:45:46","userId":14}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-01 09:27:04"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-01 09:27:04"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1oRYYc0bKi3WzWdaiivd15AfeJWSaeBBSLmXg2aaLsmX4tRXi976oVp0B-NMruVupOqHPS-zeuL3ZGb6gZyG1wIFUCmdekzsjzIe2oocrcGUs9lo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:30","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1oRYYc0bKi3WzWdaiivd15AfeJWSaeBBSLmXg2aaLsmX4tRXi976oVp0B-NMruVupOqHPS-zeuL3ZGb6gZyG1wIFUCmdekzsjzIe2oocrcGUs9lo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:30","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1oRYYc0bKi3WzWdaiivd15AfeJWSaeBBSLmXg2aaLsmX4tRXi976oVp0B-NMruVupOqHPS-zeuL3ZGb6gZyG1wIFUCmdekzsjzIe2oocrcGUs9lo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:30","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtMMjim2k6LIBbvx_VU619-K_MvdFyEldftkpEZmtw7EUYXorwUFtT1cmOdKHRZV0158JE9iPK4Ha5PYB7MFGgF8YcMI2I4aoY_SzEyLGrbZel5U0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtMMjim2k6LIBbvx_VU619-K_MvdFyEldftkpEZmtw7EUYXorwUFtT1cmOdKHRZV0158JE9iPK4Ha5PYB7MFGgF8YcMI2I4aoY_SzEyLGrbZel5U0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtMMjim2k6LIBbvx_VU619-K_MvdFyEldftkpEZmtw7EUYXorwUFtT1cmOdKHRZV0158JE9iPK4Ha5PYB7MFGgF8YcMI2I4aoY_SzEyLGrbZel5U0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtMMjim2k6LIBbvx_VU619-K_MvdFyEldftkpEZmtw7EUYXorwUFtT1cmOdKHRZV0158JE9iPK4Ha5PYB7MFGgF8YcMI2I4aoY_SzEyLGrbZel5U0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtMMjim2k6LIBbvx_VU619-K_MvdFyEldftkpEZmtw7EUYXorwUFtT1cmOdKHRZV0158JE9iPK4Ha5PYB7MFGgF8YcMI2I4aoY_SzEyLGrbZel5U0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:34","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.283Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.333Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.343Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.392Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.485Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.500Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.545Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:39:35.555Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:39:35","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtMMjim2k6LIBbvx_VU619-K_MvdFyEldftkpEZmtw7EUYXorwUFtT1cmOdKHRZV0158JE9iPK4Ha5PYB7MFGgF8YcMI2I4aoY_SzEyLGrbZel5U0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:24","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtMMjim2k6LIBbvx_VU619-K_MvdFyEldftkpEZmtw7EUYXorwUFtT1cmOdKHRZV0158JE9iPK4Ha5PYB7MFGgF8YcMI2I4aoY_SzEyLGrbZel5U0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:24","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:40:26.377Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:26","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:40:26.594Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:26","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiDgfTCNnJo9IPtwrmMeXffYYHfkBO3n9N2J7nBJGU82K_pdZOEwDdS4J86-4bXypY7amh_1t0IsOyysFoJO9JxwVZbdAKe_PZoInfQWPrLSuhOq0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiDgfTCNnJo9IPtwrmMeXffYYHfkBO3n9N2J7nBJGU82K_pdZOEwDdS4J86-4bXypY7amh_1t0IsOyysFoJO9JxwVZbdAKe_PZoInfQWPrLSuhOq0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiDgfTCNnJo9IPtwrmMeXffYYHfkBO3n9N2J7nBJGU82K_pdZOEwDdS4J86-4bXypY7amh_1t0IsOyysFoJO9JxwVZbdAKe_PZoInfQWPrLSuhOq0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:27","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:40:28.400Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:40:28.404Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:40:28.405Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:40:28","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 09:41:13","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 09:41:13","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 09:41:13","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 09:41:14","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 09:41:14","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 09:41:14","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"ZifLXK8RjbXwx07LAAAB","timestamp":"2025-08-01 09:41:15","type":"socket"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 09:41:15","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:41:15","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ZifLXK8RjbXwx07LAAAB","timestamp":"2025-08-01 09:41:15","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7899,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:43:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7899,"response":"projects/easy-notifications-post/messages/0:1754052231784169%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7899,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7899,"service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7899,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 09:43:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754052231784169%d193f810d193f810","sentAt":"2025-08-01T12:43:58.507Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7899,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:43:58","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7900,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:05","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:05","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7900,"response":"projects/easy-notifications-post/messages/0:1754052239570388%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7900,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7900,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7900,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 09:44:06","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754052239570388%d193f810d193f810","sentAt":"2025-08-01T12:44:06.334Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7900,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:06","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiDgfTCNnJo9IPtwrmMeXffYYHfkBO3n9N2J7nBJGU82K_pdZOEwDdS4J86-4bXypY7amh_1t0IsOyysFoJO9JxwVZbdAKe_PZoInfQWPrLSuhOq0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:23","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:44:24.902Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:24","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjQyyC6vX7hIZuR6MipxjGabtXYumFCIwtRKN9Lz7GjigNLDlFcnj1kguSFNuLcFWYUO_yEvNKjS46cY2NP9FY9xYb_b8cRIHivB7ZfK5nXLO7hcU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:26","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjQyyC6vX7hIZuR6MipxjGabtXYumFCIwtRKN9Lz7GjigNLDlFcnj1kguSFNuLcFWYUO_yEvNKjS46cY2NP9FY9xYb_b8cRIHivB7ZfK5nXLO7hcU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:26","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7901,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:44:27.522Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","userId":14}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":7901,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7901,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7901,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 09:44:27","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7901,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T12:44:27.746Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:27","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7902,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7902,"response":"projects/easy-notifications-post/messages/0:1754052267863967%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7902,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7902,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7902,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 09:44:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754052267863967%d193f810d193f810","sentAt":"2025-08-01T12:44:34.633Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7902,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7903,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7903,"response":"projects/easy-notifications-post/messages/0:1754052292996757%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7903,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7903,"service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7903,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 09:44:59","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754052292996757%d193f810d193f810","sentAt":"2025-08-01T12:44:59.751Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7903,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:44:59","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"ZifLXK8RjbXwx07LAAAB","timestamp":"2025-08-01 09:59:21","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjQyyC6vX7hIZuR6MipxjGabtXYumFCIwtRKN9Lz7GjigNLDlFcnj1kguSFNuLcFWYUO_yEvNKjS46cY2NP9FY9xYb_b8cRIHivB7ZfK5nXLO7hcU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:59:59","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjQyyC6vX7hIZuR6MipxjGabtXYumFCIwtRKN9Lz7GjigNLDlFcnj1kguSFNuLcFWYUO_yEvNKjS46cY2NP9FY9xYb_b8cRIHivB7ZfK5nXLO7hcU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:59:59","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjQyyC6vX7hIZuR6MipxjGabtXYumFCIwtRKN9Lz7GjigNLDlFcnj1kguSFNuLcFWYUO_yEvNKjS46cY2NP9FY9xYb_b8cRIHivB7ZfK5nXLO7hcU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 09:59:59","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:01.784Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:01","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:01.991Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:01","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:01.993Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:01","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHjLmnElflg5YhwFIy-GTMajcCTITRxe_G-mAju1kR1IgFKG6tA3E8_3aOCe0fbDKu0byjoNyktS4_GWywpy6gSIxA5_FeNIzqgSFwH-VQHqXiArvw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHjLmnElflg5YhwFIy-GTMajcCTITRxe_G-mAju1kR1IgFKG6tA3E8_3aOCe0fbDKu0byjoNyktS4_GWywpy6gSIxA5_FeNIzqgSFwH-VQHqXiArvw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHjLmnElflg5YhwFIy-GTMajcCTITRxe_G-mAju1kR1IgFKG6tA3E8_3aOCe0fbDKu0byjoNyktS4_GWywpy6gSIxA5_FeNIzqgSFwH-VQHqXiArvw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHjLmnElflg5YhwFIy-GTMajcCTITRxe_G-mAju1kR1IgFKG6tA3E8_3aOCe0fbDKu0byjoNyktS4_GWywpy6gSIxA5_FeNIzqgSFwH-VQHqXiArvw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHjLmnElflg5YhwFIy-GTMajcCTITRxe_G-mAju1kR1IgFKG6tA3E8_3aOCe0fbDKu0byjoNyktS4_GWywpy6gSIxA5_FeNIzqgSFwH-VQHqXiArvw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:03.789Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:03.793Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:03.796Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:03.835Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:03.994Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:03","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHjLmnElflg5YhwFIy-GTMajcCTITRxe_G-mAju1kR1IgFKG6tA3E8_3aOCe0fbDKu0byjoNyktS4_GWywpy6gSIxA5_FeNIzqgSFwH-VQHqXiArvw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:56","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHjLmnElflg5YhwFIy-GTMajcCTITRxe_G-mAju1kR1IgFKG6tA3E8_3aOCe0fbDKu0byjoNyktS4_GWywpy6gSIxA5_FeNIzqgSFwH-VQHqXiArvw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:56","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:57.903Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:57","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:00:57.917Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:57","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3lJey-lafxT7pNS5WChghgxnFs5AT0Q2kdSagPGFWYID9HW6cZErblwMy0wlE_P-Cgunt95M6urIneV4zocCMEHMGcS1aBDWRdq2Z3qllEjDd9w4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:59","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3lJey-lafxT7pNS5WChghgxnFs5AT0Q2kdSagPGFWYID9HW6cZErblwMy0wlE_P-Cgunt95M6urIneV4zocCMEHMGcS1aBDWRdq2Z3qllEjDd9w4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:59","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3lJey-lafxT7pNS5WChghgxnFs5AT0Q2kdSagPGFWYID9HW6cZErblwMy0wlE_P-Cgunt95M6urIneV4zocCMEHMGcS1aBDWRdq2Z3qllEjDd9w4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:00:59","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:00","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:01:00.084Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:00","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:00","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:01:00.345Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:00","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:00","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:01:00.396Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:00","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:01:49","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:01:49","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:01:49","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:01:51","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:01:51","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:01:51","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"XgbwArpO48JuK5D2AAAD","timestamp":"2025-08-01 10:01:51","type":"socket"}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:01:51","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:51","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"XgbwArpO48JuK5D2AAAD","timestamp":"2025-08-01 10:01:51","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7905,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7905,"response":"projects/easy-notifications-post/messages/0:1754053312095099%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7905,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7905,"service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7905,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:01:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053312095099%d193f810d193f810","sentAt":"2025-08-01T13:01:58.777Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7905,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:01:58","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7906,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7906,"response":"projects/easy-notifications-post/messages/0:1754053317261841%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7906,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7906,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7906,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:02:03","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053317261841%d193f810d193f810","sentAt":"2025-08-01T13:02:03.952Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7906,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:03","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7907,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7907,"response":"projects/easy-notifications-post/messages/0:1754053324712876%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7907,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7907,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7907,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:02:11","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053324712876%d193f810d193f810","sentAt":"2025-08-01T13:02:11.407Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7907,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:11","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7908,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7908,"response":"projects/easy-notifications-post/messages/0:1754053334761620%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7908,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7908,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7908,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:02:21","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053334761620%d193f810d193f810","sentAt":"2025-08-01T13:02:21.458Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7908,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:21","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3lJey-lafxT7pNS5WChghgxnFs5AT0Q2kdSagPGFWYID9HW6cZErblwMy0wlE_P-Cgunt95M6urIneV4zocCMEHMGcS1aBDWRdq2Z3qllEjDd9w4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:32","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3lJey-lafxT7pNS5WChghgxnFs5AT0Q2kdSagPGFWYID9HW6cZErblwMy0wlE_P-Cgunt95M6urIneV4zocCMEHMGcS1aBDWRdq2Z3qllEjDd9w4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:32","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:02:32","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:02:32","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:02:32","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:02:33.497Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:02:33.500Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","userId":14}
{"count":18,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:33","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHQTFGWoHBAzxOR0tOfASl1VYsoLnMtF4DwQKMXYvh4ePBcugxGUxASFUkSBzAJKJzYYNjj9sxCBLZZpNbi3a-MxFOdWYojiGwshJ87csherZLlTcQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHQTFGWoHBAzxOR0tOfASl1VYsoLnMtF4DwQKMXYvh4ePBcugxGUxASFUkSBzAJKJzYYNjj9sxCBLZZpNbi3a-MxFOdWYojiGwshJ87csherZLlTcQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHQTFGWoHBAzxOR0tOfASl1VYsoLnMtF4DwQKMXYvh4ePBcugxGUxASFUkSBzAJKJzYYNjj9sxCBLZZpNbi3a-MxFOdWYojiGwshJ87csherZLlTcQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:02:35.779Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:02:35.784Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:02:35.786Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:35","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7909,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7909,"response":"projects/easy-notifications-post/messages/0:1754053350263675%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7909,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7909,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7909,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:02:36","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053350263675%d193f810d193f810","sentAt":"2025-08-01T13:02:36.939Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7909,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:36","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7910,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7910,"response":"projects/easy-notifications-post/messages/0:1754053358210085%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7910,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7910,"service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7910,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:02:44","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053358210085%d193f810d193f810","sentAt":"2025-08-01T13:02:44.899Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7910,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:02:44","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7911,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7911,"response":"projects/easy-notifications-post/messages/0:1754053377783162%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7911,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7911,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7911,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:03:04","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053377783162%d193f810d193f810","sentAt":"2025-08-01T13:03:04.492Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7911,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:04","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7912,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7912,"response":"projects/easy-notifications-post/messages/0:1754053397671440%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7912,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7912,"service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7912,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:03:24","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053397671440%d193f810d193f810","sentAt":"2025-08-01T13:03:24.371Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7912,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:24","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHQTFGWoHBAzxOR0tOfASl1VYsoLnMtF4DwQKMXYvh4ePBcugxGUxASFUkSBzAJKJzYYNjj9sxCBLZZpNbi3a-MxFOdWYojiGwshJ87csherZLlTcQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:26","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:03:26.828Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:26","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEcghJb_g1dOUpDxJQsyLeeXYNvgBuWFuyqePKGnAJ409R9CGmFLoDcRn_0IyLxNbjSJ85cyH35tczI9_6JiO5bI-iGSOlTjtxrngy1cNZFDgcgYPY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:29","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEcghJb_g1dOUpDxJQsyLeeXYNvgBuWFuyqePKGnAJ409R9CGmFLoDcRn_0IyLxNbjSJ85cyH35tczI9_6JiO5bI-iGSOlTjtxrngy1cNZFDgcgYPY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:29","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:03:30.168Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:30","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:03:30.403Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:03:30","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEcghJb_g1dOUpDxJQsyLeeXYNvgBuWFuyqePKGnAJ409R9CGmFLoDcRn_0IyLxNbjSJ85cyH35tczI9_6JiO5bI-iGSOlTjtxrngy1cNZFDgcgYPY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:07","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:04:09.204Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:09","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEW0yd2Y1yfpcUbFhcfzjYLmfWu9oYGt2H4nv6BJC-nzKTSzBVi0OzEriEKLChCQdzRwHpgzqop2xwEeiWehGl_ZF7N773KBp-dcpvjUHD0Tf3sycA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:10","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEW0yd2Y1yfpcUbFhcfzjYLmfWu9oYGt2H4nv6BJC-nzKTSzBVi0OzEriEKLChCQdzRwHpgzqop2xwEeiWehGl_ZF7N773KBp-dcpvjUHD0Tf3sycA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:10","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:04:11.469Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:04:11.681Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:04:11","type":"query","userId":14}
{"count":22,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:04:12","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:12","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7913,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7913,"response":"projects/easy-notifications-post/messages/0:1754053452272505%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7913,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7913,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7913,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:04:18","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053452272505%d193f810d193f810","sentAt":"2025-08-01T13:04:18.947Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7913,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:18","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7914,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7914,"response":"projects/easy-notifications-post/messages/0:1754053477069394%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7914,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7914,"service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7914,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:04:43","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754053477069394%d193f810d193f810","sentAt":"2025-08-01T13:04:43.760Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7914,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:04:43","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"XgbwArpO48JuK5D2AAAD","timestamp":"2025-08-01 10:18:18","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:18:22","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:18:22","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:18:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:18:24","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:18:24","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:18:24","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"65huIsbvkQhkV1JgAAAF","timestamp":"2025-08-01 10:18:24","type":"socket"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:18:24","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:24","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"65huIsbvkQhkV1JgAAAF","timestamp":"2025-08-01 10:18:24","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEW0yd2Y1yfpcUbFhcfzjYLmfWu9oYGt2H4nv6BJC-nzKTSzBVi0OzEriEKLChCQdzRwHpgzqop2xwEeiWehGl_ZF7N773KBp-dcpvjUHD0Tf3sycA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:44","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:18:46.300Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:46","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7915,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":7915,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7915,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7915,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 10:18:47","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7915,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGLcHseaelke_r4KlWTAhZU8S0ZpZDKI4ZqdglUtQ1ZMYPjYJqdMKiyNAkaX7uBI6oATCAbc-IT4yTvZn9YCN3MtgdltubAQEsOSui_SU0cdlMLAtw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGLcHseaelke_r4KlWTAhZU8S0ZpZDKI4ZqdglUtQ1ZMYPjYJqdMKiyNAkaX7uBI6oATCAbc-IT4yTvZn9YCN3MtgdltubAQEsOSui_SU0cdlMLAtw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:47","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:18:48.588Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:48","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:18:48.797Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:48","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7916,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7916,"response":"projects/easy-notifications-post/messages/0:1754054329434484%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7916,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7916,"service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7916,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:18:56","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054329434484%d193f810d193f810","sentAt":"2025-08-01T13:18:56.081Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7916,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:18:56","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7917,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7917,"response":"projects/easy-notifications-post/messages/0:1754054335865074%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7917,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7917,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7917,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:19:02","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054335865074%d193f810d193f810","sentAt":"2025-08-01T13:19:02.525Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7917,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:02","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7918,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7918,"response":"projects/easy-notifications-post/messages/0:1754054348508448%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7918,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7918,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7918,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:19:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054348508448%d193f810d193f810","sentAt":"2025-08-01T13:19:15.157Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7918,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:15","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGLcHseaelke_r4KlWTAhZU8S0ZpZDKI4ZqdglUtQ1ZMYPjYJqdMKiyNAkaX7uBI6oATCAbc-IT4yTvZn9YCN3MtgdltubAQEsOSui_SU0cdlMLAtw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGLcHseaelke_r4KlWTAhZU8S0ZpZDKI4ZqdglUtQ1ZMYPjYJqdMKiyNAkaX7uBI6oATCAbc-IT4yTvZn9YCN3MtgdltubAQEsOSui_SU0cdlMLAtw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:19:17","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:18.148Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:18.356Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:18","userId":14}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:19:18","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:18","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEorGMZpnlg1ZJY0Dw0SRTDGMrbESBa6vKFEAcyjLMtEEW5zM0DNDZQZkOXWytR_xI_zSy3-KVoc8YlDqhmp7HxSa8vTfsIP5tsb_ng36WFQTk3uWY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEorGMZpnlg1ZJY0Dw0SRTDGMrbESBa6vKFEAcyjLMtEEW5zM0DNDZQZkOXWytR_xI_zSy3-KVoc8YlDqhmp7HxSa8vTfsIP5tsb_ng36WFQTk3uWY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEorGMZpnlg1ZJY0Dw0SRTDGMrbESBa6vKFEAcyjLMtEEW5zM0DNDZQZkOXWytR_xI_zSy3-KVoc8YlDqhmp7HxSa8vTfsIP5tsb_ng36WFQTk3uWY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:20.917Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:20.922Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:20.926Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:20","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7919,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:21","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:21","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7919,"response":"projects/easy-notifications-post/messages/0:1754054355646204%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7919,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7919,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7919,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:19:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054355646204%d193f810d193f810","sentAt":"2025-08-01T13:19:22.296Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7919,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:22","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7920,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:27","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:27","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7920,"response":"projects/easy-notifications-post/messages/0:1754054361540701%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7920,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7920,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7920,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:19:28","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054361540701%d193f810d193f810","sentAt":"2025-08-01T13:19:28.200Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7920,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:28","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7921,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7921,"response":"projects/easy-notifications-post/messages/0:1754054376067786%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7921,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7921,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7921,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:19:42","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054376067786%d193f810d193f810","sentAt":"2025-08-01T13:19:42.726Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7921,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:42","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEorGMZpnlg1ZJY0Dw0SRTDGMrbESBa6vKFEAcyjLMtEEW5zM0DNDZQZkOXWytR_xI_zSy3-KVoc8YlDqhmp7HxSa8vTfsIP5tsb_ng36WFQTk3uWY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEorGMZpnlg1ZJY0Dw0SRTDGMrbESBa6vKFEAcyjLMtEEW5zM0DNDZQZkOXWytR_xI_zSy3-KVoc8YlDqhmp7HxSa8vTfsIP5tsb_ng36WFQTk3uWY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:44","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:19:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:19:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:19:44","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:45.261Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:45.470Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","userId":14}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:45","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExDNefWP4ZkSgNqrTjoIqYEeKRLWznO8R_137QvSOzEolrKTN_LD5UXHOqXKYkWK6g2Ie0cSS88MbyrQjiVLF1Il3RA1Aax38hGvXE0UxePGA2D6E","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExDNefWP4ZkSgNqrTjoIqYEeKRLWznO8R_137QvSOzEolrKTN_LD5UXHOqXKYkWK6g2Ie0cSS88MbyrQjiVLF1Il3RA1Aax38hGvXE0UxePGA2D6E","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExDNefWP4ZkSgNqrTjoIqYEeKRLWznO8R_137QvSOzEolrKTN_LD5UXHOqXKYkWK6g2Ie0cSS88MbyrQjiVLF1Il3RA1Aax38hGvXE0UxePGA2D6E","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:47.953Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:47.956Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:19:47.963Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:47","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7922,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7922,"response":"projects/easy-notifications-post/messages/0:1754054383181997%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7922,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7922,"service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7922,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:19:49","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054383181997%d193f810d193f810","sentAt":"2025-08-01T13:19:49.840Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7922,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:19:49","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"65huIsbvkQhkV1JgAAAF","timestamp":"2025-08-01 10:20:13","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:20:17","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:20:17","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:20:17","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:20:18","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:20:19","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:20:19","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Y-x7TJEZHfGWqFPGAAAH","timestamp":"2025-08-01 10:20:19","type":"socket"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:20:19","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:20:19","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Y-x7TJEZHfGWqFPGAAAH","timestamp":"2025-08-01 10:20:19","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7923,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7923,"response":"projects/easy-notifications-post/messages/0:1754054417214913%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7923,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7923,"service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7923,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:20:23","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054417214913%d193f810d193f810","sentAt":"2025-08-01T13:20:23.859Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7923,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:20:23","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExDNefWP4ZkSgNqrTjoIqYEeKRLWznO8R_137QvSOzEolrKTN_LD5UXHOqXKYkWK6g2Ie0cSS88MbyrQjiVLF1Il3RA1Aax38hGvXE0UxePGA2D6E","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:24","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExDNefWP4ZkSgNqrTjoIqYEeKRLWznO8R_137QvSOzEolrKTN_LD5UXHOqXKYkWK6g2Ie0cSS88MbyrQjiVLF1Il3RA1Aax38hGvXE0UxePGA2D6E","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:24","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:21:24","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:21:24","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:21:24","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:21:25.534Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:21:25.572Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","type":"query","userId":14}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:25","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFRjUpQ4sLrjB1rOkDyk944rAnLfQ4DKhL87ThHAgLN2XKjM67pE1U2_hOpNDgeVSLlNwcPd6vnA5w2YE5BUiOzHad9o6hUklGIol4BPOxBOJJFmrc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFRjUpQ4sLrjB1rOkDyk944rAnLfQ4DKhL87ThHAgLN2XKjM67pE1U2_hOpNDgeVSLlNwcPd6vnA5w2YE5BUiOzHad9o6hUklGIol4BPOxBOJJFmrc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFRjUpQ4sLrjB1rOkDyk944rAnLfQ4DKhL87ThHAgLN2XKjM67pE1U2_hOpNDgeVSLlNwcPd6vnA5w2YE5BUiOzHad9o6hUklGIol4BPOxBOJJFmrc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:27","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7924,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:21:28.189Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:21:28.251Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:21:28.397Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","userId":14}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":7924,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7924,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7924,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 10:21:28","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7924,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:28","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"Y-x7TJEZHfGWqFPGAAAH","timestamp":"2025-08-01 10:21:32","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:21:36","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:21:36","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:21:36","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:21:36","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:21:37","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:21:37","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"TEKN9riNbLAx01kdAAAJ","timestamp":"2025-08-01 10:21:37","type":"socket"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:21:37","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:37","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"TEKN9riNbLAx01kdAAAJ","timestamp":"2025-08-01 10:21:37","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7925,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:40","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:40","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7925,"response":"projects/easy-notifications-post/messages/0:1754054494569092%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7925,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7925,"service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7925,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:21:41","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054494569092%d193f810d193f810","sentAt":"2025-08-01T13:21:41.215Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7925,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:21:41","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:24:16","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:24:16","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:24:16","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:24:17","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:24:18","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:24:18","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"yYqixx-_CxggsSR8AAAL","timestamp":"2025-08-01 10:24:18","type":"socket"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:24:18","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:24:18","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"yYqixx-_CxggsSR8AAAL","timestamp":"2025-08-01 10:24:18","totalClients":2,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:24:35","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:24:36","type":"query"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:24:36","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:24:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:24:46","type":"query"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:24:47","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:24:57","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:24:57","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:24:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:24:57","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:24:57","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:24:57","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:24:58","type":"route","userId":14}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:24:58","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"TEKN9riNbLAx01kdAAAJ","timestamp":"2025-08-01 10:28:06","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"yYqixx-_CxggsSR8AAAL","timestamp":"2025-08-01 10:28:06","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFRjUpQ4sLrjB1rOkDyk944rAnLfQ4DKhL87ThHAgLN2XKjM67pE1U2_hOpNDgeVSLlNwcPd6vnA5w2YE5BUiOzHad9o6hUklGIol4BPOxBOJJFmrc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:10","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:28:11","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:28:11","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:28:11","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"EtNgoaAjp7grQBEHAAAN","timestamp":"2025-08-01 10:28:11","type":"socket"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:11.789Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:11","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:28:12","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:28:12","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:28:12","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EtNgoaAjp7grQBEHAAAN","timestamp":"2025-08-01 10:28:12","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:12","type":"route","userId":14}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:28:12","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEwy8bGF13MSeULnmWuusvUhZUv7N2fjcza0eXwuJpoZz8-pZw-ym5uE2UlP0iWjNPJ0eLnExztShdwqz2urAyogShbxLrgHM8s5cXue2N_AA77ApU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEwy8bGF13MSeULnmWuusvUhZUv7N2fjcza0eXwuJpoZz8-pZw-ym5uE2UlP0iWjNPJ0eLnExztShdwqz2urAyogShbxLrgHM8s5cXue2N_AA77ApU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:13","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:13.900Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:13","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:13.906Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:13","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7926,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:16","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:16","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7926,"response":"projects/easy-notifications-post/messages/0:1754054890583349%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7926,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7926,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7926,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:28:17","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054890583349%d193f810d193f810","sentAt":"2025-08-01T13:28:17.216Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7926,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:17","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7927,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7927,"response":"projects/easy-notifications-post/messages/0:1754054900158399%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7927,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7927,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7927,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:28:26","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054900158399%d193f810d193f810","sentAt":"2025-08-01T13:28:26.803Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7927,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:26","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEwy8bGF13MSeULnmWuusvUhZUv7N2fjcza0eXwuJpoZz8-pZw-ym5uE2UlP0iWjNPJ0eLnExztShdwqz2urAyogShbxLrgHM8s5cXue2N_AA77ApU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEwy8bGF13MSeULnmWuusvUhZUv7N2fjcza0eXwuJpoZz8-pZw-ym5uE2UlP0iWjNPJ0eLnExztShdwqz2urAyogShbxLrgHM8s5cXue2N_AA77ApU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:28","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:28:28","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:28:28","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:28:28","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:28:29","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:28:29","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:28:29","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:29.630Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:29.841Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:29","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:30","type":"route","userId":14}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:28:30","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9RcpbgkXQcvjnzhkPRFt2v_i0RMuI7ZFfssfnVlyiVr4QjtW_nsBW1PTKJneLjz-Uq9nO2syPuNuM_bz11Wibe9fwS3C6E5HNsz4kZjDyJFTxafw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9RcpbgkXQcvjnzhkPRFt2v_i0RMuI7ZFfssfnVlyiVr4QjtW_nsBW1PTKJneLjz-Uq9nO2syPuNuM_bz11Wibe9fwS3C6E5HNsz4kZjDyJFTxafw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9RcpbgkXQcvjnzhkPRFt2v_i0RMuI7ZFfssfnVlyiVr4QjtW_nsBW1PTKJneLjz-Uq9nO2syPuNuM_bz11Wibe9fwS3C6E5HNsz4kZjDyJFTxafw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:31","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:32.159Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:32","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:32.164Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:32","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:28:32.167Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:32","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7928,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:33","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:33","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7928,"response":"projects/easy-notifications-post/messages/0:1754054907441324%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7928,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7928,"service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7928,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:28:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054907441324%d193f810d193f810","sentAt":"2025-08-01T13:28:34.073Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7928,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:28:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7929,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7929,"response":"projects/easy-notifications-post/messages/0:1754054946882429%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7929,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7929,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7929,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:29:13","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054946882429%d193f810d193f810","sentAt":"2025-08-01T13:29:13.533Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7929,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:13","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9RcpbgkXQcvjnzhkPRFt2v_i0RMuI7ZFfssfnVlyiVr4QjtW_nsBW1PTKJneLjz-Uq9nO2syPuNuM_bz11Wibe9fwS3C6E5HNsz4kZjDyJFTxafw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9RcpbgkXQcvjnzhkPRFt2v_i0RMuI7ZFfssfnVlyiVr4QjtW_nsBW1PTKJneLjz-Uq9nO2syPuNuM_bz11Wibe9fwS3C6E5HNsz4kZjDyJFTxafw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:29:15.854Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:29:16.074Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:16","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:16","type":"route","userId":14}
{"count":39,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:29:16","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGoSN37wum3lzuc7kIpD0srXP1zzuAQfJdo_kW97LSifSx1eM6k_s7zTwLyNHsyYamS8L0Rk7uPrpUz5fdy4K2vXWDEU93KXxit_OysTj275UkH9zE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGoSN37wum3lzuc7kIpD0srXP1zzuAQfJdo_kW97LSifSx1eM6k_s7zTwLyNHsyYamS8L0Rk7uPrpUz5fdy4K2vXWDEU93KXxit_OysTj275UkH9zE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGoSN37wum3lzuc7kIpD0srXP1zzuAQfJdo_kW97LSifSx1eM6k_s7zTwLyNHsyYamS8L0Rk7uPrpUz5fdy4K2vXWDEU93KXxit_OysTj275UkH9zE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:29:18.537Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:29:18.539Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:29:18.545Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:18","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7930,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7930,"response":"projects/easy-notifications-post/messages/0:1754054953836504%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7930,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7930,"service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7930,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:29:20","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754054953836504%d193f810d193f810","sentAt":"2025-08-01T13:29:20.483Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7930,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:29:20","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGoSN37wum3lzuc7kIpD0srXP1zzuAQfJdo_kW97LSifSx1eM6k_s7zTwLyNHsyYamS8L0Rk7uPrpUz5fdy4K2vXWDEU93KXxit_OysTj275UkH9zE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:47","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:49","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:30:49.869Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:49","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:30:50","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:30:50","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:30:50","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"WY4mJKSfGscIRcowAAAP","timestamp":"2025-08-01 10:30:50","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:30:50","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:30:50","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:30:50","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:51","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiSqrBhTITv7yVacf2nEZrNTz43698RM64kswJgcACRP20KKWkGaWEqcasvD2EMvJR8eTkXa9GX_4xfxK5im_8aoWRBi5hs11VgsYmmzP_9YMUs7c","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiSqrBhTITv7yVacf2nEZrNTz43698RM64kswJgcACRP20KKWkGaWEqcasvD2EMvJR8eTkXa9GX_4xfxK5im_8aoWRBi5hs11VgsYmmzP_9YMUs7c","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:51","webTokenLength":0}
{"count":40,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:30:51","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"WY4mJKSfGscIRcowAAAP","timestamp":"2025-08-01 10:30:51","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"WY4mJKSfGscIRcowAAAP","timestamp":"2025-08-01 10:30:51","totalClients":2,"type":"socket"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:52","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:30:52.122Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:52","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:52","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:30:52.327Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:30:52","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:31:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:31:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:31:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:31:07","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"EtNgoaAjp7grQBEHAAAN","timestamp":"2025-08-01 10:31:08","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"WY4mJKSfGscIRcowAAAP","timestamp":"2025-08-01 10:31:08","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiSqrBhTITv7yVacf2nEZrNTz43698RM64kswJgcACRP20KKWkGaWEqcasvD2EMvJR8eTkXa9GX_4xfxK5im_8aoWRBi5hs11VgsYmmzP_9YMUs7c","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiSqrBhTITv7yVacf2nEZrNTz43698RM64kswJgcACRP20KKWkGaWEqcasvD2EMvJR8eTkXa9GX_4xfxK5im_8aoWRBi5hs11VgsYmmzP_9YMUs7c","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiSqrBhTITv7yVacf2nEZrNTz43698RM64kswJgcACRP20KKWkGaWEqcasvD2EMvJR8eTkXa9GX_4xfxK5im_8aoWRBi5hs11VgsYmmzP_9YMUs7c","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiSqrBhTITv7yVacf2nEZrNTz43698RM64kswJgcACRP20KKWkGaWEqcasvD2EMvJR8eTkXa9GX_4xfxK5im_8aoWRBi5hs11VgsYmmzP_9YMUs7c","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEiSqrBhTITv7yVacf2nEZrNTz43698RM64kswJgcACRP20KKWkGaWEqcasvD2EMvJR8eTkXa9GX_4xfxK5im_8aoWRBi5hs11VgsYmmzP_9YMUs7c","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:15","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:17.156Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:17.256Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:17.260Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:17.353Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:17.368Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:17","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:19.512Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:19.515Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:19.516Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:19.718Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:19.722Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:19.726Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:33:19.727Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:33:19","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF1NFr7YGK7pO_Ari1cewgZkIYCdI3CKZavGPkgDXQoG8MoZYgYlCyuusEEToAssFEA4mkjAuJ3Mm7haPMd_OVdEAa2kgNd-fZdkgUBePrsTJk4ShY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:49","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:34:50.737Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:50","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:34:50.744Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:50","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvDUZthlN3QetzlrZ5uM5Rs6R00liIU7setvyYk0Ts12u0qeSTorS5ZMe12ojVq6XOhVI2MRz525uE44Ljbh7eoA8zDnrtH4PhoT1QUeSiEr3e6kQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvDUZthlN3QetzlrZ5uM5Rs6R00liIU7setvyYk0Ts12u0qeSTorS5ZMe12ojVq6XOhVI2MRz525uE44Ljbh7eoA8zDnrtH4PhoT1QUeSiEr3e6kQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvDUZthlN3QetzlrZ5uM5Rs6R00liIU7setvyYk0Ts12u0qeSTorS5ZMe12ojVq6XOhVI2MRz525uE44Ljbh7eoA8zDnrtH4PhoT1QUeSiEr3e6kQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:34:52.593Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:34:52.801Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:34:52.806Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:52","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"query","userId":14}
{"count":40,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:54","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7931,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7931,"service":"notifications-app-api","timestamp":"2025-08-01 10:34:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7931,"service":"notifications-app-api","timestamp":"2025-08-01 10:34:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7931,"service":"notifications-app-api","timestamp":"2025-08-01 10:34:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7931,"response":"projects/easy-notifications-post/messages/0:1754055291407523%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7931,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":7931,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7931,"service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7931,"service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7931,"service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7931,"service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7931,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 10:34:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055291407523%d193f810d193f810","sentAt":"2025-08-01T13:34:58.024Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7931,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:34:58","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvDUZthlN3QetzlrZ5uM5Rs6R00liIU7setvyYk0Ts12u0qeSTorS5ZMe12ojVq6XOhVI2MRz525uE44Ljbh7eoA8zDnrtH4PhoT1QUeSiEr3e6kQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvDUZthlN3QetzlrZ5uM5Rs6R00liIU7setvyYk0Ts12u0qeSTorS5ZMe12ojVq6XOhVI2MRz525uE44Ljbh7eoA8zDnrtH4PhoT1QUeSiEr3e6kQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:08","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:35:09","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:35:09","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:35:09","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"AFa7TCaPXH-3ietUAAAR","timestamp":"2025-08-01 10:35:09","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"AFa7TCaPXH-3ietUAAAR","timestamp":"2025-08-01 10:35:10","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:35:10.494Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:35:10.498Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"AFa7TCaPXH-3ietUAAAR","timestamp":"2025-08-01 10:35:10","totalClients":1,"type":"socket"}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:10","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGOhfqcZQ2DMqyNqypbECBljc6svS_GUFtvdEzoJGlQqGyfTqZXGvEh01aoD3ldcwknSi_46OnENe19tyHRfRocOj_ZyaTskPpkrur3ohEuzwpC57U","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGOhfqcZQ2DMqyNqypbECBljc6svS_GUFtvdEzoJGlQqGyfTqZXGvEh01aoD3ldcwknSi_46OnENe19tyHRfRocOj_ZyaTskPpkrur3ohEuzwpC57U","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGOhfqcZQ2DMqyNqypbECBljc6svS_GUFtvdEzoJGlQqGyfTqZXGvEh01aoD3ldcwknSi_46OnENe19tyHRfRocOj_ZyaTskPpkrur3ohEuzwpC57U","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:11","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:35:12.159Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:35:12.167Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:35:12.168Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:12","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7932,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7932,"response":"projects/easy-notifications-post/messages/0:1754055309232811%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7932,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7932,"service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7932,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:35:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055309232811%d193f810d193f810","sentAt":"2025-08-01T13:35:15.858Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7932,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:35:15","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:35:39","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"AFa7TCaPXH-3ietUAAAR","timestamp":"2025-08-01 10:35:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:35:40","type":"query"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:35:41","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"AFa7TCaPXH-3ietUAAAR","timestamp":"2025-08-01 10:35:50","totalClients":1,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:35:51","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:35:51","type":"query"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:35:52","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:36:05","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"AFa7TCaPXH-3ietUAAAR","timestamp":"2025-08-01 10:36:06","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:36:06","type":"query"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:36:07","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"RagSZObhxQB1PvKeAAAT","timestamp":"2025-08-01 10:36:17","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:36:17","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:36:17","type":"query"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:36:18","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"RagSZObhxQB1PvKeAAAT","timestamp":"2025-08-01 10:36:19","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"1VjFeOumBr7bPz7zAAAV","timestamp":"2025-08-01 10:36:28","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:36:28","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:36:28","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"1VjFeOumBr7bPz7zAAAV","timestamp":"2025-08-01 10:36:29","totalClients":3,"type":"socket"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:36:29","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7933,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:36:39","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:39","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:39","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:39","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7933,"response":"projects/easy-notifications-post/messages/0:1754055393742462%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7933,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":3,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","type":"message"}
{"clientsCount":3,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7933,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7933,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:36:40","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055393742462%d193f810d193f810","sentAt":"2025-08-01T13:36:40.368Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":3,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7933,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:36:40","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":2,"route":"felipe","service":"notifications-app-api","socketId":"AFa7TCaPXH-3ietUAAAR","timestamp":"2025-08-01 10:36:44","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"1VjFeOumBr7bPz7zAAAV","timestamp":"2025-08-01 10:36:44","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"RagSZObhxQB1PvKeAAAT","timestamp":"2025-08-01 10:36:44","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:36:49","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:36:49","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:36:49","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"mZDUF9jLdBlpzAG6AAAX","timestamp":"2025-08-01 10:36:49","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:36:49","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:36:49","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:36:49","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mZDUF9jLdBlpzAG6AAAX","timestamp":"2025-08-01 10:36:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:36:49","type":"route","userId":14}
{"count":43,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:36:50","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mZDUF9jLdBlpzAG6AAAX","timestamp":"2025-08-01 10:36:50","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7934,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7934,"response":"projects/easy-notifications-post/messages/0:1754055406868311%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7934,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7934,"service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7934,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:36:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055406868311%d193f810d193f810","sentAt":"2025-08-01T13:36:53.509Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7934,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:36:53","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:37:20","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mZDUF9jLdBlpzAG6AAAX","timestamp":"2025-08-01 10:37:21","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:37:21","type":"query"}
{"count":44,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:37:22","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7935,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:37:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7935,"response":"projects/easy-notifications-post/messages/0:1754055442463160%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7935,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7935,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7935,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:37:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055442463160%d193f810d193f810","sentAt":"2025-08-01T13:37:29.138Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7935,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:37:29","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7936,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:37:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7936,"response":"projects/easy-notifications-post/messages/0:1754055444351482%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:37:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7936,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7936,"service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7936,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:37:31","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055444351482%d193f810d193f810","sentAt":"2025-08-01T13:37:31.000Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7936,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:37:31","type":"delivery"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mZDUF9jLdBlpzAG6AAAX","timestamp":"2025-08-01 10:37:33","totalClients":1,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:37:33","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:37:33","type":"query"}
{"count":46,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:37:34","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:37:51","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mZDUF9jLdBlpzAG6AAAX","timestamp":"2025-08-01 10:37:51","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:37:52","type":"query"}
{"count":46,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:37:52","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"YMQ-ZH41qULfaYc5AAAZ","timestamp":"2025-08-01 10:38:05","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:38:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:38:06","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"YMQ-ZH41qULfaYc5AAAZ","timestamp":"2025-08-01 10:38:07","totalClients":2,"type":"socket"}
{"count":46,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:38:07","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"YMQ-ZH41qULfaYc5AAAZ","timestamp":"2025-08-01 10:39:11","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"mZDUF9jLdBlpzAG6AAAX","timestamp":"2025-08-01 10:39:11","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:39:15","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:39:15","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"WdIl9gCB8BUuxiccAAAb","timestamp":"2025-08-01 10:39:15","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:39:15","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:39:16","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:39:17","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:39:17","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"WdIl9gCB8BUuxiccAAAb","timestamp":"2025-08-01 10:39:17","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"WdIl9gCB8BUuxiccAAAb","timestamp":"2025-08-01 10:39:17","totalClients":1,"type":"socket"}
{"count":46,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:39:17","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:39:17","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7937,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7937,"response":"projects/easy-notifications-post/messages/0:1754055553220363%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7937,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7937,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7937,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:39:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055553220363%d193f810d193f810","sentAt":"2025-08-01T13:39:19.828Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7937,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:39:19","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7938,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:39:26","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:26","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7938,"response":"projects/easy-notifications-post/messages/0:1754055560488214%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7938,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7938,"service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7938,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:39:27","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055560488214%d193f810d193f810","sentAt":"2025-08-01T13:39:27.109Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7938,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:39:27","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7939,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7939,"response":"projects/easy-notifications-post/messages/0:1754055604552851%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7939,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7939,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7939,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:40:11","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055604552851%d193f810d193f810","sentAt":"2025-08-01T13:40:11.175Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7939,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:11","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGOhfqcZQ2DMqyNqypbECBljc6svS_GUFtvdEzoJGlQqGyfTqZXGvEh01aoD3ldcwknSi_46OnENe19tyHRfRocOj_ZyaTskPpkrur3ohEuzwpC57U","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:36","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:40:37.664Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:37","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEr9VNM0dQ7ALZoqr-L0PvV_vbzs7PF40872DR1ppTDL7QyleMbCYHzj6fZL6hhgCJYA1SLKJSlV9FrmfkL1xM9VOlTTrTXpPBvc1DcDL-Z9Ed5Aes","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:39","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEr9VNM0dQ7ALZoqr-L0PvV_vbzs7PF40872DR1ppTDL7QyleMbCYHzj6fZL6hhgCJYA1SLKJSlV9FrmfkL1xM9VOlTTrTXpPBvc1DcDL-Z9Ed5Aes","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:39","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:40:39.945Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:39","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:40:40.153Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:40","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"WdIl9gCB8BUuxiccAAAb","timestamp":"2025-08-01 10:40:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"route","userId":14}
{"count":49,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:40:42","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7940,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:52","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:52","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7940,"response":"projects/easy-notifications-post/messages/0:1754055646420244%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7940,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7940,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7940,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:40:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055646420244%d193f810d193f810","sentAt":"2025-08-01T13:40:53.054Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7940,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:53","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7941,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7941,"response":"projects/easy-notifications-post/messages/0:1754055651861831%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7941,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7941,"service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7941,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:40:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055651861831%d193f810d193f810","sentAt":"2025-08-01T13:40:58.499Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7941,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:40:58","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"WdIl9gCB8BUuxiccAAAb","timestamp":"2025-08-01 10:41:01","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:41:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:41:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:41:05","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"MGp43Eak1wK-1wiFAAAd","timestamp":"2025-08-01 10:41:05","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:41:06","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:41:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:41:06","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"MGp43Eak1wK-1wiFAAAd","timestamp":"2025-08-01 10:41:06","totalClients":1,"type":"socket"}
{"count":51,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:41:06","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:41:06","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"MGp43Eak1wK-1wiFAAAd","timestamp":"2025-08-01 10:41:07","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7942,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:41:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7942,"response":"projects/easy-notifications-post/messages/0:1754055662641075%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7942,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7942,"service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7942,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:41:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055662641075%d193f810d193f810","sentAt":"2025-08-01T13:41:09.270Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7942,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:41:09","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:41:48","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"MGp43Eak1wK-1wiFAAAd","timestamp":"2025-08-01 10:41:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:41:49","type":"query"}
{"count":52,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:41:49","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"E7FkxjgIiMbNwu28AAAf","timestamp":"2025-08-01 10:42:03","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:42:03","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:42:05","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"E7FkxjgIiMbNwu28AAAf","timestamp":"2025-08-01 10:42:05","totalClients":2,"type":"socket"}
{"count":52,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:42:06","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"E7FkxjgIiMbNwu28AAAf","timestamp":"2025-08-01 10:43:00","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"MGp43Eak1wK-1wiFAAAd","timestamp":"2025-08-01 10:43:00","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:43:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:43:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:43:05","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"QAOjT4Qx1sEXle_OAAAh","timestamp":"2025-08-01 10:43:05","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:43:06","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:43:07","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:43:07","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"QAOjT4Qx1sEXle_OAAAh","timestamp":"2025-08-01 10:43:07","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:07","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"QAOjT4Qx1sEXle_OAAAh","timestamp":"2025-08-01 10:43:07","totalClients":1,"type":"socket"}
{"count":52,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:43:07","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7943,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:21","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:21","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7943,"response":"projects/easy-notifications-post/messages/0:1754055795611166%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7943,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7943,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7943,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:43:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055795611166%d193f810d193f810","sentAt":"2025-08-01T13:43:22.238Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7943,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:22","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7944,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7944,"response":"projects/easy-notifications-post/messages/0:1754055803933847%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7944,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7944,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7944,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:43:30","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055803933847%d193f810d193f810","sentAt":"2025-08-01T13:43:30.562Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7944,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:30","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEr9VNM0dQ7ALZoqr-L0PvV_vbzs7PF40872DR1ppTDL7QyleMbCYHzj6fZL6hhgCJYA1SLKJSlV9FrmfkL1xM9VOlTTrTXpPBvc1DcDL-Z9Ed5Aes","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:32","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEr9VNM0dQ7ALZoqr-L0PvV_vbzs7PF40872DR1ppTDL7QyleMbCYHzj6fZL6hhgCJYA1SLKJSlV9FrmfkL1xM9VOlTTrTXpPBvc1DcDL-Z9Ed5Aes","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:32","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:43:32","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:43:32","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:43:32","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:43:33.045Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:43:33.468Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"QAOjT4Qx1sEXle_OAAAh","timestamp":"2025-08-01 10:43:33","totalClients":1,"type":"socket"}
{"count":54,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:43:33","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:43:35.916Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:43:35.918Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:43:35.919Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7945,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":7945,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7945,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7945,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 10:43:36","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7945,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:36","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7946,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7946,"response":"projects/easy-notifications-post/messages/0:1754055815191028%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7946,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7946,"service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7946,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:43:41","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055815191028%d193f810d193f810","sentAt":"2025-08-01T13:43:41.819Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7946,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:43:41","type":"delivery"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"msbPXAcwS3CebejhAAAj","timestamp":"2025-08-01 10:44:20","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:44:20","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:44:22","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"msbPXAcwS3CebejhAAAj","timestamp":"2025-08-01 10:44:22","totalClients":2,"type":"socket"}
{"count":56,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:44:22","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:44:39","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:44:39","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:44:39","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"CDR7_4O8MhwiGS86AAAl","timestamp":"2025-08-01 10:44:39","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:44:41","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"CDR7_4O8MhwiGS86AAAl","timestamp":"2025-08-01 10:44:41","totalClients":3,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:44:41","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:44:41","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"CDR7_4O8MhwiGS86AAAl","timestamp":"2025-08-01 10:44:41","totalClients":3,"type":"socket"}
{"count":56,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:44:41","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:44:41","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7947,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7947,"response":"projects/easy-notifications-post/messages/0:1754055882206456%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7947,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":3,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","type":"message"}
{"clientsCount":3,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:48","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:49","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7947,"service":"notifications-app-api","timestamp":"2025-08-01 10:44:49","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7947,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:44:49","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754055882206456%d193f810d193f810","sentAt":"2025-08-01T13:44:48.851Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":3,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7947,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:44:49","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:07","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:45:07","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:45:08","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"ttljmtbREUA6cL-EAAAn","timestamp":"2025-08-01 10:45:08","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:45:09","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:09","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:09","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ttljmtbREUA6cL-EAAAn","timestamp":"2025-08-01 10:45:09","totalClients":4,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ttljmtbREUA6cL-EAAAn","timestamp":"2025-08-01 10:45:09","totalClients":4,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:45:09","type":"route","userId":14}
{"count":57,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:45:10","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:25","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:45:25","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:45:26","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"L_BfE9PYNil7d8unAAAp","timestamp":"2025-08-01 10:45:26","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:45:27","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:27","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:27","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"L_BfE9PYNil7d8unAAAp","timestamp":"2025-08-01 10:45:27","totalClients":5,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:45:27","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"L_BfE9PYNil7d8unAAAp","timestamp":"2025-08-01 10:45:27","totalClients":5,"type":"socket"}
{"count":57,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:45:27","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:35","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:45:35","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:45:35","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"CnZJNMkCytFZ8_wRAAAr","timestamp":"2025-08-01 10:45:35","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:45:35","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:35","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:45:35","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"CnZJNMkCytFZ8_wRAAAr","timestamp":"2025-08-01 10:45:35","totalClients":6,"type":"socket"}
{"count":57,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:45:36","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:45:36","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"CnZJNMkCytFZ8_wRAAAr","timestamp":"2025-08-01 10:45:36","totalClients":6,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:46:14","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:46:14","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"HfUkyCgvcygWOQulAAAt","timestamp":"2025-08-01 10:46:14","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:46:14","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:46:15","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"HfUkyCgvcygWOQulAAAt","timestamp":"2025-08-01 10:46:15","totalClients":7,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":6,"route":"felipe","service":"notifications-app-api","socketId":"L_BfE9PYNil7d8unAAAp","timestamp":"2025-08-01 10:46:16","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":5,"route":"felipe","service":"notifications-app-api","socketId":"HfUkyCgvcygWOQulAAAt","timestamp":"2025-08-01 10:46:16","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":4,"route":"felipe","service":"notifications-app-api","socketId":"ttljmtbREUA6cL-EAAAn","timestamp":"2025-08-01 10:46:16","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":3,"route":"felipe","service":"notifications-app-api","socketId":"CnZJNMkCytFZ8_wRAAAr","timestamp":"2025-08-01 10:46:16","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":2,"route":"felipe","service":"notifications-app-api","socketId":"CDR7_4O8MhwiGS86AAAl","timestamp":"2025-08-01 10:46:16","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"QAOjT4Qx1sEXle_OAAAh","timestamp":"2025-08-01 10:46:16","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"msbPXAcwS3CebejhAAAj","timestamp":"2025-08-01 10:46:16","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEJYYMKPsG-mu7JJMtWwJpm0OGkMux5rrJOF_m8vLBYM3w4J7tI2aT6ogOB3Xobw1GFRpnydCmzU7vkDzAgjo5Uzk5lXGSPfjmXseKx8f7u6xhiAOo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:28","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:29.597Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:29.719Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:29.729Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:29.782Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:29.825Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:29","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:31.793Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:31.803Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:31.815Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:31.988Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:31.993Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:32.003Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:32","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:47:32.013Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:32","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:47:33","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:47:33","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:47:33","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:47:33","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:47:33","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:47:33","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:34","type":"route","userId":14}
{"count":57,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:47:34","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7948,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:36","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7948,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:36","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7948,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7948,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7948,"response":"projects/easy-notifications-post/messages/0:1754056050728058%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7948,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":7948,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7948,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7948,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7948,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7948,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7948,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-01 10:47:37","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056050728058%d193f810d193f810","sentAt":"2025-08-01T13:47:37.360Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7948,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:37","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:47:46","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:47:46","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:47:46","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"4gdAko_2XexkGXE-AAAv","timestamp":"2025-08-01 10:47:46","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:47:47","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:47:47","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:47:47","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4gdAko_2XexkGXE-AAAv","timestamp":"2025-08-01 10:47:47","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4gdAko_2XexkGXE-AAAv","timestamp":"2025-08-01 10:47:47","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:47","type":"route","userId":14}
{"count":58,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:47:47","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7949,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:52","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:52","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7949,"response":"projects/easy-notifications-post/messages/0:1754056066724610%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7949,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7949,"service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7949,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:47:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056066724610%d193f810d193f810","sentAt":"2025-08-01T13:47:53.341Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7949,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:47:53","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7950,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7950,"response":"projects/easy-notifications-post/messages/0:1754056075833720%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7950,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7950,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7950,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:48:02","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056075833720%d193f810d193f810","sentAt":"2025-08-01T13:48:02.452Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7950,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:02","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:04","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFbv5zF72FykQVqLjTCED0TdYS1W1fpGnmr4SucoXcfLO8cgvUfQmBJO9teTH34nPMrRAxjKTeeCcCdeIbaciZpeLsSrTglr5fOu4S5dTRwXwBGGq8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:04","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:48:04","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:48:04","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:48:04","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:48:04.977Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:04","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:48:05.190Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:05","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:48:05","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:48:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:48:05","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4gdAko_2XexkGXE-AAAv","timestamp":"2025-08-01 10:48:05","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:05","type":"route","userId":14}
{"count":60,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:48:05","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6F5NTa3rbv-0wa3IBEOgjH0gfWJbqft8uXpJSvXfXPmoL8VKCTwvhsO69pbvL6eVF6ZfzlWad4y_Dff5PAJZsLV2TWj7TcGPl_erUUC__CpwCAho","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6F5NTa3rbv-0wa3IBEOgjH0gfWJbqft8uXpJSvXfXPmoL8VKCTwvhsO69pbvL6eVF6ZfzlWad4y_Dff5PAJZsLV2TWj7TcGPl_erUUC__CpwCAho","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6F5NTa3rbv-0wa3IBEOgjH0gfWJbqft8uXpJSvXfXPmoL8VKCTwvhsO69pbvL6eVF6ZfzlWad4y_Dff5PAJZsLV2TWj7TcGPl_erUUC__CpwCAho","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:07","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:48:08.060Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:48:08.063Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:48:08.066Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7951,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7951,"response":"projects/easy-notifications-post/messages/0:1754056082367031%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:48:08","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7951,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7951,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7951,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:48:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056082367031%d193f810d193f810","sentAt":"2025-08-01T13:48:09.021Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7951,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:09","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7952,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:13","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:13","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7952,"response":"projects/easy-notifications-post/messages/0:1754056087631360%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7952,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7952,"service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7952,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:48:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056087631360%d193f810d193f810","sentAt":"2025-08-01T13:48:14.254Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7952,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:48:14","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:49:36","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:49:36","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:49:36","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:49:36","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:49:37","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:49:38","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:49:38","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:49:38","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:49:38","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:49:38","type":"route","userId":14}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:49:38","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:49:53","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:49:54","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:49:55","type":"query"}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:49:55","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:15","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:50:15","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:50:15","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:50:16","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:16","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:16","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:50:17","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:50:17","type":"route","userId":14}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:50:17","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:32","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:50:32","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:50:33","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:50:34","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:34","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:34","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:50:34","totalClients":2,"type":"socket"}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:50:34","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:50:34","type":"route","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:50:43","totalClients":2,"type":"socket"}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:50:43","type":"route","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:01","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:51:01","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:51:01","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:51:02","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:03","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:03","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:51:03","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:03","type":"route","userId":14}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:51:03","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"4gdAko_2XexkGXE-AAAv","timestamp":"2025-08-01 10:51:08","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"SuaU7Xa3aR6Ux0nrAAAx","timestamp":"2025-08-01 10:51:08","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"JhVNeZ7-iV16VfrPAAAz","timestamp":"2025-08-01 10:51:13","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"JhVNeZ7-iV16VfrPAAAz","timestamp":"2025-08-01 10:51:13","totalClients":1,"type":"socket"}
{"count":62,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:13","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"JhVNeZ7-iV16VfrPAAAz","timestamp":"2025-08-01 10:51:14","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7953,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7953,"response":"projects/easy-notifications-post/messages/0:1754056279288794%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7953,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7953,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7953,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:51:25","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056279288794%d193f810d193f810","sentAt":"2025-08-01T13:51:25.926Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7953,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:25","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"JhVNeZ7-iV16VfrPAAAz","timestamp":"2025-08-01 10:51:31","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:35","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:51:35","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:51:35","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"7ok25Eq23SXuGUHYAAA1","timestamp":"2025-08-01 10:51:35","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:51:35","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:35","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:35","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7ok25Eq23SXuGUHYAAA1","timestamp":"2025-08-01 10:51:35","totalClients":1,"type":"socket"}
{"count":63,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:51:35","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:36","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7ok25Eq23SXuGUHYAAA1","timestamp":"2025-08-01 10:51:36","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7954,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7954,"response":"projects/easy-notifications-post/messages/0:1754056293975764%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7954,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7954,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7954,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:51:40","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056293975764%d193f810d193f810","sentAt":"2025-08-01T13:51:40.599Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7954,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:40","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7955,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7955,"response":"projects/easy-notifications-post/messages/0:1754056302247930%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7955,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7955,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7955,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:51:48","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056302247930%d193f810d193f810","sentAt":"2025-08-01T13:51:48.849Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7955,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:48","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6F5NTa3rbv-0wa3IBEOgjH0gfWJbqft8uXpJSvXfXPmoL8VKCTwvhsO69pbvL6eVF6ZfzlWad4y_Dff5PAJZsLV2TWj7TcGPl_erUUC__CpwCAho","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:50","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6F5NTa3rbv-0wa3IBEOgjH0gfWJbqft8uXpJSvXfXPmoL8VKCTwvhsO69pbvL6eVF6ZfzlWad4y_Dff5PAJZsLV2TWj7TcGPl_erUUC__CpwCAho","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:50","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:50","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:51:50","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:51:50","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:51:51.041Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:51:51.249Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7ok25Eq23SXuGUHYAAA1","timestamp":"2025-08-01 10:51:51","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","type":"route","userId":14}
{"count":65,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:51:51","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtO3eljJEN2cZa_elj1STanHg1EcHzNIf5HONmo6uBH4QnivG1p4aCZYjCaQ_HzTsFdxmWbP2k8OIGdCF5giagbc6JnV6_oWaRX-hPttrrM61pgTA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtO3eljJEN2cZa_elj1STanHg1EcHzNIf5HONmo6uBH4QnivG1p4aCZYjCaQ_HzTsFdxmWbP2k8OIGdCF5giagbc6JnV6_oWaRX-hPttrrM61pgTA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtO3eljJEN2cZa_elj1STanHg1EcHzNIf5HONmo6uBH4QnivG1p4aCZYjCaQ_HzTsFdxmWbP2k8OIGdCF5giagbc6JnV6_oWaRX-hPttrrM61pgTA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:51:53.922Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:51:53.928Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T13:51:53.929Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:53","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7956,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7956,"response":"projects/easy-notifications-post/messages/0:1754056308950242%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7956,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7956,"service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7956,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:51:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056308950242%d193f810d193f810","sentAt":"2025-08-01T13:51:55.568Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7956,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:51:55","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7957,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7957,"response":"projects/easy-notifications-post/messages/0:1754056315195181%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7957,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7957,"service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7957,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:52:01","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056315195181%d193f810d193f810","sentAt":"2025-08-01T13:52:01.792Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7957,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:52:01","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:53:06","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:53:06","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"1EgNAd6gS5bCo5mrAAA3","timestamp":"2025-08-01 10:53:07","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:53:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:53:08","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:53:08","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:53:08","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"1EgNAd6gS5bCo5mrAAA3","timestamp":"2025-08-01 10:53:08","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"1EgNAd6gS5bCo5mrAAA3","timestamp":"2025-08-01 10:53:08","totalClients":2,"type":"socket"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:53:08","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:53:08","type":"route","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:53:46","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:53:46","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:53:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:53:48","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:53:48","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:53:48","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"1EgNAd6gS5bCo5mrAAA3","timestamp":"2025-08-01 10:53:48","totalClients":2,"type":"socket"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:53:49","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:53:49","type":"route","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:53:59","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:53:59","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:53:59","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:54:00","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:54:00","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:54:00","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:54:00","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"1EgNAd6gS5bCo5mrAAA3","timestamp":"2025-08-01 10:54:00","totalClients":2,"type":"socket"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:54:00","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"_tPYjU5z_lF3dImzAAA5","timestamp":"2025-08-01 10:54:28","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:54:28","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:54:29","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_tPYjU5z_lF3dImzAAA5","timestamp":"2025-08-01 10:54:29","totalClients":3,"type":"socket"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:54:29","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:54:51","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_tPYjU5z_lF3dImzAAA5","timestamp":"2025-08-01 10:54:52","totalClients":3,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:54:52","type":"query"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:54:52","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":2,"route":"felipe","service":"notifications-app-api","socketId":"_tPYjU5z_lF3dImzAAA5","timestamp":"2025-08-01 10:55:08","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"1EgNAd6gS5bCo5mrAAA3","timestamp":"2025-08-01 10:55:08","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"7ok25Eq23SXuGUHYAAA1","timestamp":"2025-08-01 10:55:08","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:55:13","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:55:13","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:55:13","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"_9WIFW9-bGUU9evHAAA7","timestamp":"2025-08-01 10:55:13","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:55:14","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:55:14","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:55:14","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_9WIFW9-bGUU9evHAAA7","timestamp":"2025-08-01 10:55:14","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:55:14","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_9WIFW9-bGUU9evHAAA7","timestamp":"2025-08-01 10:55:14","totalClients":1,"type":"socket"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:55:14","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:56:57","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_9WIFW9-bGUU9evHAAA7","timestamp":"2025-08-01 10:56:58","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:56:58","type":"query"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:56:59","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_9WIFW9-bGUU9evHAAA7","timestamp":"2025-08-01 10:57:03","totalClients":1,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:57:04","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:57:04","type":"query"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:57:05","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:57:22","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:57:22","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:57:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:57:23","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:57:23","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:57:23","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_9WIFW9-bGUU9evHAAA7","timestamp":"2025-08-01 10:57:24","totalClients":1,"type":"socket"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:57:24","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:57:24","type":"route","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:58:43","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:58:43","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"LmJoPDREe4B3L0tRAAA9","timestamp":"2025-08-01 10:58:43","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:58:43","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:58:44","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:58:44","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:58:44","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"LmJoPDREe4B3L0tRAAA9","timestamp":"2025-08-01 10:58:44","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"LmJoPDREe4B3L0tRAAA9","timestamp":"2025-08-01 10:58:45","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:58:45","type":"route","userId":14}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:58:45","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:58:59","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"LmJoPDREe4B3L0tRAAA9","timestamp":"2025-08-01 10:59:00","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:59:00","type":"query"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:59:01","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:59:25","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"LmJoPDREe4B3L0tRAAA9","timestamp":"2025-08-01 10:59:26","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:59:26","type":"query"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:59:27","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"LmJoPDREe4B3L0tRAAA9","timestamp":"2025-08-01 10:59:42","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"_9WIFW9-bGUU9evHAAA7","timestamp":"2025-08-01 10:59:42","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:59:48","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 10:59:48","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 10:59:48","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"OOYhCgzcve2S5j25AAA_","timestamp":"2025-08-01 10:59:48","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 10:59:50","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:59:50","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 10:59:50","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OOYhCgzcve2S5j25AAA_","timestamp":"2025-08-01 10:59:50","totalClients":1,"type":"socket"}
{"count":67,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 10:59:50","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OOYhCgzcve2S5j25AAA_","timestamp":"2025-08-01 10:59:50","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:59:50","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7958,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:59:52","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:52","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7958,"response":"projects/easy-notifications-post/messages/0:1754056786720885%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7958,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7958,"service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7958,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 10:59:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056786720885%d193f810d193f810","sentAt":"2025-08-01T13:59:53.339Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7958,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 10:59:53","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7959,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7959,"response":"projects/easy-notifications-post/messages/0:1754056796966457%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7959,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7959,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7959,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:00:03","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056796966457%d193f810d193f810","sentAt":"2025-08-01T14:00:03.564Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7959,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:03","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtO3eljJEN2cZa_elj1STanHg1EcHzNIf5HONmo6uBH4QnivG1p4aCZYjCaQ_HzTsFdxmWbP2k8OIGdCF5giagbc6JnV6_oWaRX-hPttrrM61pgTA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFtO3eljJEN2cZa_elj1STanHg1EcHzNIf5HONmo6uBH4QnivG1p4aCZYjCaQ_HzTsFdxmWbP2k8OIGdCF5giagbc6JnV6_oWaRX-hPttrrM61pgTA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:05","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:00:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:00:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:00:06.547Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:00:06.763Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:06","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OOYhCgzcve2S5j25AAA_","timestamp":"2025-08-01 11:00:06","totalClients":1,"type":"socket"}
{"count":69,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:00:07","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH5KE0AcYQKMtmpo6a_bB33kBhAtxI7RSX7BBxER6ETsmAdf40_fItyPQplW1Bdgz9mRcOTU2LvGUM8paDSE-jGpOOQiKvwvPjvTuA4j3EskExIWG0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH5KE0AcYQKMtmpo6a_bB33kBhAtxI7RSX7BBxER6ETsmAdf40_fItyPQplW1Bdgz9mRcOTU2LvGUM8paDSE-jGpOOQiKvwvPjvTuA4j3EskExIWG0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH5KE0AcYQKMtmpo6a_bB33kBhAtxI7RSX7BBxER6ETsmAdf40_fItyPQplW1Bdgz9mRcOTU2LvGUM8paDSE-jGpOOQiKvwvPjvTuA4j3EskExIWG0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:08","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:00:09.188Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:09","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:00:09.197Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:09","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:00:09.206Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:09","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7960,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7960,"response":"projects/easy-notifications-post/messages/0:1754056803859908%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7960,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7960,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7960,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:00:10","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056803859908%d193f810d193f810","sentAt":"2025-08-01T14:00:10.465Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7960,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:10","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7961,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7961,"response":"projects/easy-notifications-post/messages/0:1754056807942481%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7961,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7961,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7961,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:00:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056807942481%d193f810d193f810","sentAt":"2025-08-01T14:00:14.536Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7961,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:14","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7962,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7962,"response":"projects/easy-notifications-post/messages/0:1754056812133805%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7962,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7962,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7962,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:00:18","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056812133805%d193f810d193f810","sentAt":"2025-08-01T14:00:18.726Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7962,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:18","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:25","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:00:25","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"gmkJXW9JkpFepr_QAABB","timestamp":"2025-08-01 11:00:25","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:00:25","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:00:26","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:26","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:26","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"gmkJXW9JkpFepr_QAABB","timestamp":"2025-08-01 11:00:26","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:26","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"gmkJXW9JkpFepr_QAABB","timestamp":"2025-08-01 11:00:26","totalClients":2,"type":"socket"}
{"count":72,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:00:27","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:27","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:00:27","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:00:28","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:00:28","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:28","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:28","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"gmkJXW9JkpFepr_QAABB","timestamp":"2025-08-01 11:00:28","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:28","type":"route","userId":14}
{"count":72,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:00:28","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7963,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:31","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:31","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:31","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7963,"response":"projects/easy-notifications-post/messages/0:1754056825834286%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7963,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7963,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7963,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:00:32","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056825834286%d193f810d193f810","sentAt":"2025-08-01T14:00:32.444Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7963,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:32","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"OOYhCgzcve2S5j25AAA_","timestamp":"2025-08-01 11:00:40","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"gmkJXW9JkpFepr_QAABB","timestamp":"2025-08-01 11:00:40","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:45","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:00:45","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:00:45","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"NgQCCwspFDlFIj3NAABD","timestamp":"2025-08-01 11:00:45","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:00:46","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:46","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:46","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NgQCCwspFDlFIj3NAABD","timestamp":"2025-08-01 11:00:46","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NgQCCwspFDlFIj3NAABD","timestamp":"2025-08-01 11:00:46","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:46","type":"route","userId":14}
{"count":73,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:00:46","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7964,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:49","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:49","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7964,"response":"projects/easy-notifications-post/messages/0:1754056843447270%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7964,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7964,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7964,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:00:50","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056843447270%d193f810d193f810","sentAt":"2025-08-01T14:00:50.051Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7964,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:50","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:52","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:00:52","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:00:52","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:00:52","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:53","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:00:53","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NgQCCwspFDlFIj3NAABD","timestamp":"2025-08-01 11:00:53","totalClients":1,"type":"socket"}
{"count":74,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:00:53","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:53","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7965,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:56","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:56","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7965,"response":"projects/easy-notifications-post/messages/0:1754056850702054%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7965,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7965,"service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7965,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:00:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056850702054%d193f810d193f810","sentAt":"2025-08-01T14:00:57.298Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7965,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:00:57","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:01:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:01:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:01:05","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:05","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NgQCCwspFDlFIj3NAABD","timestamp":"2025-08-01 11:01:05","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:06","type":"route","userId":14}
{"count":75,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:01:06","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:16","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:01:16","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:01:17","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:01:18","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:18","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:18","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NgQCCwspFDlFIj3NAABD","timestamp":"2025-08-01 11:01:18","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:19","type":"route","userId":14}
{"count":75,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:01:19","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7966,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7966,"response":"projects/easy-notifications-post/messages/0:1754056877443862%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7966,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7966,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7966,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:01:24","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056877443862%d193f810d193f810","sentAt":"2025-08-01T14:01:24.044Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7966,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:24","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7967,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7967,"response":"projects/easy-notifications-post/messages/0:1754056890167544%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7967,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7967,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7967,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:01:36","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056890167544%d193f810d193f810","sentAt":"2025-08-01T14:01:36.769Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7967,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:36","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"NgQCCwspFDlFIj3NAABD","timestamp":"2025-08-01 11:01:39","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"T1BUM6dLZSMcAYJ9AABF","timestamp":"2025-08-01 11:01:44","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"T1BUM6dLZSMcAYJ9AABF","timestamp":"2025-08-01 11:01:44","totalClients":1,"type":"socket"}
{"count":77,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:44","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"T1BUM6dLZSMcAYJ9AABF","timestamp":"2025-08-01 11:01:45","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7968,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:47","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:47","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7968,"response":"projects/easy-notifications-post/messages/0:1754056901552516%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7968,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7968,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7968,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:01:48","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056901552516%d193f810d193f810","sentAt":"2025-08-01T14:01:48.162Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7968,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:48","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7969,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7969,"response":"projects/easy-notifications-post/messages/0:1754056906810176%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7969,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7969,"service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7969,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:01:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056906810176%d193f810d193f810","sentAt":"2025-08-01T14:01:53.408Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7969,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:01:53","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7970,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:09","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:09","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7970,"response":"projects/easy-notifications-post/messages/0:1754056923662779%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7970,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7970,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7970,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:02:10","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056923662779%d193f810d193f810","sentAt":"2025-08-01T14:02:10.261Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7970,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:10","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7971,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7971,"response":"projects/easy-notifications-post/messages/0:1754056929373354%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7971,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7971,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7971,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:02:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056929373354%d193f810d193f810","sentAt":"2025-08-01T14:02:15.965Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7971,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:15","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7972,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7972,"response":"projects/easy-notifications-post/messages/0:1754056935830975%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7972,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7972,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7972,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:02:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056935830975%d193f810d193f810","sentAt":"2025-08-01T14:02:22.426Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7972,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:22","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH5KE0AcYQKMtmpo6a_bB33kBhAtxI7RSX7BBxER6ETsmAdf40_fItyPQplW1Bdgz9mRcOTU2LvGUM8paDSE-jGpOOQiKvwvPjvTuA4j3EskExIWG0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH5KE0AcYQKMtmpo6a_bB33kBhAtxI7RSX7BBxER6ETsmAdf40_fItyPQplW1Bdgz9mRcOTU2LvGUM8paDSE-jGpOOQiKvwvPjvTuA4j3EskExIWG0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:02:24.744Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-01 11:02:24","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:02:25","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-01 11:02:25","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:02:25.168Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:25","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"T1BUM6dLZSMcAYJ9AABF","timestamp":"2025-08-01 11:02:25","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:25","type":"route","userId":14}
{"count":82,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-01 11:02:25","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH09XtQAvPPiV59zwNJt6sBCtvS4DkxgKcgdeVU2KieTUryd9J5CgqLnvvc77WmjAbLoQvAHIr7va78Wjrbhpf3YBNEKpmHiWhx3aO1wG_RsaTGHqk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH09XtQAvPPiV59zwNJt6sBCtvS4DkxgKcgdeVU2KieTUryd9J5CgqLnvvc77WmjAbLoQvAHIr7va78Wjrbhpf3YBNEKpmHiWhx3aO1wG_RsaTGHqk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH09XtQAvPPiV59zwNJt6sBCtvS4DkxgKcgdeVU2KieTUryd9J5CgqLnvvc77WmjAbLoQvAHIr7va78Wjrbhpf3YBNEKpmHiWhx3aO1wG_RsaTGHqk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:27","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:02:28.062Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:02:28.072Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-01T14:02:28.210Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7973,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7973,"response":"projects/easy-notifications-post/messages/0:1754056942368965%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7973,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7973,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7973,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:02:28","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056942368965%d193f810d193f810","sentAt":"2025-08-01T14:02:28.958Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7973,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:28","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7974,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7974,"response":"projects/easy-notifications-post/messages/0:1754056967849599%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7974,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7974,"service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7974,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-01 11:02:54","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754056967849599%d193f810d193f810","sentAt":"2025-08-01T14:02:54.448Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7974,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-01 11:02:54","type":"delivery"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-03 21:21:22"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-03 21:21:22"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEeCGT3DxN9-mXpI0LlLL1fc6wZplg1ZeDsv27UwhSK3y3m7si0o8GP5EoRw6GbDwA5Fq-OxBN0d-4eLPOYclsaFTdx4fCvp27r7P2nnSRQpEUU6uc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:22:46","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEeCGT3DxN9-mXpI0LlLL1fc6wZplg1ZeDsv27UwhSK3y3m7si0o8GP5EoRw6GbDwA5Fq-OxBN0d-4eLPOYclsaFTdx4fCvp27r7P2nnSRQpEUU6uc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:22:46","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:22:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:22:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:22:49","webTokenLength":0}
{"body":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEeCGT3DxN9-mXpI0LlLL1fc6wZplg1ZeDsv27UwhSK3y3m7si0o8GP5EoRw6GbDwA5Fq-OxBN0d-4eLPOYclsaFTdx4fCvp27r7P2nnSRQpEUU6uc","platform":"android","route":"felipe"},"error":"getaddrinfo ENOTFOUND autorack.proxy.rlwy.net","level":"error","message":"Erro ao atualizar tokens","route":"felipe","service":"notifications-app-api","stack":"SequelizeHostNotFoundError: getaddrinfo ENOTFOUND autorack.proxy.rlwy.net\n    at Client._connectionCallback (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\sequelize\\lib\\dialects\\postgres\\connection-manager.js:136:24)\n    at Client._handleErrorWhileConnecting (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:326:19)\n    at Client._handleErrorEvent (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:336:19)\n    at Connection.emit (node:events:518:28)\n    at Socket.reportStreamError (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\connection.js:57:12)\n    at Socket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-03 21:22:57"}
{"body":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEeCGT3DxN9-mXpI0LlLL1fc6wZplg1ZeDsv27UwhSK3y3m7si0o8GP5EoRw6GbDwA5Fq-OxBN0d-4eLPOYclsaFTdx4fCvp27r7P2nnSRQpEUU6uc","platform":"android","route":"felipe"},"error":"getaddrinfo ENOTFOUND autorack.proxy.rlwy.net","level":"error","message":"Erro ao atualizar tokens","route":"felipe","service":"notifications-app-api","stack":"SequelizeHostNotFoundError: getaddrinfo ENOTFOUND autorack.proxy.rlwy.net\n    at Client._connectionCallback (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\sequelize\\lib\\dialects\\postgres\\connection-manager.js:136:24)\n    at Client._handleErrorWhileConnecting (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:326:19)\n    at Client._handleErrorEvent (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:336:19)\n    at Connection.emit (node:events:518:28)\n    at Socket.reportStreamError (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\connection.js:57:12)\n    at Socket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-03 21:22:57"}
{"body":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"error":"getaddrinfo ENOTFOUND autorack.proxy.rlwy.net","level":"error","message":"Erro ao atualizar tokens","route":"felipe","service":"notifications-app-api","stack":"SequelizeHostNotFoundError: getaddrinfo ENOTFOUND autorack.proxy.rlwy.net\n    at Client._connectionCallback (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\sequelize\\lib\\dialects\\postgres\\connection-manager.js:136:24)\n    at Client._handleErrorWhileConnecting (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:326:19)\n    at Client._handleErrorEvent (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:336:19)\n    at Connection.emit (node:events:518:28)\n    at Socket.reportStreamError (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\connection.js:57:12)\n    at Socket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-03 21:22:57"}
{"body":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"error":"getaddrinfo ENOTFOUND autorack.proxy.rlwy.net","level":"error","message":"Erro ao atualizar tokens","route":"felipe","service":"notifications-app-api","stack":"SequelizeHostNotFoundError: getaddrinfo ENOTFOUND autorack.proxy.rlwy.net\n    at Client._connectionCallback (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\sequelize\\lib\\dialects\\postgres\\connection-manager.js:136:24)\n    at Client._handleErrorWhileConnecting (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:326:19)\n    at Client._handleErrorEvent (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:336:19)\n    at Connection.emit (node:events:518:28)\n    at Socket.reportStreamError (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\connection.js:57:12)\n    at Socket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-03 21:22:57"}
{"body":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"error":"getaddrinfo ENOTFOUND autorack.proxy.rlwy.net","level":"error","message":"Erro ao atualizar tokens","route":"felipe","service":"notifications-app-api","stack":"SequelizeHostNotFoundError: getaddrinfo ENOTFOUND autorack.proxy.rlwy.net\n    at Client._connectionCallback (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\sequelize\\lib\\dialects\\postgres\\connection-manager.js:136:24)\n    at Client._handleErrorWhileConnecting (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:326:19)\n    at Client._handleErrorEvent (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:336:19)\n    at Connection.emit (node:events:518:28)\n    at Socket.reportStreamError (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\connection.js:57:12)\n    at Socket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-03 21:22:57"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:22","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGcfK542qst9kRl2pDS0yR4HY8MsyCMln0BL38iWKDCtTcm-nXcw3dlygN28wv-68iSfN5sOI4DRHZjW4YaI27FkgIciFAqYuixOI_UB86b866V_tE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:22","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDrSGZMplyKwjxmEK8k-qkPZ8MJyorlkLrQk-6NKvvlfK-GmtyKpxHxqkD6tVynXEV9xlqAUgxMGwS7TVG5nMkpDVAOG2KRS5jOTmghJ3A7k7o8oE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:25","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDrSGZMplyKwjxmEK8k-qkPZ8MJyorlkLrQk-6NKvvlfK-GmtyKpxHxqkD6tVynXEV9xlqAUgxMGwS7TVG5nMkpDVAOG2KRS5jOTmghJ3A7k7o8oE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:25","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDrSGZMplyKwjxmEK8k-qkPZ8MJyorlkLrQk-6NKvvlfK-GmtyKpxHxqkD6tVynXEV9xlqAUgxMGwS7TVG5nMkpDVAOG2KRS5jOTmghJ3A7k7o8oE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:25","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:23:25.807Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:25","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:23:26.277Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:23:26.349Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:23:26.517Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:23:26.650Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:23:26","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:24:14","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:24:14","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:24:14","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"g3WIhC0qLjJo3fANAAAB","timestamp":"2025-08-03 21:24:14","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:24:16","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:24:16","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:24:16","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"g3WIhC0qLjJo3fANAAAB","timestamp":"2025-08-03 21:24:16","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"g3WIhC0qLjJo3fANAAAB","timestamp":"2025-08-03 21:24:16","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:24:16","type":"route","userId":14}
{"count":101,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:24:17","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7992,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:24","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:24","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7992,"response":"projects/easy-notifications-post/messages/0:1754267366313320%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7992,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7992,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7992,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:29:25","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267366313320%d193f810d193f810","sentAt":"2025-08-04T00:29:25.641Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7992,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:25","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7993,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7993,"response":"projects/easy-notifications-post/messages/0:1754267375166039%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7993,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7993,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7993,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:29:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267375166039%d193f810d193f810","sentAt":"2025-08-04T00:29:34.474Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7993,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7994,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7994,"response":"projects/easy-notifications-post/messages/0:1754267383553121%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7994,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7994,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7994,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:29:42","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267383553121%d193f810d193f810","sentAt":"2025-08-04T00:29:42.877Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7994,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:42","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDrSGZMplyKwjxmEK8k-qkPZ8MJyorlkLrQk-6NKvvlfK-GmtyKpxHxqkD6tVynXEV9xlqAUgxMGwS7TVG5nMkpDVAOG2KRS5jOTmghJ3A7k7o8oE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDrSGZMplyKwjxmEK8k-qkPZ8MJyorlkLrQk-6NKvvlfK-GmtyKpxHxqkD6tVynXEV9xlqAUgxMGwS7TVG5nMkpDVAOG2KRS5jOTmghJ3A7k7o8oE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:44","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:29:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:29:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:29:44","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:29:44.826Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:44","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:29:45.037Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:45","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:29:45","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:29:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:29:45","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"g3WIhC0qLjJo3fANAAAB","timestamp":"2025-08-03 21:29:45","totalClients":1,"type":"socket"}
{"count":104,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:29:45","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:45","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIZIiBTkyQbpDCGSb-Jfj0vL9uC26D0hQU0nTxEct8B99cfnpfUk5CCxEW8iFtfBCf3yRKPPohw_PHnyhf6diVNOBxGUg_zaQGMUpbaOdQg05tZgo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIZIiBTkyQbpDCGSb-Jfj0vL9uC26D0hQU0nTxEct8B99cfnpfUk5CCxEW8iFtfBCf3yRKPPohw_PHnyhf6diVNOBxGUg_zaQGMUpbaOdQg05tZgo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIZIiBTkyQbpDCGSb-Jfj0vL9uC26D0hQU0nTxEct8B99cfnpfUk5CCxEW8iFtfBCf3yRKPPohw_PHnyhf6diVNOBxGUg_zaQGMUpbaOdQg05tZgo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:29:47.642Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:29:47.644Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:29:47.646Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:47","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7995,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7995,"response":"projects/easy-notifications-post/messages/0:1754267390395790%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7995,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7995,"service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7995,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:29:49","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267390395790%d193f810d193f810","sentAt":"2025-08-04T00:29:49.703Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7995,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:29:49","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"g3WIhC0qLjJo3fANAAAB","timestamp":"2025-08-03 21:32:34","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:32:38","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:32:38","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:32:38","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"7_00VhbmHc9bisbXAAAD","timestamp":"2025-08-03 21:32:38","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:32:40","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7_00VhbmHc9bisbXAAAD","timestamp":"2025-08-03 21:32:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:32:40","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:32:40","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:32:40","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7_00VhbmHc9bisbXAAAD","timestamp":"2025-08-03 21:32:40","totalClients":1,"type":"socket"}
{"count":105,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:32:40","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7996,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7996,"response":"projects/easy-notifications-post/messages/0:1754267562223850%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7996,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7996,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7996,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:32:41","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267562223850%d193f810d193f810","sentAt":"2025-08-04T00:32:41.522Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7996,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:32:41","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7997,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7997,"response":"projects/easy-notifications-post/messages/0:1754267566481316%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7997,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7997,"service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7997,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:32:45","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267566481316%d193f810d193f810","sentAt":"2025-08-04T00:32:45.771Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7997,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:32:45","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"7_00VhbmHc9bisbXAAAD","timestamp":"2025-08-03 21:36:43","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:36:56","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:36:56","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:36:56","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:36:56","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:36:57","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:36:57","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:36:57","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:36:57","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:36:57","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:36:57","totalClients":1,"type":"socket"}
{"count":107,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:36:58","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7998,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7998,"response":"projects/easy-notifications-post/messages/0:1754267827574730%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7998,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7998,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7998,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:37:06","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267827574730%d193f810d193f810","sentAt":"2025-08-04T00:37:06.875Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7998,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:06","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":7999,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":7999,"response":"projects/easy-notifications-post/messages/0:1754267834274571%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":7999,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":7999,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":7999,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:37:13","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267834274571%d193f810d193f810","sentAt":"2025-08-04T00:37:13.572Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":7999,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:13","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIZIiBTkyQbpDCGSb-Jfj0vL9uC26D0hQU0nTxEct8B99cfnpfUk5CCxEW8iFtfBCf3yRKPPohw_PHnyhf6diVNOBxGUg_zaQGMUpbaOdQg05tZgo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIZIiBTkyQbpDCGSb-Jfj0vL9uC26D0hQU0nTxEct8B99cfnpfUk5CCxEW8iFtfBCf3yRKPPohw_PHnyhf6diVNOBxGUg_zaQGMUpbaOdQg05tZgo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:14","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:37:14","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:37:14","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:15.679Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:15.909Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:15","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:37:16","totalClients":1,"type":"socket"}
{"count":109,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:37:16","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:16","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEumY008tHAdHfcNI_UDkIbg1O1zaPvFyaCQHz_oPtOolW7qo9G5V_lLeEMG7r7qXeXRPfz-LSFkVT3XOz-tKTdSFj26y1kD1RYUgpHvbfqXUZwsIA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEumY008tHAdHfcNI_UDkIbg1O1zaPvFyaCQHz_oPtOolW7qo9G5V_lLeEMG7r7qXeXRPfz-LSFkVT3XOz-tKTdSFj26y1kD1RYUgpHvbfqXUZwsIA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEumY008tHAdHfcNI_UDkIbg1O1zaPvFyaCQHz_oPtOolW7qo9G5V_lLeEMG7r7qXeXRPfz-LSFkVT3XOz-tKTdSFj26y1kD1RYUgpHvbfqXUZwsIA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:18.692Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:18.695Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:18.699Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:18","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8000,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8000,"response":"projects/easy-notifications-post/messages/0:1754267840461776%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8000,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8000,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8000,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:37:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267840461776%d193f810d193f810","sentAt":"2025-08-04T00:37:19.758Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8000,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:19","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8001,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:25","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:25","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8001,"response":"projects/easy-notifications-post/messages/0:1754267846982039%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8001,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8001,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8001,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:37:26","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267846982039%d193f810d193f810","sentAt":"2025-08-04T00:37:26.264Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8001,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:26","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEumY008tHAdHfcNI_UDkIbg1O1zaPvFyaCQHz_oPtOolW7qo9G5V_lLeEMG7r7qXeXRPfz-LSFkVT3XOz-tKTdSFj26y1kD1RYUgpHvbfqXUZwsIA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:27","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:28.407Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:28","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:37:29","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFJzsKmyUxQ3Pes9dzFp5HOdNWKlgUn4xJzKl5iQwWKfB6zgi2mlwCJxF0LejSomlJkvAdj6Cv9Zs8EpMZhMnZjSdHwOe3oAK4V37VSJaC-Va2M-m8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFJzsKmyUxQ3Pes9dzFp5HOdNWKlgUn4xJzKl5iQwWKfB6zgi2mlwCJxF0LejSomlJkvAdj6Cv9Zs8EpMZhMnZjSdHwOe3oAK4V37VSJaC-Va2M-m8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:31","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:31.918Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:32.132Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:32","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8002,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:32","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:32","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8002,"response":"projects/easy-notifications-post/messages/0:1754267853944017%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8002,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8002,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8002,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:37:33","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267853944017%d193f810d193f810","sentAt":"2025-08-04T00:37:33.236Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8002,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:33","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFJzsKmyUxQ3Pes9dzFp5HOdNWKlgUn4xJzKl5iQwWKfB6zgi2mlwCJxF0LejSomlJkvAdj6Cv9Zs8EpMZhMnZjSdHwOe3oAK4V37VSJaC-Va2M-m8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:35","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:35.673Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:35","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:37:36","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGEdMynmTtOm6rgTcTwn_VnaE1uHQhycGJkvaXJ_FZVJIauKmfTZVcwRlQw7T2tdvRrWQfAjQOftwq7unnEUD4crawNP0vh3KetuOiEohEOvObKq_4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:38","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGEdMynmTtOm6rgTcTwn_VnaE1uHQhycGJkvaXJ_FZVJIauKmfTZVcwRlQw7T2tdvRrWQfAjQOftwq7unnEUD4crawNP0vh3KetuOiEohEOvObKq_4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:38","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:38","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:38.959Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:38","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:38","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:38.962Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:38","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8003,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8003,"response":"projects/easy-notifications-post/messages/0:1754267865148550%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8003,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8003,"service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8003,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:37:44","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754267865148550%d193f810d193f810","sentAt":"2025-08-04T00:37:44.542Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8003,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:44","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGEdMynmTtOm6rgTcTwn_VnaE1uHQhycGJkvaXJ_FZVJIauKmfTZVcwRlQw7T2tdvRrWQfAjQOftwq7unnEUD4crawNP0vh3KetuOiEohEOvObKq_4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:49","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:50.324Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:50","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:37:51","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFx2CgzgZY7s1Q0eEKHu-pLQ9LbNPBNqjdCNCzVYgFqiYLOSN4fHBlL7KlF5qFqcr6WWvQjIsDI6Fe1OSaxyB50BzTPjpGivvIsQVJBrA6QM6TKUv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:53","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFx2CgzgZY7s1Q0eEKHu-pLQ9LbNPBNqjdCNCzVYgFqiYLOSN4fHBlL7KlF5qFqcr6WWvQjIsDI6Fe1OSaxyB50BzTPjpGivvIsQVJBrA6QM6TKUv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:53","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:53.827Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:37:54.036Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:37:54","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"tLymnCh-qttmzYHdAAAF","timestamp":"2025-08-03 21:40:35","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:40:42","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:40:42","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:40:42","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"e66u4J6rAwWnfZ8wAAAH","timestamp":"2025-08-03 21:40:42","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:40:44","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:40:44","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:40:44","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"e66u4J6rAwWnfZ8wAAAH","timestamp":"2025-08-03 21:40:44","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"e66u4J6rAwWnfZ8wAAAH","timestamp":"2025-08-03 21:40:44","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:40:44","type":"route","userId":14}
{"count":113,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:40:44","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8004,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:41:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8004,"response":"projects/easy-notifications-post/messages/0:1754268069726054%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8004,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8004,"service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8004,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:41:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268069726054%d193f810d193f810","sentAt":"2025-08-04T00:41:09.019Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8004,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:41:09","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:42:43","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"e66u4J6rAwWnfZ8wAAAH","timestamp":"2025-08-03 21:42:45","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:42:45","type":"query"}
{"count":114,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:42:46","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"e66u4J6rAwWnfZ8wAAAH","timestamp":"2025-08-03 21:42:48","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:42:53","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:42:53","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:42:53","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"HbmyPTkgjLRNogirAAAJ","timestamp":"2025-08-03 21:42:53","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:42:53","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:42:53","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:42:53","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"HbmyPTkgjLRNogirAAAJ","timestamp":"2025-08-03 21:42:53","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:42:53","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"HbmyPTkgjLRNogirAAAJ","timestamp":"2025-08-03 21:42:53","totalClients":1,"type":"socket"}
{"count":114,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:42:54","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 21:42:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 21:42:57","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"HbmyPTkgjLRNogirAAAJ","timestamp":"2025-08-03 21:43:00","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:43:04","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:43:04","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:43:04","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Dz7p6jpe3xhrucGHAAAL","timestamp":"2025-08-03 21:43:04","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:43:04","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:43:04","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:43:04","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Dz7p6jpe3xhrucGHAAAL","timestamp":"2025-08-03 21:43:04","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Dz7p6jpe3xhrucGHAAAL","timestamp":"2025-08-03 21:43:04","totalClients":1,"type":"socket"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:43:05","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:05","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8005,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8005,"response":"projects/easy-notifications-post/messages/0:1754268190418190%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8005,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8005,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8005,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:43:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268190418190%d193f810d193f810","sentAt":"2025-08-04T00:43:09.699Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8005,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:09","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8006,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8006,"response":"projects/easy-notifications-post/messages/0:1754268200584806%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8006,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8006,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8006,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:43:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268200584806%d193f810d193f810","sentAt":"2025-08-04T00:43:19.861Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8006,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:19","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8007,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8007,"response":"projects/easy-notifications-post/messages/0:1754268209776129%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8007,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8007,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8007,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:43:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268209776129%d193f810d193f810","sentAt":"2025-08-04T00:43:29.064Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8007,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:29","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFx2CgzgZY7s1Q0eEKHu-pLQ9LbNPBNqjdCNCzVYgFqiYLOSN4fHBlL7KlF5qFqcr6WWvQjIsDI6Fe1OSaxyB50BzTPjpGivvIsQVJBrA6QM6TKUv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFx2CgzgZY7s1Q0eEKHu-pLQ9LbNPBNqjdCNCzVYgFqiYLOSN4fHBlL7KlF5qFqcr6WWvQjIsDI6Fe1OSaxyB50BzTPjpGivvIsQVJBrA6QM6TKUv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:44","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:43:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:43:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:43:44","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:43:45.718Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:43:45.722Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Dz7p6jpe3xhrucGHAAAL","timestamp":"2025-08-03 21:43:45","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","type":"route","userId":14}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:43:45","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGQUep6peLfVm7fvBCzovpuXaXOAS_tiQu6x9OJKU2gYQgEdnOu9d_4UZsgJQqvSdpjX8HYqDK4sWxrZZIGspERoVbtUQ_6k7nniUZa_ND4sjII7HU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGQUep6peLfVm7fvBCzovpuXaXOAS_tiQu6x9OJKU2gYQgEdnOu9d_4UZsgJQqvSdpjX8HYqDK4sWxrZZIGspERoVbtUQ_6k7nniUZa_ND4sjII7HU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGQUep6peLfVm7fvBCzovpuXaXOAS_tiQu6x9OJKU2gYQgEdnOu9d_4UZsgJQqvSdpjX8HYqDK4sWxrZZIGspERoVbtUQ_6k7nniUZa_ND4sjII7HU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:43:47.947Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:43:47.952Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:43:47.967Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:47","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8008,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8008,"response":"projects/easy-notifications-post/messages/0:1754268230554164%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8008,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8008,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8008,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:43:49","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268230554164%d193f810d193f810","sentAt":"2025-08-04T00:43:49.844Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8008,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:49","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8009,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8009,"response":"projects/easy-notifications-post/messages/0:1754268236338488%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8009,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8009,"service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8009,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:43:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268236338488%d193f810d193f810","sentAt":"2025-08-04T00:43:55.613Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8009,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:43:55","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8010,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:44:21","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:21","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8010,"response":"projects/easy-notifications-post/messages/0:1754268262861920%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8010,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8010,"service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8010,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:44:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268262861920%d193f810d193f810","sentAt":"2025-08-04T00:44:22.147Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8010,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:44:22","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"Dz7p6jpe3xhrucGHAAAL","timestamp":"2025-08-03 21:45:31","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:45:35","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:45:35","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:45:35","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:45:35","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:45:36","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:45:36","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:45:36","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:45:36","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:45:36","type":"route","userId":14}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:45:36","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:45:37","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8011,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8011,"response":"projects/easy-notifications-post/messages/0:1754268347335464%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8011,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8011,"service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8011,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:45:46","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268347335464%d193f810d193f810","sentAt":"2025-08-04T00:45:46.613Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8011,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:45:46","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8012,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8012,"response":"projects/easy-notifications-post/messages/0:1754268361668881%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8012,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8012,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8012,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:46:00","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268361668881%d193f810d193f810","sentAt":"2025-08-04T00:46:00.943Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8012,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:00","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGQUep6peLfVm7fvBCzovpuXaXOAS_tiQu6x9OJKU2gYQgEdnOu9d_4UZsgJQqvSdpjX8HYqDK4sWxrZZIGspERoVbtUQ_6k7nniUZa_ND4sjII7HU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGQUep6peLfVm7fvBCzovpuXaXOAS_tiQu6x9OJKU2gYQgEdnOu9d_4UZsgJQqvSdpjX8HYqDK4sWxrZZIGspERoVbtUQ_6k7nniUZa_ND4sjII7HU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:46:05.766Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:46:05","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:46:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:46:06","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:46:06.194Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:06","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:46:06","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:06","type":"route","userId":14}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:46:06","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:46:08.701Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:46:08.711Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:46:08.712Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:08","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8013,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:09","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:09","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8013,"response":"projects/easy-notifications-post/messages/0:1754268371020375%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8013,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8013,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8013,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:46:10","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268371020375%d193f810d193f810","sentAt":"2025-08-04T00:46:10.304Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8013,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:10","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8014,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8014,"response":"projects/easy-notifications-post/messages/0:1754268377586388%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8014,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8014,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8014,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:46:16","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268377586388%d193f810d193f810","sentAt":"2025-08-04T00:46:16.868Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8014,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:16","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8015,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8015,"response":"projects/easy-notifications-post/messages/0:1754268385565373%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8015,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8015,"service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8015,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:46:24","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268385565373%d193f810d193f810","sentAt":"2025-08-04T00:46:24.852Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8015,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:46:24","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:47:09","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:47:10","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:47:10","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:47:10","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:47:17","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:47:17","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:47:17","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:47:18","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:47:27","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:47:27","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:47:27","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:47:27","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:47:40","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:47:41","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:47:41","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:47:41","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"7eL3cG5GYKKxCiiUAAAP","timestamp":"2025-08-03 21:47:51","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:47:51","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:47:51","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7eL3cG5GYKKxCiiUAAAP","timestamp":"2025-08-03 21:47:51","totalClients":2,"type":"socket"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:47:52","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"YPNza0d9tsCWdGBIAAAR","timestamp":"2025-08-03 21:48:01","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:48:02","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:48:02","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"YPNza0d9tsCWdGBIAAAR","timestamp":"2025-08-03 21:48:02","totalClients":3,"type":"socket"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:48:02","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"obk_1dgnH7vt8-y9AAAT","timestamp":"2025-08-03 21:48:15","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:48:15","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:48:16","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"obk_1dgnH7vt8-y9AAAT","timestamp":"2025-08-03 21:48:16","totalClients":4,"type":"socket"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:48:16","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"1Gv72xQLxqpycJ9GAAAV","timestamp":"2025-08-03 21:48:26","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:48:26","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:48:26","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"1Gv72xQLxqpycJ9GAAAV","timestamp":"2025-08-03 21:48:26","totalClients":5,"type":"socket"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:48:26","type":"message","userId":"14"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"XvgvaiDF3w-YLyOhAAAX","timestamp":"2025-08-03 21:48:36","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:48:36","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:48:36","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"XvgvaiDF3w-YLyOhAAAX","timestamp":"2025-08-03 21:48:36","totalClients":6,"type":"socket"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:48:36","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:48:45","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"XvgvaiDF3w-YLyOhAAAX","timestamp":"2025-08-03 21:48:45","totalClients":6,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:48:45","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:48:46","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"XvgvaiDF3w-YLyOhAAAX","timestamp":"2025-08-03 21:48:57","totalClients":6,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:48:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:48:57","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":5,"route":"felipe","service":"notifications-app-api","socketId":"EW8WNOblGPhN34K8AAAN","timestamp":"2025-08-03 21:48:59","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":4,"route":"felipe","service":"notifications-app-api","socketId":"XvgvaiDF3w-YLyOhAAAX","timestamp":"2025-08-03 21:48:59","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":3,"route":"felipe","service":"notifications-app-api","socketId":"1Gv72xQLxqpycJ9GAAAV","timestamp":"2025-08-03 21:48:59","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":2,"route":"felipe","service":"notifications-app-api","socketId":"obk_1dgnH7vt8-y9AAAT","timestamp":"2025-08-03 21:48:59","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"YPNza0d9tsCWdGBIAAAR","timestamp":"2025-08-03 21:48:59","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"7eL3cG5GYKKxCiiUAAAP","timestamp":"2025-08-03 21:48:59","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:29","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:29","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:30.500Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:30.691Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:30.698Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:30.705Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:30.715Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:30","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGga6fNtG8BwOiGhR8uLperryKQQwzjRO5VHDutBX5UZgAl53_Z-H98XT-MyiME3BVS-xhlct0EBqQpR8I_BuZtABdTEH2HC6DVgDuPuykeBOdt2GY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:31","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:32.155Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:32","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"lcE__3Hj_L82e_o1AAAZ","timestamp":"2025-08-03 21:50:34","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lcE__3Hj_L82e_o1AAAZ","timestamp":"2025-08-03 21:50:34","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lcE__3Hj_L82e_o1AAAZ","timestamp":"2025-08-03 21:50:34","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"route","userId":14}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:50:34","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:37.739Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:37.742Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:37.758Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:37.762Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:37.938Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:50:37.950Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:50:37","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:51:06","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lcE__3Hj_L82e_o1AAAZ","timestamp":"2025-08-03 21:51:07","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:51:07","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:51:08","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8016,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8016,"response":"projects/easy-notifications-post/messages/0:1754268678578428%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8016,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:17","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:18","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8016,"service":"notifications-app-api","timestamp":"2025-08-03 21:51:18","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8016,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:51:18","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268678578428%d193f810d193f810","sentAt":"2025-08-04T00:51:17.876Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8016,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:51:18","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:51:47","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lcE__3Hj_L82e_o1AAAZ","timestamp":"2025-08-03 21:51:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:51:49","type":"query"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:51:50","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"lcE__3Hj_L82e_o1AAAZ","timestamp":"2025-08-03 21:51:52","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:51:57","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:51:57","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:51:57","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"FsW81lsJZt1vIz4eAAAb","timestamp":"2025-08-03 21:51:57","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:51:57","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:51:57","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:51:57","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"FsW81lsJZt1vIz4eAAAb","timestamp":"2025-08-03 21:51:57","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:51:57","type":"route","userId":14}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:51:58","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"FsW81lsJZt1vIz4eAAAb","timestamp":"2025-08-03 21:51:58","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF-aJrI_KfAcPRw3AebYuUBNwCeEtaLmfLxQqL83I0EM5BTFhd6mgTmSe16R8pm7qlZyuHFCt6CjkjqdVvWZnvENwltGbYd-IfMscUExlcc4XBtz-0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:18","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:52:18","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:52:18","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:52:18","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:52:19","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:52:20.014Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:52:20.126Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"FsW81lsJZt1vIz4eAAAb","timestamp":"2025-08-03 21:52:20","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","type":"route","userId":14}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:52:20","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9_OSvWFFfYrcdweftJDZmF88Q6y586BEGC-Js5sxD7GUdzMYGkl0Pa9IPd4Io19L8oHimsZENS3lHHAUiCr6tK0dMY9XpX7TImdnxTjg8-EQWNGM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9_OSvWFFfYrcdweftJDZmF88Q6y586BEGC-Js5sxD7GUdzMYGkl0Pa9IPd4Io19L8oHimsZENS3lHHAUiCr6tK0dMY9XpX7TImdnxTjg8-EQWNGM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9_OSvWFFfYrcdweftJDZmF88Q6y586BEGC-Js5sxD7GUdzMYGkl0Pa9IPd4Io19L8oHimsZENS3lHHAUiCr6tK0dMY9XpX7TImdnxTjg8-EQWNGM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:52:21.750Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:52:21.762Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:52:21.802Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:21","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8017,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:25","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:25","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8017,"response":"projects/easy-notifications-post/messages/0:1754268746859734%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8017,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8017,"service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8017,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:52:26","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268746859734%d193f810d193f810","sentAt":"2025-08-04T00:52:26.227Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8017,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:52:26","type":"delivery"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"jbR8If5DsLG4xyGfAAAd","timestamp":"2025-08-03 21:52:56","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:52:56","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:52:58","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jbR8If5DsLG4xyGfAAAd","timestamp":"2025-08-03 21:52:58","totalClients":2,"type":"socket"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:52:58","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8018,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8018,"response":"projects/easy-notifications-post/messages/0:1754268783305628%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8018,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8018,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8018,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:53:02","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268783305628%d193f810d193f810","sentAt":"2025-08-04T00:53:02.590Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8018,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:02","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8019,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8019,"response":"projects/easy-notifications-post/messages/0:1754268790298640%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8019,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8019,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8019,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:53:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268790298640%d193f810d193f810","sentAt":"2025-08-04T00:53:09.572Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8019,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:09","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9_OSvWFFfYrcdweftJDZmF88Q6y586BEGC-Js5sxD7GUdzMYGkl0Pa9IPd4Io19L8oHimsZENS3lHHAUiCr6tK0dMY9XpX7TImdnxTjg8-EQWNGM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE9_OSvWFFfYrcdweftJDZmF88Q6y586BEGC-Js5sxD7GUdzMYGkl0Pa9IPd4Io19L8oHimsZENS3lHHAUiCr6tK0dMY9XpX7TImdnxTjg8-EQWNGM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:18","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:53:18","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:53:18","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:53:18","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:53:18.797Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:53:19.040Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:19","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:53:19","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:53:19","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:53:19","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jbR8If5DsLG4xyGfAAAd","timestamp":"2025-08-03 21:53:19","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:19","type":"route","userId":14}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:53:19","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFLmwN-7MZ7AoqOesWNyUBOi_Mnj75P_Xj0yFUufWQIiQ5iLKseZJAMnKEe47Jh9cOMO37Bc8jmi91Mj8uwu9eL5pHdS4EYCVskURyUWn6U5QeAvCU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFLmwN-7MZ7AoqOesWNyUBOi_Mnj75P_Xj0yFUufWQIiQ5iLKseZJAMnKEe47Jh9cOMO37Bc8jmi91Mj8uwu9eL5pHdS4EYCVskURyUWn6U5QeAvCU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFLmwN-7MZ7AoqOesWNyUBOi_Mnj75P_Xj0yFUufWQIiQ5iLKseZJAMnKEe47Jh9cOMO37Bc8jmi91Mj8uwu9eL5pHdS4EYCVskURyUWn6U5QeAvCU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:21","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:53:22.058Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:53:22.173Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:53:22.281Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8020,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8020,"response":"projects/easy-notifications-post/messages/0:1754268803700862%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8020,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8020,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8020,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:53:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268803700862%d193f810d193f810","sentAt":"2025-08-04T00:53:22.984Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8020,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:22","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8021,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8021,"response":"projects/easy-notifications-post/messages/0:1754268809624828%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8021,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8021,"service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8021,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:53:28","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268809624828%d193f810d193f810","sentAt":"2025-08-04T00:53:28.941Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8021,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:53:28","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:54:17","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jbR8If5DsLG4xyGfAAAd","timestamp":"2025-08-03 21:54:18","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:54:19","type":"query"}
{"count":17,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:54:19","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8022,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:54:27","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:27","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8022,"response":"projects/easy-notifications-post/messages/0:1754268869916174%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8022,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8022,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8022,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:54:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268869916174%d193f810d193f810","sentAt":"2025-08-04T00:54:29.190Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8022,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:54:29","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8023,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:54:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8023,"response":"projects/easy-notifications-post/messages/0:1754268875793067%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8023,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8023,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8023,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:54:35","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268875793067%d193f810d193f810","sentAt":"2025-08-04T00:54:35.074Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8023,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:54:35","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"jbR8If5DsLG4xyGfAAAd","timestamp":"2025-08-03 21:54:40","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"FsW81lsJZt1vIz4eAAAb","timestamp":"2025-08-03 21:54:40","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:54:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:54:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:54:44","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"qDzq7x9UPRR879XmAAAf","timestamp":"2025-08-03 21:54:44","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:54:46","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"qDzq7x9UPRR879XmAAAf","timestamp":"2025-08-03 21:54:46","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:54:46","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:54:46","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"qDzq7x9UPRR879XmAAAf","timestamp":"2025-08-03 21:54:46","totalClients":1,"type":"socket"}
{"count":19,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:54:46","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:54:46","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8024,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8024,"response":"projects/easy-notifications-post/messages/0:1754268891246435%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8024,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8024,"service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8024,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:54:50","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268891246435%d193f810d193f810","sentAt":"2025-08-04T00:54:50.538Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8024,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:54:50","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8025,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8025,"response":"projects/easy-notifications-post/messages/0:1754268916207288%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8025,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8025,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8025,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:55:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268916207288%d193f810d193f810","sentAt":"2025-08-04T00:55:15.514Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8025,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:15","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8026,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:38","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:38","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8026,"response":"projects/easy-notifications-post/messages/0:1754268939886989%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8026,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8026,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8026,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:55:39","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268939886989%d193f810d193f810","sentAt":"2025-08-04T00:55:39.152Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8026,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:39","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFLmwN-7MZ7AoqOesWNyUBOi_Mnj75P_Xj0yFUufWQIiQ5iLKseZJAMnKEe47Jh9cOMO37Bc8jmi91Mj8uwu9eL5pHdS4EYCVskURyUWn6U5QeAvCU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFLmwN-7MZ7AoqOesWNyUBOi_Mnj75P_Xj0yFUufWQIiQ5iLKseZJAMnKEe47Jh9cOMO37Bc8jmi91Mj8uwu9eL5pHdS4EYCVskURyUWn6U5QeAvCU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:47","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:55:48","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:55:48","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:55:48","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:55:48.647Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:48","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:55:48.899Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:48","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:55:49","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:55:49","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:55:49","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"qDzq7x9UPRR879XmAAAf","timestamp":"2025-08-03 21:55:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:49","type":"route","userId":14}
{"count":22,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:55:49","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEv8r6942ZLnvV5geC48G3KdCM2GK-4N4sEB0Bx0wjd4loaKuYDXAox9DVhD_Q8_-DHTGMmXPrALvDuYsEuRguUtIZ5GfHBxVTq7bahW1ahSgvJARs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEv8r6942ZLnvV5geC48G3KdCM2GK-4N4sEB0Bx0wjd4loaKuYDXAox9DVhD_Q8_-DHTGMmXPrALvDuYsEuRguUtIZ5GfHBxVTq7bahW1ahSgvJARs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEv8r6942ZLnvV5geC48G3KdCM2GK-4N4sEB0Bx0wjd4loaKuYDXAox9DVhD_Q8_-DHTGMmXPrALvDuYsEuRguUtIZ5GfHBxVTq7bahW1ahSgvJARs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:55:51.741Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:55:51.810Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:55:51.882Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:51","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8027,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8027,"response":"projects/easy-notifications-post/messages/0:1754268955517916%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8027,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8027,"service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8027,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:55:54","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268955517916%d193f810d193f810","sentAt":"2025-08-04T00:55:54.784Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8027,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:55:54","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 21:56:08","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 21:56:09","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8028,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:56:11","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8028,"response":"projects/easy-notifications-post/messages/0:1754268973181845%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8028,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8028,"service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8028,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:56:12","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754268973181845%d193f810d193f810","sentAt":"2025-08-04T00:56:12.461Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8028,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:56:12","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"qDzq7x9UPRR879XmAAAf","timestamp":"2025-08-03 21:56:24","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:56:28","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:56:28","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:56:28","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"mmmRY5DGShQYfa0UAAAh","timestamp":"2025-08-03 21:56:28","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:56:30","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mmmRY5DGShQYfa0UAAAh","timestamp":"2025-08-03 21:56:30","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:56:30","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:56:30","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mmmRY5DGShQYfa0UAAAh","timestamp":"2025-08-03 21:56:30","totalClients":1,"type":"socket"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:56:30","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:56:30","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8029,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:02","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:02","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8029,"response":"projects/easy-notifications-post/messages/0:1754269024250558%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8029,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8029,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8029,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:57:03","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269024250558%d193f810d193f810","sentAt":"2025-08-04T00:57:03.505Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8029,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:03","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEv8r6942ZLnvV5geC48G3KdCM2GK-4N4sEB0Bx0wjd4loaKuYDXAox9DVhD_Q8_-DHTGMmXPrALvDuYsEuRguUtIZ5GfHBxVTq7bahW1ahSgvJARs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:23","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEv8r6942ZLnvV5geC48G3KdCM2GK-4N4sEB0Bx0wjd4loaKuYDXAox9DVhD_Q8_-DHTGMmXPrALvDuYsEuRguUtIZ5GfHBxVTq7bahW1ahSgvJARs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:23","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:57:23","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 21:57:23","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 21:57:24","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:57:25.501Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:57:25.651Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mmmRY5DGShQYfa0UAAAh","timestamp":"2025-08-03 21:57:25","totalClients":1,"type":"socket"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 21:57:25","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH9AvQNlEdpNWz4YSCfwq56-au-EBALA_ck734FCWdfjsRaLNl_zRq5uvAETDss81X6AJgHjKFjP3WVhiIN4Tc95B13ySmVbvwkQZYokyfc32ij31Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:26","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH9AvQNlEdpNWz4YSCfwq56-au-EBALA_ck734FCWdfjsRaLNl_zRq5uvAETDss81X6AJgHjKFjP3WVhiIN4Tc95B13ySmVbvwkQZYokyfc32ij31Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:26","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH9AvQNlEdpNWz4YSCfwq56-au-EBALA_ck734FCWdfjsRaLNl_zRq5uvAETDss81X6AJgHjKFjP3WVhiIN4Tc95B13ySmVbvwkQZYokyfc32ij31Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:26","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:57:27.102Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:27","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:57:27.110Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:27","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T00:57:27.164Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:27","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8030,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8030,"response":"projects/easy-notifications-post/messages/0:1754269052079225%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8030,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8030,"service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8030,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 21:57:31","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269052079225%d193f810d193f810","sentAt":"2025-08-04T00:57:31.394Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8030,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 21:57:31","type":"delivery"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"xeXenYBCNhGQp2B6AAAj","timestamp":"2025-08-03 22:00:30","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:00:31","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:00:32","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"xeXenYBCNhGQp2B6AAAj","timestamp":"2025-08-03 22:00:32","totalClients":2,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"mmmRY5DGShQYfa0UAAAh","timestamp":"2025-08-03 22:00:33","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"xeXenYBCNhGQp2B6AAAj","timestamp":"2025-08-03 22:00:33","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH9AvQNlEdpNWz4YSCfwq56-au-EBALA_ck734FCWdfjsRaLNl_zRq5uvAETDss81X6AJgHjKFjP3WVhiIN4Tc95B13ySmVbvwkQZYokyfc32ij31Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:52","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH9AvQNlEdpNWz4YSCfwq56-au-EBALA_ck734FCWdfjsRaLNl_zRq5uvAETDss81X6AJgHjKFjP3WVhiIN4Tc95B13ySmVbvwkQZYokyfc32ij31Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:53","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH9AvQNlEdpNWz4YSCfwq56-au-EBALA_ck734FCWdfjsRaLNl_zRq5uvAETDss81X6AJgHjKFjP3WVhiIN4Tc95B13ySmVbvwkQZYokyfc32ij31Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:53","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:00:54.665Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:54","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:00:54.891Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:54","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:00:54.916Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:00:54","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEUlEHMUZgxm_FkegO5A5K2wUF79QseJ2REMlBFvBAooBsETrGs5TmCyb2dGDyT1q9A62N4xooOnR1r35lcmkInTIaLsHaW_X1zJ25wKIxgneDR6Ac","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEUlEHMUZgxm_FkegO5A5K2wUF79QseJ2REMlBFvBAooBsETrGs5TmCyb2dGDyT1q9A62N4xooOnR1r35lcmkInTIaLsHaW_X1zJ25wKIxgneDR6Ac","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEUlEHMUZgxm_FkegO5A5K2wUF79QseJ2REMlBFvBAooBsETrGs5TmCyb2dGDyT1q9A62N4xooOnR1r35lcmkInTIaLsHaW_X1zJ25wKIxgneDR6Ac","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEUlEHMUZgxm_FkegO5A5K2wUF79QseJ2REMlBFvBAooBsETrGs5TmCyb2dGDyT1q9A62N4xooOnR1r35lcmkInTIaLsHaW_X1zJ25wKIxgneDR6Ac","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEUlEHMUZgxm_FkegO5A5K2wUF79QseJ2REMlBFvBAooBsETrGs5TmCyb2dGDyT1q9A62N4xooOnR1r35lcmkInTIaLsHaW_X1zJ25wKIxgneDR6Ac","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEUlEHMUZgxm_FkegO5A5K2wUF79QseJ2REMlBFvBAooBsETrGs5TmCyb2dGDyT1q9A62N4xooOnR1r35lcmkInTIaLsHaW_X1zJ25wKIxgneDR6Ac","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEUlEHMUZgxm_FkegO5A5K2wUF79QseJ2REMlBFvBAooBsETrGs5TmCyb2dGDyT1q9A62N4xooOnR1r35lcmkInTIaLsHaW_X1zJ25wKIxgneDR6Ac","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:13","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:15.314Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:15.329Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:15.466Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:15.532Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:15.558Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:15.692Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:15.748Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:15","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:16.715Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:17.015Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:17.162Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:17.230Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:17.361Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:01:17.449Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:17","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:01:22","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:01:22","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"YYUOY9i-OR-80CWAAAAl","timestamp":"2025-08-03 22:01:22","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:01:22","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:01:23","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"YYUOY9i-OR-80CWAAAAl","timestamp":"2025-08-03 22:01:23","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:01:23","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:01:23","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"YYUOY9i-OR-80CWAAAAl","timestamp":"2025-08-03 22:01:23","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:23","type":"route","userId":14}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:01:23","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8031,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8031,"response":"projects/easy-notifications-post/messages/0:1754269289798856%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8031,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8031,"service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8031,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:01:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269289798856%d193f810d193f810","sentAt":"2025-08-04T01:01:29.052Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8031,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:01:29","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8032,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8032,"response":"projects/easy-notifications-post/messages/0:1754269371326289%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8032,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8032,"service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8032,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:02:50","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269371326289%d193f810d193f810","sentAt":"2025-08-04T01:02:50.571Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8032,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:02:50","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:01","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHZw8lTFyScniU8m-oqRXK9plroVKcmmSXys3ot_40KYjWijURsl2z7iIkM_N3S6kelAMIlKSGn_IzD22MJsuRIqPElcFsiTMoanE1sgjuewalMvHU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:01","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:03:01","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:03:01","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:03:02","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:03:03.475Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:03:03.549Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"YYUOY9i-OR-80CWAAAAl","timestamp":"2025-08-03 22:03:03","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","type":"route","userId":14}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:03:03","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGfOuCbbMNkxlIyOXoDbkrY5OBlA_FGQ3Jb22dSaHDdKph_0EVjJiwObut-uUBM_SFYG-1ftg8ytKbGYcUvDUThET6DUJVpThA9odpGucIRcrPYllo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGfOuCbbMNkxlIyOXoDbkrY5OBlA_FGQ3Jb22dSaHDdKph_0EVjJiwObut-uUBM_SFYG-1ftg8ytKbGYcUvDUThET6DUJVpThA9odpGucIRcrPYllo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGfOuCbbMNkxlIyOXoDbkrY5OBlA_FGQ3Jb22dSaHDdKph_0EVjJiwObut-uUBM_SFYG-1ftg8ytKbGYcUvDUThET6DUJVpThA9odpGucIRcrPYllo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:03:05.661Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:03:05.664Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:03:05.666Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:05","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8033,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:07","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:07","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8033,"response":"projects/easy-notifications-post/messages/0:1754269388960063%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8033,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8033,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8033,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:03:08","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269388960063%d193f810d193f810","sentAt":"2025-08-04T01:03:08.210Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8033,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:08","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 22:03:23","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"YYUOY9i-OR-80CWAAAAl","timestamp":"2025-08-03 22:03:24","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 22:03:24","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:03:28","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:03:28","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:03:28","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"s_WxL3sEyLFJKa4wAAAn","timestamp":"2025-08-03 22:03:28","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:03:29","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:03:29","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:03:29","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"s_WxL3sEyLFJKa4wAAAn","timestamp":"2025-08-03 22:03:29","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:29","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:03:29","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"s_WxL3sEyLFJKa4wAAAn","timestamp":"2025-08-03 22:03:29","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8034,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8034,"response":"projects/easy-notifications-post/messages/0:1754269416150557%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8034,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8034,"service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8034,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:03:35","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269416150557%d193f810d193f810","sentAt":"2025-08-04T01:03:35.422Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8034,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:03:35","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"s_WxL3sEyLFJKa4wAAAn","timestamp":"2025-08-03 22:04:08","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:04:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:04:12","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:04:12","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:04:12","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:04:14","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:04:14","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:04:14","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:04:14","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:04:14","totalClients":1,"type":"socket"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:04:14","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:04:14","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8035,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8035,"response":"projects/easy-notifications-post/messages/0:1754269483569376%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8035,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8035,"service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8035,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:04:42","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269483569376%d193f810d193f810","sentAt":"2025-08-04T01:04:42.818Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8035,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:04:42","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGfOuCbbMNkxlIyOXoDbkrY5OBlA_FGQ3Jb22dSaHDdKph_0EVjJiwObut-uUBM_SFYG-1ftg8ytKbGYcUvDUThET6DUJVpThA9odpGucIRcrPYllo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGfOuCbbMNkxlIyOXoDbkrY5OBlA_FGQ3Jb22dSaHDdKph_0EVjJiwObut-uUBM_SFYG-1ftg8ytKbGYcUvDUThET6DUJVpThA9odpGucIRcrPYllo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:05","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:05:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:05:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:05:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:05:06.600Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:05:06.626Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:05:06","totalClients":1,"type":"socket"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:05:06","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEKLLtb5sC2ohU0VZhoUxpHcJSI2-pDwJoOUQyujTgFmlX3-Qd22oBFcthgb1CWke1jMXy5OwMdb9Do-Rnltmv9nAkWkwtHNPXzsTkkSJTthbvz7dY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEKLLtb5sC2ohU0VZhoUxpHcJSI2-pDwJoOUQyujTgFmlX3-Qd22oBFcthgb1CWke1jMXy5OwMdb9Do-Rnltmv9nAkWkwtHNPXzsTkkSJTthbvz7dY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEKLLtb5sC2ohU0VZhoUxpHcJSI2-pDwJoOUQyujTgFmlX3-Qd22oBFcthgb1CWke1jMXy5OwMdb9Do-Rnltmv9nAkWkwtHNPXzsTkkSJTthbvz7dY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:05:08.891Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:05:08.893Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:05:08.902Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:08","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8036,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8036,"response":"projects/easy-notifications-post/messages/0:1754269515215258%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8036,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8036,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8036,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:05:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269515215258%d193f810d193f810","sentAt":"2025-08-04T01:05:14.454Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8036,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:14","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8037,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8037,"response":"projects/easy-notifications-post/messages/0:1754269521627319%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8037,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8037,"service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8037,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:05:20","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269521627319%d193f810d193f810","sentAt":"2025-08-04T01:05:20.885Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8037,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:05:20","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8038,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8038,"response":"projects/easy-notifications-post/messages/0:1754269595719521%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8038,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8038,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8038,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:06:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269595719521%d193f810d193f810","sentAt":"2025-08-04T01:06:34.986Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8038,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:06:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8039,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:06:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8039,"response":"projects/easy-notifications-post/messages/0:1754269618935944%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8039,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8039,"service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8039,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:06:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269618935944%d193f810d193f810","sentAt":"2025-08-04T01:06:58.186Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8039,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:06:58","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEKLLtb5sC2ohU0VZhoUxpHcJSI2-pDwJoOUQyujTgFmlX3-Qd22oBFcthgb1CWke1jMXy5OwMdb9Do-Rnltmv9nAkWkwtHNPXzsTkkSJTthbvz7dY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:15","webTokenLength":0}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:07:17","totalClients":1,"type":"socket"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:07:17.387Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:17","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH-FOhlIrQ83K_30UcCdOW9n3ZmUxT7FoThiivEisjII0PmGHaZYQfcKC1mz-8HGtvziiYxIwCYlnj47AMt7-mq29pinrTP2FJOqYYnLlH6JLJfFl4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH-FOhlIrQ83K_30UcCdOW9n3ZmUxT7FoThiivEisjII0PmGHaZYQfcKC1mz-8HGtvziiYxIwCYlnj47AMt7-mq29pinrTP2FJOqYYnLlH6JLJfFl4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:18","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8040,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:07:19.230Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:07:19.231Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","userId":14}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8040,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8040,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8040,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 22:07:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8040,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:19","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8041,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:32","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:32","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8041,"response":"projects/easy-notifications-post/messages/0:1754269654121793%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8041,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8041,"service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8041,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:07:33","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269654121793%d193f810d193f810","sentAt":"2025-08-04T01:07:33.354Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8041,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:07:33","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH-FOhlIrQ83K_30UcCdOW9n3ZmUxT7FoThiivEisjII0PmGHaZYQfcKC1mz-8HGtvziiYxIwCYlnj47AMt7-mq29pinrTP2FJOqYYnLlH6JLJfFl4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:37","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH-FOhlIrQ83K_30UcCdOW9n3ZmUxT7FoThiivEisjII0PmGHaZYQfcKC1mz-8HGtvziiYxIwCYlnj47AMt7-mq29pinrTP2FJOqYYnLlH6JLJfFl4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:37","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:08:37","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:08:37","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:08:37","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:08:38","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:08:38","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:08:38","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:08:39.034Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:39","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:08:39.037Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:39","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:08:39","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:39","type":"route","userId":14}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:08:39","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGKde9JZBS-kbuaw3d1QetGk7UjhVE8g2qCZfa5b-UxnteAmyFUjXsGuO_2ocYbo8492mkJEx3gInkqci7QlqcFXJdCuYWwE8gqsu3TsvHn5ZUt6A8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGKde9JZBS-kbuaw3d1QetGk7UjhVE8g2qCZfa5b-UxnteAmyFUjXsGuO_2ocYbo8492mkJEx3gInkqci7QlqcFXJdCuYWwE8gqsu3TsvHn5ZUt6A8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGKde9JZBS-kbuaw3d1QetGk7UjhVE8g2qCZfa5b-UxnteAmyFUjXsGuO_2ocYbo8492mkJEx3gInkqci7QlqcFXJdCuYWwE8gqsu3TsvHn5ZUt6A8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:08:40.803Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:08:40.818Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:08:40.819Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:40","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8042,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8042,"response":"projects/easy-notifications-post/messages/0:1754269731756316%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8042,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8042,"service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8042,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:08:50","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269731756316%d193f810d193f810","sentAt":"2025-08-04T01:08:50.995Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8042,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:08:50","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGKde9JZBS-kbuaw3d1QetGk7UjhVE8g2qCZfa5b-UxnteAmyFUjXsGuO_2ocYbo8492mkJEx3gInkqci7QlqcFXJdCuYWwE8gqsu3TsvHn5ZUt6A8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:02","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGKde9JZBS-kbuaw3d1QetGk7UjhVE8g2qCZfa5b-UxnteAmyFUjXsGuO_2ocYbo8492mkJEx3gInkqci7QlqcFXJdCuYWwE8gqsu3TsvHn5ZUt6A8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:02","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:09:03","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:09:03","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:09:03","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:09:04.611Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:09:04.659Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","userId":14}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:09:04","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:09:04","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:05","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEMLojDF_YFUMVIlUvagh6zIotBmazGVu-ZYvU2vJrkL5GuEOUqUIfaahl_fzinOx6qNWQgqowWYPnsX5Ti0ipg0SgSH9FaBWHzuiMnXBKop-Iy7QM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEMLojDF_YFUMVIlUvagh6zIotBmazGVu-ZYvU2vJrkL5GuEOUqUIfaahl_fzinOx6qNWQgqowWYPnsX5Ti0ipg0SgSH9FaBWHzuiMnXBKop-Iy7QM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEMLojDF_YFUMVIlUvagh6zIotBmazGVu-ZYvU2vJrkL5GuEOUqUIfaahl_fzinOx6qNWQgqowWYPnsX5Ti0ipg0SgSH9FaBWHzuiMnXBKop-Iy7QM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:05","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:09:06.287Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:06","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:09:06.301Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:06","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:09:06.305Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:06","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8043,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8043,"response":"projects/easy-notifications-post/messages/0:1754269787736989%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8043,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8043,"service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8043,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:09:46","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269787736989%d193f810d193f810","sentAt":"2025-08-04T01:09:46.976Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8043,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:09:46","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8044,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8044,"response":"projects/easy-notifications-post/messages/0:1754269838251980%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8044,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8044,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8044,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:10:37","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269838251980%d193f810d193f810","sentAt":"2025-08-04T01:10:37.485Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8044,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:37","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"OiOjvkDgDjvyqIxuAAAp","timestamp":"2025-08-03 22:10:44","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEMLojDF_YFUMVIlUvagh6zIotBmazGVu-ZYvU2vJrkL5GuEOUqUIfaahl_fzinOx6qNWQgqowWYPnsX5Ti0ipg0SgSH9FaBWHzuiMnXBKop-Iy7QM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:46","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:10:46.608Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:46","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:10:48","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:10:48","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:10:48","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:10:48","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:10:49","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:10:49","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:10:49","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:10:49","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGzpGl8Cnp88Z-Y8bYI0Z1vmTLFYf1Xx0FtSV4i48o8ShiV9f9p3dIrLJRj-Mr_QScFRzkGNPqayZTmzQqvZLRq7SwVG_pnAm1TAR0ADT0TZWGffEE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGzpGl8Cnp88Z-Y8bYI0Z1vmTLFYf1Xx0FtSV4i48o8ShiV9f9p3dIrLJRj-Mr_QScFRzkGNPqayZTmzQqvZLRq7SwVG_pnAm1TAR0ADT0TZWGffEE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:49","webTokenLength":0}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:10:49","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:10:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:49","type":"route","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:10:50.383Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:50","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:10:50.542Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:50","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8045,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:56","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:56","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8045,"response":"projects/easy-notifications-post/messages/0:1754269857779006%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8045,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8045,"service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8045,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:10:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269857779006%d193f810d193f810","sentAt":"2025-08-04T01:10:57.027Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8045,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:10:57","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGzpGl8Cnp88Z-Y8bYI0Z1vmTLFYf1Xx0FtSV4i48o8ShiV9f9p3dIrLJRj-Mr_QScFRzkGNPqayZTmzQqvZLRq7SwVG_pnAm1TAR0ADT0TZWGffEE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:03","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:03.682Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:03","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:11:04","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEpW6JZlZJtaeTLo2l1CT_6koxWRUit5iN91dXNgWlJYIprIwT3ckijR_U6OjAQQ8O0qyoEhnTynsLQq2ESFlbaGRq1JMap408YM_6V8UFxl5AxOtY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:06","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEpW6JZlZJtaeTLo2l1CT_6koxWRUit5iN91dXNgWlJYIprIwT3ckijR_U6OjAQQ8O0qyoEhnTynsLQq2ESFlbaGRq1JMap408YM_6V8UFxl5AxOtY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:06","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:07.215Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:07","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:07.425Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:07","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEpW6JZlZJtaeTLo2l1CT_6koxWRUit5iN91dXNgWlJYIprIwT3ckijR_U6OjAQQ8O0qyoEhnTynsLQq2ESFlbaGRq1JMap408YM_6V8UFxl5AxOtY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEpW6JZlZJtaeTLo2l1CT_6koxWRUit5iN91dXNgWlJYIprIwT3ckijR_U6OjAQQ8O0qyoEhnTynsLQq2ESFlbaGRq1JMap408YM_6V8UFxl5AxOtY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:14","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:11:14","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:11:14","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:11:14","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:15.015Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:15.019Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:11:15","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","type":"route","userId":14}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:11:15","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF4UeHnljuvL_4FBkQlbiJ4F-iMvh5F2dhxhjlDMyyvKjMHEs7quBshnNKpDOCjJmpblcMCJakNUw89EkwTEJIiCem893ZJLe3iLGe9oxMuSWxg-ao","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF4UeHnljuvL_4FBkQlbiJ4F-iMvh5F2dhxhjlDMyyvKjMHEs7quBshnNKpDOCjJmpblcMCJakNUw89EkwTEJIiCem893ZJLe3iLGe9oxMuSWxg-ao","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF4UeHnljuvL_4FBkQlbiJ4F-iMvh5F2dhxhjlDMyyvKjMHEs7quBshnNKpDOCjJmpblcMCJakNUw89EkwTEJIiCem893ZJLe3iLGe9oxMuSWxg-ao","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:17","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:18.376Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:18.381Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:18.388Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:18","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8046,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:20","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:20","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8046,"response":"projects/easy-notifications-post/messages/0:1754269882160551%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8046,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8046,"service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8046,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:11:21","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754269882160551%d193f810d193f810","sentAt":"2025-08-04T01:11:21.390Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8046,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:21","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF4UeHnljuvL_4FBkQlbiJ4F-iMvh5F2dhxhjlDMyyvKjMHEs7quBshnNKpDOCjJmpblcMCJakNUw89EkwTEJIiCem893ZJLe3iLGe9oxMuSWxg-ao","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:24","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:24.635Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:24","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:11:25","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHsbYIEZjJIT4vHR2JhLQH6kEIGungTkRmx7pupjD_o7QEu0pfilGhlxP4wtaBZvBPlSsBGuWCxfqSJ2xlo6MOObS5i-Gxzsbi1ZEK8HlwH6XxRgro","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHsbYIEZjJIT4vHR2JhLQH6kEIGungTkRmx7pupjD_o7QEu0pfilGhlxP4wtaBZvBPlSsBGuWCxfqSJ2xlo6MOObS5i-Gxzsbi1ZEK8HlwH6XxRgro","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:27","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:27.897Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:27","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:11:27.899Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:11:27","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHsbYIEZjJIT4vHR2JhLQH6kEIGungTkRmx7pupjD_o7QEu0pfilGhlxP4wtaBZvBPlSsBGuWCxfqSJ2xlo6MOObS5i-Gxzsbi1ZEK8HlwH6XxRgro","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:46","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:12:46.538Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:46","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:12:47","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8047,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:48","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:48","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8047,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8047,"service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8047,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 22:12:49","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8047,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnQB21h-eZzPsG8m8vphv3Q1cxv4BVZxf-pYyzPhLYCczwRoSebb-9wVtcIUVFu72w8JEerdDYqkna-gH_5IsvK5Bzc2O_4pJ591G1dTRhz7rj7RE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnQB21h-eZzPsG8m8vphv3Q1cxv4BVZxf-pYyzPhLYCczwRoSebb-9wVtcIUVFu72w8JEerdDYqkna-gH_5IsvK5Bzc2O_4pJ591G1dTRhz7rj7RE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:49","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:12:50.296Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:50","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:12:50.535Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:50","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"5Ch9TafGDuEFc0BqAAAr","timestamp":"2025-08-03 22:12:52","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:12:57","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:12:57","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:12:57","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"sUjznKAeeBvbOKU-AAAt","timestamp":"2025-08-03 22:12:57","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:12:57","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"sUjznKAeeBvbOKU-AAAt","timestamp":"2025-08-03 22:12:57","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:12:57","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:12:57","type":"query","userId":14}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:12:58","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:12:58","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"sUjznKAeeBvbOKU-AAAt","timestamp":"2025-08-03 22:12:58","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8048,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:21","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:21","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8048,"response":"projects/easy-notifications-post/messages/0:1754270002951283%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8048,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8048,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8048,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:13:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270002951283%d193f810d193f810","sentAt":"2025-08-04T01:13:22.187Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8048,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:22","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnQB21h-eZzPsG8m8vphv3Q1cxv4BVZxf-pYyzPhLYCczwRoSebb-9wVtcIUVFu72w8JEerdDYqkna-gH_5IsvK5Bzc2O_4pJ591G1dTRhz7rj7RE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:24","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:13:24.481Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:24","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"sUjznKAeeBvbOKU-AAAt","timestamp":"2025-08-03 22:13:25","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg9mig5dampz5gtEV-FpJGEChFsuh9Zun2IAzoQAtz2AEAvne7g5zjcHcGlqrZjZ-P9ph7z03nogOynlccEciQipYl6rfo3QR00iWVLWitKTruSlM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg9mig5dampz5gtEV-FpJGEChFsuh9Zun2IAzoQAtz2AEAvne7g5zjcHcGlqrZjZ-P9ph7z03nogOynlccEciQipYl6rfo3QR00iWVLWitKTruSlM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:27","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:13:27.915Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:27","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:13:28.131Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:28","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8049,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8049,"response":"projects/easy-notifications-post/messages/0:1754270011513688%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8049,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8049,"service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8049,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:13:30","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270011513688%d193f810d193f810","sentAt":"2025-08-04T01:13:30.761Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8049,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:13:30","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:14:24","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:14:24","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"wXD_bW-LHBq1MlhMAAAv","timestamp":"2025-08-03 22:14:24","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:14:24","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:14:25","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:14:26","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:14:26","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wXD_bW-LHBq1MlhMAAAv","timestamp":"2025-08-03 22:14:26","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:14:26","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wXD_bW-LHBq1MlhMAAAv","timestamp":"2025-08-03 22:14:26","totalClients":2,"type":"socket"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:14:26","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:14:46","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:14:46","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:14:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:14:48","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:14:48","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:14:48","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wXD_bW-LHBq1MlhMAAAv","timestamp":"2025-08-03 22:14:48","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:14:48","type":"route","userId":14}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:14:49","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:16:40","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:16:40","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:16:41","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:16:42","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:16:42","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:16:42","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wXD_bW-LHBq1MlhMAAAv","timestamp":"2025-08-03 22:16:43","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:43","type":"route","userId":14}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:16:43","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg9mig5dampz5gtEV-FpJGEChFsuh9Zun2IAzoQAtz2AEAvne7g5zjcHcGlqrZjZ-P9ph7z03nogOynlccEciQipYl6rfo3QR00iWVLWitKTruSlM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:51","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:52","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:16:52.408Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:52","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wXD_bW-LHBq1MlhMAAAv","timestamp":"2025-08-03 22:16:52","totalClients":2,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF4qDpFlqFrmhQ_uyrBxzpA6FPSeV1ZXToXyq4yzGRrMkC6tcffEHwOMwxUfTMUjN8o0pdNbqOrKhjF7SDhZEUCiql-KHjDFSazCWsAv7DRwGWjbCk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:55","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF4qDpFlqFrmhQ_uyrBxzpA6FPSeV1ZXToXyq4yzGRrMkC6tcffEHwOMwxUfTMUjN8o0pdNbqOrKhjF7SDhZEUCiql-KHjDFSazCWsAv7DRwGWjbCk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:55","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:55","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:16:55.962Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:55","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:56","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:16:56.187Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:56","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8050,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8050,"response":"projects/easy-notifications-post/messages/0:1754270218319791%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8050,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8050,"service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8050,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:16:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270218319791%d193f810d193f810","sentAt":"2025-08-04T01:16:57.549Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8050,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:16:57","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"wXD_bW-LHBq1MlhMAAAv","timestamp":"2025-08-03 22:17:01","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"sUjznKAeeBvbOKU-AAAt","timestamp":"2025-08-03 22:17:01","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"KHNXOQUnT7nlmrhdAAAx","timestamp":"2025-08-03 22:17:06","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"KHNXOQUnT7nlmrhdAAAx","timestamp":"2025-08-03 22:17:06","totalClients":1,"type":"socket"}
{"count":17,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"KHNXOQUnT7nlmrhdAAAx","timestamp":"2025-08-03 22:17:06","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:17:06","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8051,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:17:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8051,"response":"projects/easy-notifications-post/messages/0:1754270232037074%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8051,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8051,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8051,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:17:11","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270232037074%d193f810d193f810","sentAt":"2025-08-04T01:17:11.274Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8051,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:17:11","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8052,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8052,"response":"projects/easy-notifications-post/messages/0:1754270238200938%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8052,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8052,"service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8052,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:17:17","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270238200938%d193f810d193f810","sentAt":"2025-08-04T01:17:17.442Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8052,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:17:17","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:17:23","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:17:23","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:17:23","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"Rh5JdYkMVj3Xq5DVAAAz","timestamp":"2025-08-03 22:17:24","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:17:24","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:17:24","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:17:24","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Rh5JdYkMVj3Xq5DVAAAz","timestamp":"2025-08-03 22:17:24","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:17:24","type":"route","userId":14}
{"count":19,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:17:24","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Rh5JdYkMVj3Xq5DVAAAz","timestamp":"2025-08-03 22:17:25","totalClients":2,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF4qDpFlqFrmhQ_uyrBxzpA6FPSeV1ZXToXyq4yzGRrMkC6tcffEHwOMwxUfTMUjN8o0pdNbqOrKhjF7SDhZEUCiql-KHjDFSazCWsAv7DRwGWjbCk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:44","webTokenLength":0}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 22:18:46","type":"query"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF96gn1AZxyZXSS88zp3OOmvi0uiWZ7W7njgCskZruH0QPNm2Ej8Lx51uRMp6RbNyT2x3u80rXRxve9KvyCFIguwdtyXJY_gOjwT7r2SwnUdW2U7Qs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:48","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF96gn1AZxyZXSS88zp3OOmvi0uiWZ7W7njgCskZruH0QPNm2Ej8Lx51uRMp6RbNyT2x3u80rXRxve9KvyCFIguwdtyXJY_gOjwT7r2SwnUdW2U7Qs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:48","webTokenLength":0}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Rh5JdYkMVj3Xq5DVAAAz","timestamp":"2025-08-03 22:18:49","totalClients":2,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 22:18:50","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:18:50.305Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:50","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:18:50.485Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:50","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:50","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:18:50.571Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:50","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8053,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8053,"response":"projects/easy-notifications-post/messages/0:1754270336113228%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8053,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8053,"service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8053,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:18:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270336113228%d193f810d193f810","sentAt":"2025-08-04T01:18:55.359Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8053,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:18:55","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF96gn1AZxyZXSS88zp3OOmvi0uiWZ7W7njgCskZruH0QPNm2Ej8Lx51uRMp6RbNyT2x3u80rXRxve9KvyCFIguwdtyXJY_gOjwT7r2SwnUdW2U7Qs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF96gn1AZxyZXSS88zp3OOmvi0uiWZ7W7njgCskZruH0QPNm2Ej8Lx51uRMp6RbNyT2x3u80rXRxve9KvyCFIguwdtyXJY_gOjwT7r2SwnUdW2U7Qs","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:09","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:09","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:19:09","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:19:10","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:11.259Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:11.310Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"Rh5JdYkMVj3Xq5DVAAAz","timestamp":"2025-08-03 22:19:11","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","type":"route","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:19:11","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG4DYmucuJqOehrDerrAOAOgXfb0n40covViA-zXuLfcMFpZqyDi0PJG32rPDutx66W-TOSRCDcFR5gC5PLUTDNnMnEH914fdjyNSpYklbxDKbV5yU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG4DYmucuJqOehrDerrAOAOgXfb0n40covViA-zXuLfcMFpZqyDi0PJG32rPDutx66W-TOSRCDcFR5gC5PLUTDNnMnEH914fdjyNSpYklbxDKbV5yU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG4DYmucuJqOehrDerrAOAOgXfb0n40covViA-zXuLfcMFpZqyDi0PJG32rPDutx66W-TOSRCDcFR5gC5PLUTDNnMnEH914fdjyNSpYklbxDKbV5yU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:12","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:13.404Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:13","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:13.410Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:13","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:13.426Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:13","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"KHNXOQUnT7nlmrhdAAAx","timestamp":"2025-08-03 22:19:17","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"Rh5JdYkMVj3Xq5DVAAAz","timestamp":"2025-08-03 22:19:17","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"-zGxmfGIWHlCh7DfAAA1","timestamp":"2025-08-03 22:19:21","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"-zGxmfGIWHlCh7DfAAA1","timestamp":"2025-08-03 22:19:21","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"-zGxmfGIWHlCh7DfAAA1","timestamp":"2025-08-03 22:19:21","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"route","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:19:21","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8054,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8054,"response":"projects/easy-notifications-post/messages/0:1754270369854552%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8054,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8054,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8054,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:19:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270369854552%d193f810d193f810","sentAt":"2025-08-04T01:19:29.078Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8054,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:29","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8055,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:31","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:31","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:31","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:31","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8055,"response":"projects/easy-notifications-post/messages/0:1754270372791296%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8055,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8055,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8055,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:19:32","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270372791296%d193f810d193f810","sentAt":"2025-08-04T01:19:32.000Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8055,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:32","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8056,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:37","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:37","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8056,"response":"projects/easy-notifications-post/messages/0:1754270379158156%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8056,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8056,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8056,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:19:38","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270379158156%d193f810d193f810","sentAt":"2025-08-04T01:19:38.391Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8056,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:38","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG4DYmucuJqOehrDerrAOAOgXfb0n40covViA-zXuLfcMFpZqyDi0PJG32rPDutx66W-TOSRCDcFR5gC5PLUTDNnMnEH914fdjyNSpYklbxDKbV5yU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:39","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG4DYmucuJqOehrDerrAOAOgXfb0n40covViA-zXuLfcMFpZqyDi0PJG32rPDutx66W-TOSRCDcFR5gC5PLUTDNnMnEH914fdjyNSpYklbxDKbV5yU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:39","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:39","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:19:39","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:19:39","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:40.533Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:40.744Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:40","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"-zGxmfGIWHlCh7DfAAA1","timestamp":"2025-08-03 22:19:40","totalClients":1,"type":"socket"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:19:41","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGdpyprTAUmbMqE-7tAgrRHWtfTk9VREhJdkeSGDyJLQXjQQWD95hzb_d4V5JvBLgjwPxRhRc9zANyBfPT7uxtAj42AOGjndttsXJYYPxJGRQR9kPY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGdpyprTAUmbMqE-7tAgrRHWtfTk9VREhJdkeSGDyJLQXjQQWD95hzb_d4V5JvBLgjwPxRhRc9zANyBfPT7uxtAj42AOGjndttsXJYYPxJGRQR9kPY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGdpyprTAUmbMqE-7tAgrRHWtfTk9VREhJdkeSGDyJLQXjQQWD95hzb_d4V5JvBLgjwPxRhRc9zANyBfPT7uxtAj42AOGjndttsXJYYPxJGRQR9kPY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:43.496Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:43.520Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:43.525Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:43","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8057,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:47","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:47","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8057,"response":"projects/easy-notifications-post/messages/0:1754270388881831%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8057,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8057,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8057,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:19:48","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270388881831%d193f810d193f810","sentAt":"2025-08-04T01:19:48.122Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8057,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:48","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 22:19:52","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 22:19:52","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8058,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8058,"response":"projects/easy-notifications-post/messages/0:1754270395952983%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8058,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8058,"service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8058,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:19:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270395952983%d193f810d193f810","sentAt":"2025-08-04T01:19:55.172Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8058,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:55","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGdpyprTAUmbMqE-7tAgrRHWtfTk9VREhJdkeSGDyJLQXjQQWD95hzb_d4V5JvBLgjwPxRhRc9zANyBfPT7uxtAj42AOGjndttsXJYYPxJGRQR9kPY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:59","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:59","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:19:59.464Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:19:59","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"-zGxmfGIWHlCh7DfAAA1","timestamp":"2025-08-03 22:20:00","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFPWMnh8-xDAiWAUfYvBXRZg2M02EXHz0IO-AZD5TmO9_PCCK3EYwcb4UV6UtBXO0Yq8DKKy5mLGYfd_ZMZE_E6ioramlZVVdFHnOXa5PGmYQ2sFVc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:02","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFPWMnh8-xDAiWAUfYvBXRZg2M02EXHz0IO-AZD5TmO9_PCCK3EYwcb4UV6UtBXO0Yq8DKKy5mLGYfd_ZMZE_E6ioramlZVVdFHnOXa5PGmYQ2sFVc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:02","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:20:02.976Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:02","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:20:03.201Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:03","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFPWMnh8-xDAiWAUfYvBXRZg2M02EXHz0IO-AZD5TmO9_PCCK3EYwcb4UV6UtBXO0Yq8DKKy5mLGYfd_ZMZE_E6ioramlZVVdFHnOXa5PGmYQ2sFVc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFPWMnh8-xDAiWAUfYvBXRZg2M02EXHz0IO-AZD5TmO9_PCCK3EYwcb4UV6UtBXO0Yq8DKKy5mLGYfd_ZMZE_E6ioramlZVVdFHnOXa5PGmYQ2sFVc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:08","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:20:08","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:20:08","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:20:09.228Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:20:09.248Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"-zGxmfGIWHlCh7DfAAA1","timestamp":"2025-08-03 22:20:09","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","type":"route","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:20:09","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFBtEsrfcP4uW8ivjSeeUJ_lS3w9wyecJHALTKkykcHr0Ti3tIsLbUH8E1eb5EvtBfPv2Fhf6Y1PJV1BcmQy2G_gae5aTQWk6PmQUpVp9xboLoUCJw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFBtEsrfcP4uW8ivjSeeUJ_lS3w9wyecJHALTKkykcHr0Ti3tIsLbUH8E1eb5EvtBfPv2Fhf6Y1PJV1BcmQy2G_gae5aTQWk6PmQUpVp9xboLoUCJw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFBtEsrfcP4uW8ivjSeeUJ_lS3w9wyecJHALTKkykcHr0Ti3tIsLbUH8E1eb5EvtBfPv2Fhf6Y1PJV1BcmQy2G_gae5aTQWk6PmQUpVp9xboLoUCJw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:20:12.608Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:20:12.617Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:20:12.623Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:12","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8059,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8059,"response":"projects/easy-notifications-post/messages/0:1754270458675417%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8059,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8059,"service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8059,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:20:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270458675417%d193f810d193f810","sentAt":"2025-08-04T01:20:57.904Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8059,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:20:57","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"-zGxmfGIWHlCh7DfAAA1","timestamp":"2025-08-03 22:21:05","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:21:09","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:21:09","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:21:09","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"_XqC_XX7nnZ-gjHcAAA3","timestamp":"2025-08-03 22:21:09","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:21:11","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:21:11","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:21:11","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_XqC_XX7nnZ-gjHcAAA3","timestamp":"2025-08-03 22:21:11","totalClients":1,"type":"socket"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:21:11","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_XqC_XX7nnZ-gjHcAAA3","timestamp":"2025-08-03 22:21:11","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:11","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8060,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8060,"response":"projects/easy-notifications-post/messages/0:1754270475803523%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8060,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8060,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8060,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:21:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270475803523%d193f810d193f810","sentAt":"2025-08-04T01:21:15.031Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8060,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:15","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8061,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:27","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:27","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8061,"response":"projects/easy-notifications-post/messages/0:1754270489104864%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8061,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8061,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8061,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:21:28","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270489104864%d193f810d193f810","sentAt":"2025-08-04T01:21:28.337Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8061,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:28","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFBtEsrfcP4uW8ivjSeeUJ_lS3w9wyecJHALTKkykcHr0Ti3tIsLbUH8E1eb5EvtBfPv2Fhf6Y1PJV1BcmQy2G_gae5aTQWk6PmQUpVp9xboLoUCJw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFBtEsrfcP4uW8ivjSeeUJ_lS3w9wyecJHALTKkykcHr0Ti3tIsLbUH8E1eb5EvtBfPv2Fhf6Y1PJV1BcmQy2G_gae5aTQWk6PmQUpVp9xboLoUCJw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:43","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:21:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:21:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:21:44","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:21:45.377Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:21:45.452Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"_XqC_XX7nnZ-gjHcAAA3","timestamp":"2025-08-03 22:21:45","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","type":"route","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:21:45","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF0_NxB-kd6HFN3NgOQNDeESwnDj5CygXHd1587_LZ8G6WWU24CRaxX_ndFnF0StoopfgU1wPpg-snyVba4R-BSjX3w_uibCfvHcW13E1J3CLTg_XM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:46","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF0_NxB-kd6HFN3NgOQNDeESwnDj5CygXHd1587_LZ8G6WWU24CRaxX_ndFnF0StoopfgU1wPpg-snyVba4R-BSjX3w_uibCfvHcW13E1J3CLTg_XM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:46","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF0_NxB-kd6HFN3NgOQNDeESwnDj5CygXHd1587_LZ8G6WWU24CRaxX_ndFnF0StoopfgU1wPpg-snyVba4R-BSjX3w_uibCfvHcW13E1J3CLTg_XM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:46","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:21:47.311Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:21:47.320Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:47","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:21:47.322Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:47","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8062,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8062,"response":"projects/easy-notifications-post/messages/0:1754270509269453%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8062,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8062,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8062,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:21:48","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270509269453%d193f810d193f810","sentAt":"2025-08-04T01:21:48.489Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8062,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:48","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8063,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8063,"response":"projects/easy-notifications-post/messages/0:1754270513090238%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8063,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8063,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8063,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:21:52","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270513090238%d193f810d193f810","sentAt":"2025-08-04T01:21:52.318Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8063,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:52","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8064,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8064,"response":"projects/easy-notifications-post/messages/0:1754270516996014%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8064,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8064,"service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8064,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:21:56","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270516996014%d193f810d193f810","sentAt":"2025-08-04T01:21:56.210Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8064,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:21:56","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"_XqC_XX7nnZ-gjHcAAA3","timestamp":"2025-08-03 22:21:58","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:22:03","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:22:03","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:22:03","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"4Wz4Bx5ssN4hzwtNAAA5","timestamp":"2025-08-03 22:22:03","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:22:03","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:22:03","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:22:03","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4Wz4Bx5ssN4hzwtNAAA5","timestamp":"2025-08-03 22:22:03","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:03","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4Wz4Bx5ssN4hzwtNAAA5","timestamp":"2025-08-03 22:22:04","totalClients":1,"type":"socket"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:22:04","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8065,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8065,"response":"projects/easy-notifications-post/messages/0:1754270529720584%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8065,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8065,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8065,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:22:08","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270529720584%d193f810d193f810","sentAt":"2025-08-04T01:22:08.948Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8065,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:08","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8066,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8066,"response":"projects/easy-notifications-post/messages/0:1754270534561890%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8066,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8066,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8066,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:22:13","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270534561890%d193f810d193f810","sentAt":"2025-08-04T01:22:13.788Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8066,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:13","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8067,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:32","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:32","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8067,"response":"projects/easy-notifications-post/messages/0:1754270554154204%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8067,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8067,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8067,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:22:33","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270554154204%d193f810d193f810","sentAt":"2025-08-04T01:22:33.378Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8067,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:33","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF0_NxB-kd6HFN3NgOQNDeESwnDj5CygXHd1587_LZ8G6WWU24CRaxX_ndFnF0StoopfgU1wPpg-snyVba4R-BSjX3w_uibCfvHcW13E1J3CLTg_XM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:39","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF0_NxB-kd6HFN3NgOQNDeESwnDj5CygXHd1587_LZ8G6WWU24CRaxX_ndFnF0StoopfgU1wPpg-snyVba4R-BSjX3w_uibCfvHcW13E1J3CLTg_XM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:39","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:22:40","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:22:40","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:22:40","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:22:40.802Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:40","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:22:41","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:22:41","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:22:41","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:41","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:22:41.362Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:41","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"4Wz4Bx5ssN4hzwtNAAA5","timestamp":"2025-08-03 22:22:41","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:41","type":"route","userId":14}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:22:41","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGmK28ssa1uMLklGss9ajrn3a4ULQT-hIUhDZXWQ-YZ7pkL8U4vZwcwkmyBC4oL5m9lDMRgxrqW3BIt02vQSdZHy1VMj9nAM0DnL92mC40P6twa0lA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGmK28ssa1uMLklGss9ajrn3a4ULQT-hIUhDZXWQ-YZ7pkL8U4vZwcwkmyBC4oL5m9lDMRgxrqW3BIt02vQSdZHy1VMj9nAM0DnL92mC40P6twa0lA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGmK28ssa1uMLklGss9ajrn3a4ULQT-hIUhDZXWQ-YZ7pkL8U4vZwcwkmyBC4oL5m9lDMRgxrqW3BIt02vQSdZHy1VMj9nAM0DnL92mC40P6twa0lA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:22:43.715Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:22:43.729Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:22:43.731Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:43","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8068,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8068,"response":"projects/easy-notifications-post/messages/0:1754270566507260%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8068,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8068,"service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8068,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:22:45","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270566507260%d193f810d193f810","sentAt":"2025-08-04T01:22:45.828Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8068,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:22:45","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"4Wz4Bx5ssN4hzwtNAAA5","timestamp":"2025-08-03 22:23:01","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:23:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:23:05","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"p2twxGSsaXiK2kQPAAA7","timestamp":"2025-08-03 22:23:05","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:23:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:23:06","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"p2twxGSsaXiK2kQPAAA7","timestamp":"2025-08-03 22:23:06","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:23:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:23:06","type":"query","userId":14}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:23:07","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"p2twxGSsaXiK2kQPAAA7","timestamp":"2025-08-03 22:23:07","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:07","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8069,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:07","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:07","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8069,"response":"projects/easy-notifications-post/messages/0:1754270588776982%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8069,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8069,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8069,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:23:08","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270588776982%d193f810d193f810","sentAt":"2025-08-04T01:23:08.023Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8069,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:08","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGmK28ssa1uMLklGss9ajrn3a4ULQT-hIUhDZXWQ-YZ7pkL8U4vZwcwkmyBC4oL5m9lDMRgxrqW3BIt02vQSdZHy1VMj9nAM0DnL92mC40P6twa0lA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:25","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGmK28ssa1uMLklGss9ajrn3a4ULQT-hIUhDZXWQ-YZ7pkL8U4vZwcwkmyBC4oL5m9lDMRgxrqW3BIt02vQSdZHy1VMj9nAM0DnL92mC40P6twa0lA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:25","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:23:25","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:23:25","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:23:25","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:23:26","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:23:27.180Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:27","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:23:27.438Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:27","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:23:27","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:23:27","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"p2twxGSsaXiK2kQPAAA7","timestamp":"2025-08-03 22:23:27","totalClients":1,"type":"socket"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:23:27","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:27","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFiFBveWrDIlWlpoiFqT93q57KyntIL2-RL2gu7fIkIITRcvPUH1K1DETLyb6rrNnFxv57BuWoIBa8u_4D9hRc2fO6KgerJo31oc8RBPbEKz9VkC6g","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFiFBveWrDIlWlpoiFqT93q57KyntIL2-RL2gu7fIkIITRcvPUH1K1DETLyb6rrNnFxv57BuWoIBa8u_4D9hRc2fO6KgerJo31oc8RBPbEKz9VkC6g","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFiFBveWrDIlWlpoiFqT93q57KyntIL2-RL2gu7fIkIITRcvPUH1K1DETLyb6rrNnFxv57BuWoIBa8u_4D9hRc2fO6KgerJo31oc8RBPbEKz9VkC6g","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:28","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:23:29.102Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:23:29.103Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:23:29.113Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:29","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8070,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8070,"response":"projects/easy-notifications-post/messages/0:1754270611199564%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8070,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8070,"service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8070,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:23:30","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270611199564%d193f810d193f810","sentAt":"2025-08-04T01:23:30.419Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8070,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:23:30","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"p2twxGSsaXiK2kQPAAA7","timestamp":"2025-08-03 22:24:05","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:24:09","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:24:09","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"51IjxuAClOFbJBHmAAA9","timestamp":"2025-08-03 22:24:09","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:24:09","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:24:11","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:24:11","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:24:11","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"51IjxuAClOFbJBHmAAA9","timestamp":"2025-08-03 22:24:11","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:24:11","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"51IjxuAClOFbJBHmAAA9","timestamp":"2025-08-03 22:24:11","totalClients":1,"type":"socket"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:24:12","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8071,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:24:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8071,"response":"projects/easy-notifications-post/messages/0:1754270665137449%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8071,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8071,"service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8071,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:24:24","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270665137449%d193f810d193f810","sentAt":"2025-08-04T01:24:24.366Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8071,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:24:24","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:24:55","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"51IjxuAClOFbJBHmAAA9","timestamp":"2025-08-03 22:24:56","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:24:57","type":"query"}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:24:57","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"51IjxuAClOFbJBHmAAA9","timestamp":"2025-08-03 22:25:23","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:25:27","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:25:27","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:25:27","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"N9ia5BrJO6p2-oOZAAA_","timestamp":"2025-08-03 22:25:27","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:25:28","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:25:28","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:25:28","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"N9ia5BrJO6p2-oOZAAA_","timestamp":"2025-08-03 22:25:28","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"N9ia5BrJO6p2-oOZAAA_","timestamp":"2025-08-03 22:25:29","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"route","userId":14}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8072,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8072,"response":"projects/easy-notifications-post/messages/0:1754270730499335%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8072,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8072,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8072,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:25:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270730499335%d193f810d193f810","sentAt":"2025-08-04T01:25:29.732Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8072,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:25:29","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8073,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8073,"response":"projects/easy-notifications-post/messages/0:1754270733133669%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8073,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8073,"service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8073,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:25:32","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270733133669%d193f810d193f810","sentAt":"2025-08-04T01:25:32.348Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8073,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:25:32","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFiFBveWrDIlWlpoiFqT93q57KyntIL2-RL2gu7fIkIITRcvPUH1K1DETLyb6rrNnFxv57BuWoIBa8u_4D9hRc2fO6KgerJo31oc8RBPbEKz9VkC6g","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFiFBveWrDIlWlpoiFqT93q57KyntIL2-RL2gu7fIkIITRcvPUH1K1DETLyb6rrNnFxv57BuWoIBa8u_4D9hRc2fO6KgerJo31oc8RBPbEKz9VkC6g","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:12","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:26:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:26:12","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:26:12","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:26:14","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:26:14.569Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:14","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:26:14","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:26:14","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:26:15.349Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:15","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"N9ia5BrJO6p2-oOZAAA_","timestamp":"2025-08-03 22:26:15","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:15","type":"route","userId":14}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:26:15","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHHF92Bxk6rnqA1OIAVQ5dXnRNAUMNrHuT-I-6q582nAYXrZEOK7NR1W4lrkfoGLUfXPIMy3HQKauEFP-k24IYpS97L_a8BG8YVtpXCwnBs_JUuPLg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHHF92Bxk6rnqA1OIAVQ5dXnRNAUMNrHuT-I-6q582nAYXrZEOK7NR1W4lrkfoGLUfXPIMy3HQKauEFP-k24IYpS97L_a8BG8YVtpXCwnBs_JUuPLg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHHF92Bxk6rnqA1OIAVQ5dXnRNAUMNrHuT-I-6q582nAYXrZEOK7NR1W4lrkfoGLUfXPIMy3HQKauEFP-k24IYpS97L_a8BG8YVtpXCwnBs_JUuPLg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:15","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:26:16.430Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:16","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:26:16.454Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:16","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:26:16.464Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:26:16","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:26:33","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"N9ia5BrJO6p2-oOZAAA_","timestamp":"2025-08-03 22:26:34","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:26:34","type":"query"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:26:35","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"N9ia5BrJO6p2-oOZAAA_","timestamp":"2025-08-03 22:26:44","totalClients":1,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:26:44","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:26:44","type":"query"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:26:45","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"N9ia5BrJO6p2-oOZAAA_","timestamp":"2025-08-03 22:27:02","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:27:07","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:27:07","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:27:07","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"IWqWHOfatbZm6713AABB","timestamp":"2025-08-03 22:27:07","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:27:09","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:27:09","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:27:09","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IWqWHOfatbZm6713AABB","timestamp":"2025-08-03 22:27:09","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:27:09","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IWqWHOfatbZm6713AABB","timestamp":"2025-08-03 22:27:09","totalClients":1,"type":"socket"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:27:09","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:27:25","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IWqWHOfatbZm6713AABB","timestamp":"2025-08-03 22:27:26","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:27:27","type":"query"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:27:27","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"IWqWHOfatbZm6713AABB","timestamp":"2025-08-03 22:27:36","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:27:41","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:27:41","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:27:41","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"o2RdeicAAjP-pTMzAABD","timestamp":"2025-08-03 22:27:41","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:27:42","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"o2RdeicAAjP-pTMzAABD","timestamp":"2025-08-03 22:27:42","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:27:42","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:27:43","type":"query","userId":14}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:27:43","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:27:43","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"o2RdeicAAjP-pTMzAABD","timestamp":"2025-08-03 22:27:43","totalClients":1,"type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"o2RdeicAAjP-pTMzAABD","timestamp":"2025-08-03 22:28:02","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:28:08","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:28:08","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:28:08","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"BcSbI1yI8-j2H9YwAABF","timestamp":"2025-08-03 22:28:08","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:28:09","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"BcSbI1yI8-j2H9YwAABF","timestamp":"2025-08-03 22:28:10","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:28:10","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:28:10","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"BcSbI1yI8-j2H9YwAABF","timestamp":"2025-08-03 22:28:10","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:28:10","type":"route","userId":14}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:28:10","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8074,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:28:36","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:36","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8074,"response":"projects/easy-notifications-post/messages/0:1754270917909531%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8074,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8074,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8074,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:28:37","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270917909531%d193f810d193f810","sentAt":"2025-08-04T01:28:37.124Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8074,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:28:37","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8075,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:28:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8075,"response":"projects/easy-notifications-post/messages/0:1754270927151877%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8075,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8075,"service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8075,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:28:46","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270927151877%d193f810d193f810","sentAt":"2025-08-04T01:28:46.359Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8075,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:28:46","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHHF92Bxk6rnqA1OIAVQ5dXnRNAUMNrHuT-I-6q582nAYXrZEOK7NR1W4lrkfoGLUfXPIMy3HQKauEFP-k24IYpS97L_a8BG8YVtpXCwnBs_JUuPLg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:28:59","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHHF92Bxk6rnqA1OIAVQ5dXnRNAUMNrHuT-I-6q582nAYXrZEOK7NR1W4lrkfoGLUfXPIMy3HQKauEFP-k24IYpS97L_a8BG8YVtpXCwnBs_JUuPLg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:28:59","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:28:59","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:28:59","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:28:59","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:29:01.067Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:29:01.068Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"BcSbI1yI8-j2H9YwAABF","timestamp":"2025-08-03 22:29:01","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","type":"route","userId":14}
{"count":18,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:29:01","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvFQUp-wyNtE6MxVEjVyChGxJrUg-ftwtilc5L1VPtkLRbAwxrbEtKX93oau7vLas_0TJI7EKEODIMHW3uavyHIliya8AjhU_-8VW_is-6YrHWaok","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:02","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvFQUp-wyNtE6MxVEjVyChGxJrUg-ftwtilc5L1VPtkLRbAwxrbEtKX93oau7vLas_0TJI7EKEODIMHW3uavyHIliya8AjhU_-8VW_is-6YrHWaok","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:02","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvFQUp-wyNtE6MxVEjVyChGxJrUg-ftwtilc5L1VPtkLRbAwxrbEtKX93oau7vLas_0TJI7EKEODIMHW3uavyHIliya8AjhU_-8VW_is-6YrHWaok","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:02","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:29:03.159Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:29:03.161Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:29:03.164Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8076,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8076,"response":"projects/easy-notifications-post/messages/0:1754270944921307%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8076,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8076,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8076,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:29:04","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270944921307%d193f810d193f810","sentAt":"2025-08-04T01:29:04.131Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8076,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:04","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8077,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8077,"response":"projects/easy-notifications-post/messages/0:1754270948475408%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8077,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8077,"service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8077,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:29:07","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754270948475408%d193f810d193f810","sentAt":"2025-08-04T01:29:07.684Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8077,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:29:07","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8078,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8078,"response":"projects/easy-notifications-post/messages/0:1754271013511586%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8078,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8078,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8078,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:30:12","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271013511586%d193f810d193f810","sentAt":"2025-08-04T01:30:12.796Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8078,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:30:12","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8079,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8079,"response":"projects/easy-notifications-post/messages/0:1754271054511743%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8079,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8079,"service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8079,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:30:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271054511743%d193f810d193f810","sentAt":"2025-08-04T01:30:53.754Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8079,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:30:53","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8080,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8080,"response":"projects/easy-notifications-post/messages/0:1754271114634159%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8080,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8080,"service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8080,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:31:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271114634159%d193f810d193f810","sentAt":"2025-08-04T01:31:53.841Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8080,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:31:53","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"BcSbI1yI8-j2H9YwAABF","timestamp":"2025-08-03 22:32:03","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:32:07","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:32:07","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:32:07","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"vRK9V2-kpB51QwaqAABH","timestamp":"2025-08-03 22:32:07","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:32:09","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:32:09","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:32:09","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"vRK9V2-kpB51QwaqAABH","timestamp":"2025-08-03 22:32:09","totalClients":1,"type":"socket"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:32:09","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:32:09","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"vRK9V2-kpB51QwaqAABH","timestamp":"2025-08-03 22:32:09","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8081,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8081,"response":"projects/easy-notifications-post/messages/0:1754271136622468%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8081,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8081,"service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8081,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:32:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271136622468%d193f810d193f810","sentAt":"2025-08-04T01:32:15.833Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8081,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:32:15","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8082,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8082,"response":"projects/easy-notifications-post/messages/0:1754271184361980%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8082,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8082,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8082,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:33:03","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271184361980%d193f810d193f810","sentAt":"2025-08-04T01:33:03.578Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8082,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:33:03","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8083,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8083,"response":"projects/easy-notifications-post/messages/0:1754271204536141%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8083,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8083,"service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8083,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:33:23","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271204536141%d193f810d193f810","sentAt":"2025-08-04T01:33:23.740Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8083,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:33:23","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 22:36:38","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 22:36:39","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"vRK9V2-kpB51QwaqAABH","timestamp":"2025-08-03 22:36:41","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:36:45","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:36:45","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:36:45","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"B14N1Ii1kLtjJLBcAABJ","timestamp":"2025-08-03 22:36:45","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:36:45","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:36:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:36:45","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"B14N1Ii1kLtjJLBcAABJ","timestamp":"2025-08-03 22:36:46","totalClients":1,"type":"socket"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:36:46","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:36:46","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"B14N1Ii1kLtjJLBcAABJ","timestamp":"2025-08-03 22:36:46","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8084,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8084,"response":"projects/easy-notifications-post/messages/0:1754271418733628%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8084,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8084,"service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8084,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:36:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271418733628%d193f810d193f810","sentAt":"2025-08-04T01:36:57.930Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8084,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:36:57","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"B14N1Ii1kLtjJLBcAABJ","timestamp":"2025-08-03 22:40:00","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvFQUp-wyNtE6MxVEjVyChGxJrUg-ftwtilc5L1VPtkLRbAwxrbEtKX93oau7vLas_0TJI7EKEODIMHW3uavyHIliya8AjhU_-8VW_is-6YrHWaok","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:03","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:04.964Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:04","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"jRJlf9Fg628r2kv9AABL","timestamp":"2025-08-03 22:40:06","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","type":"query"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGrcR7A7aLGIgkY-bLU2A2O_sq1GTouJDJJKXNiViFtxhvG0WoDh0-zeJYRw11J6qJeh5LbD3vr29G76Jf8-sjnYHaQizdM4lPG3UfXWFKPMPBNcQ0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGrcR7A7aLGIgkY-bLU2A2O_sq1GTouJDJJKXNiViFtxhvG0WoDh0-zeJYRw11J6qJeh5LbD3vr29G76Jf8-sjnYHaQizdM4lPG3UfXWFKPMPBNcQ0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","webTokenLength":0}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:40:06","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jRJlf9Fg628r2kv9AABL","timestamp":"2025-08-03 22:40:07","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:07","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jRJlf9Fg628r2kv9AABL","timestamp":"2025-08-03 22:40:07","totalClients":1,"type":"socket"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:40:08","type":"message","userId":"14"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:08.049Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:08.063Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:08","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8085,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8085,"response":"projects/easy-notifications-post/messages/0:1754271611510605%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8085,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8085,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8085,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:40:10","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271611510605%d193f810d193f810","sentAt":"2025-08-04T01:40:10.695Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8085,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:10","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8086,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:16","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:16","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8086,"response":"projects/easy-notifications-post/messages/0:1754271617946850%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8086,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8086,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8086,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:40:17","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271617946850%d193f810d193f810","sentAt":"2025-08-04T01:40:17.152Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8086,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:17","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGrcR7A7aLGIgkY-bLU2A2O_sq1GTouJDJJKXNiViFtxhvG0WoDh0-zeJYRw11J6qJeh5LbD3vr29G76Jf8-sjnYHaQizdM4lPG3UfXWFKPMPBNcQ0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGrcR7A7aLGIgkY-bLU2A2O_sq1GTouJDJJKXNiViFtxhvG0WoDh0-zeJYRw11J6qJeh5LbD3vr29G76Jf8-sjnYHaQizdM4lPG3UfXWFKPMPBNcQ0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:18.989Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:18.993Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:18","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:40:19","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:40:19","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jRJlf9Fg628r2kv9AABL","timestamp":"2025-08-03 22:40:19","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:19","type":"route","userId":14}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:40:19","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOGLe7wtCnwinZmY2uy7amwaRHkjLgKyOviCXRCdL_WwrNZq40XdBvrzh0sf4iW7sbiBjIy_X4JgVJTtArPFzcwk11S4MCm4EJ_HS-g_T8ZsxKiSU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOGLe7wtCnwinZmY2uy7amwaRHkjLgKyOviCXRCdL_WwrNZq40XdBvrzh0sf4iW7sbiBjIy_X4JgVJTtArPFzcwk11S4MCm4EJ_HS-g_T8ZsxKiSU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOGLe7wtCnwinZmY2uy7amwaRHkjLgKyOviCXRCdL_WwrNZq40XdBvrzh0sf4iW7sbiBjIy_X4JgVJTtArPFzcwk11S4MCm4EJ_HS-g_T8ZsxKiSU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:21","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:22.110Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:22.112Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:40:22.113Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:22","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8087,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8087,"response":"projects/easy-notifications-post/messages/0:1754271624843699%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8087,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8087,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8087,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:40:24","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271624843699%d193f810d193f810","sentAt":"2025-08-04T01:40:24.039Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8087,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:24","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8088,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:26","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:26","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8088,"response":"projects/easy-notifications-post/messages/0:1754271627972817%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8088,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8088,"service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8088,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:40:27","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271627972817%d193f810d193f810","sentAt":"2025-08-04T01:40:27.187Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8088,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:40:27","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:41:30","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jRJlf9Fg628r2kv9AABL","timestamp":"2025-08-03 22:41:31","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:41:31","type":"query"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:41:31","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8089,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:41:39","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:39","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:39","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:39","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8089,"response":"projects/easy-notifications-post/messages/0:1754271700835943%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8089,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8089,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8089,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:41:40","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271700835943%d193f810d193f810","sentAt":"2025-08-04T01:41:40.065Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8089,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:41:40","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"jRJlf9Fg628r2kv9AABL","timestamp":"2025-08-03 22:41:45","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:41:49","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:41:50","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:41:50","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:41:50","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:41:51","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:41:51","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:41:51","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:41:51","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:41:52","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:41:52","type":"route","userId":14}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:41:52","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8090,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8090,"response":"projects/easy-notifications-post/messages/0:1754271718749011%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8090,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8090,"service":"notifications-app-api","timestamp":"2025-08-03 22:41:58","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8090,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:41:58","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271718749011%d193f810d193f810","sentAt":"2025-08-04T01:41:57.979Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8090,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:41:58","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOGLe7wtCnwinZmY2uy7amwaRHkjLgKyOviCXRCdL_WwrNZq40XdBvrzh0sf4iW7sbiBjIy_X4JgVJTtArPFzcwk11S4MCm4EJ_HS-g_T8ZsxKiSU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:06","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOGLe7wtCnwinZmY2uy7amwaRHkjLgKyOviCXRCdL_WwrNZq40XdBvrzh0sf4iW7sbiBjIy_X4JgVJTtArPFzcwk11S4MCm4EJ_HS-g_T8ZsxKiSU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:06","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:42:06","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:42:06","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:42:07.485Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:42:07.932Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:07","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:08","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:42:08","totalClients":1,"type":"socket"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:42:08","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnIf7oqP1D5fyS-cNuI2JDgD74jr0pSKu50l-Ql98W1CP_e_lf9FGX3m8xXSguDm-l7HIX0P-GZTO7w-X7d8t3H2syRac9naBwJAIWg0GscVbg2EA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnIf7oqP1D5fyS-cNuI2JDgD74jr0pSKu50l-Ql98W1CP_e_lf9FGX3m8xXSguDm-l7HIX0P-GZTO7w-X7d8t3H2syRac9naBwJAIWg0GscVbg2EA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnIf7oqP1D5fyS-cNuI2JDgD74jr0pSKu50l-Ql98W1CP_e_lf9FGX3m8xXSguDm-l7HIX0P-GZTO7w-X7d8t3H2syRac9naBwJAIWg0GscVbg2EA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:09","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:42:10.386Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:42:10.395Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:42:10.408Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8091,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8091,"response":"projects/easy-notifications-post/messages/0:1754271731962970%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8091,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8091,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8091,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:42:11","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271731962970%d193f810d193f810","sentAt":"2025-08-04T01:42:11.152Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8091,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:11","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8092,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8092,"response":"projects/easy-notifications-post/messages/0:1754271738666521%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8092,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8092,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8092,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:42:17","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271738666521%d193f810d193f810","sentAt":"2025-08-04T01:42:17.845Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8092,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:17","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8093,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8093,"response":"projects/easy-notifications-post/messages/0:1754271743587156%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8093,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8093,"service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8093,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:42:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271743587156%d193f810d193f810","sentAt":"2025-08-04T01:42:22.777Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8093,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:42:22","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:43:49","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:43:50","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:43:50","type":"query"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:43:51","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:44:12","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:44:13","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:44:13","type":"query"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:44:14","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:44:26","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:44:27","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:44:27","type":"query"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:44:27","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"jVpdZFAdxcSYp2_yAABN","timestamp":"2025-08-03 22:44:39","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:44:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:44:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:44:44","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"jZEV48wyX1Pj56B5AABP","timestamp":"2025-08-03 22:44:44","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:44:46","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:44:46","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:44:46","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jZEV48wyX1Pj56B5AABP","timestamp":"2025-08-03 22:44:46","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:44:46","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jZEV48wyX1Pj56B5AABP","timestamp":"2025-08-03 22:44:46","totalClients":1,"type":"socket"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:44:46","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8094,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8094,"response":"projects/easy-notifications-post/messages/0:1754271891668924%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8094,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8094,"service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8094,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:44:50","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271891668924%d193f810d193f810","sentAt":"2025-08-04T01:44:50.862Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8094,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:44:50","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 22:44:59","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 22:44:59","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8095,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:45:01","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:01","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8095,"response":"projects/easy-notifications-post/messages/0:1754271903109381%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8095,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8095,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8095,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:45:02","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271903109381%d193f810d193f810","sentAt":"2025-08-04T01:45:02.298Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8095,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:45:02","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8096,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8096,"response":"projects/easy-notifications-post/messages/0:1754271905519499%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8096,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8096,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8096,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:45:04","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271905519499%d193f810d193f810","sentAt":"2025-08-04T01:45:04.707Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8096,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:45:04","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8097,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8097,"response":"projects/easy-notifications-post/messages/0:1754271910429185%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8097,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8097,"service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8097,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:45:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754271910429185%d193f810d193f810","sentAt":"2025-08-04T01:45:09.623Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8097,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:45:09","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:45:50","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jZEV48wyX1Pj56B5AABP","timestamp":"2025-08-03 22:45:51","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:45:52","type":"query"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:45:52","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:46:57","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:46:57","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:46:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:46:58","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:46:58","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:46:58","type":"query","userId":14}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:46:59","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"jZEV48wyX1Pj56B5AABP","timestamp":"2025-08-03 22:46:59","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:46:59","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8098,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:11","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:11","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8098,"response":"projects/easy-notifications-post/messages/0:1754272033471689%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8098,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8098,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8098,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:47:12","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272033471689%d193f810d193f810","sentAt":"2025-08-04T01:47:12.686Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8098,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:12","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"jZEV48wyX1Pj56B5AABP","timestamp":"2025-08-03 22:47:16","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"ohXdMNseda27FNy6AABR","timestamp":"2025-08-03 22:47:21","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ohXdMNseda27FNy6AABR","timestamp":"2025-08-03 22:47:21","totalClients":1,"type":"socket"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:21","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ohXdMNseda27FNy6AABR","timestamp":"2025-08-03 22:47:21","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8099,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8099,"response":"projects/easy-notifications-post/messages/0:1754272047687898%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8099,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8099,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8099,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:47:26","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272047687898%d193f810d193f810","sentAt":"2025-08-04T01:47:26.865Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8099,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:26","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:47:42","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:47:42","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:47:42","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:47:42","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:47:43","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:47:43","totalClients":2,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:47:44","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:47:44","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:47:44","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:44","type":"route","userId":14}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:47:44","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8100,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:49","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:49","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8100,"response":"projects/easy-notifications-post/messages/0:1754272071168224%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8100,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8100,"service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8100,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:47:50","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272071168224%d193f810d193f810","sentAt":"2025-08-04T01:47:50.349Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8100,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:47:50","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnIf7oqP1D5fyS-cNuI2JDgD74jr0pSKu50l-Ql98W1CP_e_lf9FGX3m8xXSguDm-l7HIX0P-GZTO7w-X7d8t3H2syRac9naBwJAIWg0GscVbg2EA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:03","webTokenLength":0}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:48:05","totalClients":2,"type":"socket"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:48:05.615Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:05","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8101,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGR_ISCbjM-t8h1jKKgkk08v-MeHS1QxYwLXTBU80SwBa-960-f7ljJZ0JBBta7TdZdJOJN1FuALmvzRV-kzs_iskh9YYvYCTZq7fCOALLUkTXvyWc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGR_ISCbjM-t8h1jKKgkk08v-MeHS1QxYwLXTBU80SwBa-960-f7ljJZ0JBBta7TdZdJOJN1FuALmvzRV-kzs_iskh9YYvYCTZq7fCOALLUkTXvyWc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","webTokenLength":0}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8101,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"warn"}
{"clientsCount":2,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"message"}
{"clientsCount":2,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8101,"service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8101,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 22:48:07","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8101,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:48:07.898Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:48:07.979Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:48:07","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8102,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8102,"response":"projects/easy-notifications-post/messages/0:1754272413241392%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8102,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8102,"service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8102,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:53:32","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272413241392%d193f810d193f810","sentAt":"2025-08-04T01:53:32.398Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8102,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:53:32","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8103,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8103,"response":"projects/easy-notifications-post/messages/0:1754272481277043%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8103,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8103,"service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8103,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:54:40","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272481277043%d193f810d193f810","sentAt":"2025-08-04T01:54:40.447Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8103,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:54:40","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8104,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:01","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:01","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8104,"response":"projects/easy-notifications-post/messages/0:1754272502832782%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8104,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8104,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8104,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:55:02","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272502832782%d193f810d193f810","sentAt":"2025-08-04T01:55:02.000Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8104,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:02","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGR_ISCbjM-t8h1jKKgkk08v-MeHS1QxYwLXTBU80SwBa-960-f7ljJZ0JBBta7TdZdJOJN1FuALmvzRV-kzs_iskh9YYvYCTZq7fCOALLUkTXvyWc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGR_ISCbjM-t8h1jKKgkk08v-MeHS1QxYwLXTBU80SwBa-960-f7ljJZ0JBBta7TdZdJOJN1FuALmvzRV-kzs_iskh9YYvYCTZq7fCOALLUkTXvyWc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:08","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:55:08","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:55:08","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:55:08","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:55:08.917Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:08","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:55:09","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:55:09","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:55:09","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:55:09.337Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:09","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:55:09","totalClients":2,"type":"socket"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:55:09","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:09","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHRt_Wmd8dpowV_i-Ud-fQPBMa7bh5mDxTSjpn2nJFepmha1eWP7gQhINAlyz-uATuaZe2aEi_lTX-HIs-3D89KTSkkQ-ikOq_GvFH4JE8WztdIJJI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHRt_Wmd8dpowV_i-Ud-fQPBMa7bh5mDxTSjpn2nJFepmha1eWP7gQhINAlyz-uATuaZe2aEi_lTX-HIs-3D89KTSkkQ-ikOq_GvFH4JE8WztdIJJI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHRt_Wmd8dpowV_i-Ud-fQPBMa7bh5mDxTSjpn2nJFepmha1eWP7gQhINAlyz-uATuaZe2aEi_lTX-HIs-3D89KTSkkQ-ikOq_GvFH4JE8WztdIJJI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:11","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:55:12.107Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:55:12.109Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:55:12.110Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:12","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8105,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8105,"response":"projects/easy-notifications-post/messages/0:1754272514357500%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8105,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8105,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8105,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:55:13","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272514357500%d193f810d193f810","sentAt":"2025-08-04T01:55:13.517Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8105,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:13","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8106,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:17","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:17","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8106,"response":"projects/easy-notifications-post/messages/0:1754272518900848%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8106,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","type":"message"}
{"clientsCount":2,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8106,"service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8106,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:55:18","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272518900848%d193f810d193f810","sentAt":"2025-08-04T01:55:18.082Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":2,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8106,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:18","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHRt_Wmd8dpowV_i-Ud-fQPBMa7bh5mDxTSjpn2nJFepmha1eWP7gQhINAlyz-uATuaZe2aEi_lTX-HIs-3D89KTSkkQ-ikOq_GvFH4JE8WztdIJJI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:56","webTokenLength":0}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:55:57","totalClients":2,"type":"socket"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:55:57.841Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:57","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE0-vO9vKaiTK6McQBpOtSC3EWqfmrxW79t0w779m9toArKITsXaNaqUqrilCRSKs6y3DgkccvedVJSid5xWwgCBR83i5FLuFXOdG04st6F2MWvxIw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:59","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE0-vO9vKaiTK6McQBpOtSC3EWqfmrxW79t0w779m9toArKITsXaNaqUqrilCRSKs6y3DgkccvedVJSid5xWwgCBR83i5FLuFXOdG04st6F2MWvxIw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:55:59","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:00","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:56:00.093Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:00","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:00","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:56:00.103Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:00","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE0-vO9vKaiTK6McQBpOtSC3EWqfmrxW79t0w779m9toArKITsXaNaqUqrilCRSKs6y3DgkccvedVJSid5xWwgCBR83i5FLuFXOdG04st6F2MWvxIw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE0-vO9vKaiTK6McQBpOtSC3EWqfmrxW79t0w779m9toArKITsXaNaqUqrilCRSKs6y3DgkccvedVJSid5xWwgCBR83i5FLuFXOdG04st6F2MWvxIw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:03","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:56:04.336Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:56:04.340Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"query","userId":14}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:56:04","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:04","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGNpqlQNqGolTZK9vBEcFxNBGNI_zxhBThpxkEFAy-2_xvmbHeUZKRPUl6nFck8qBeLdXMiernbnMlgRgTibJAzNs3R2yj5pd76bmsdkH8F9rJopu8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGNpqlQNqGolTZK9vBEcFxNBGNI_zxhBThpxkEFAy-2_xvmbHeUZKRPUl6nFck8qBeLdXMiernbnMlgRgTibJAzNs3R2yj5pd76bmsdkH8F9rJopu8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGNpqlQNqGolTZK9vBEcFxNBGNI_zxhBThpxkEFAy-2_xvmbHeUZKRPUl6nFck8qBeLdXMiernbnMlgRgTibJAzNs3R2yj5pd76bmsdkH8F9rJopu8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:56:07.671Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:56:07.674Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:56:07.676Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:07","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"ohXdMNseda27FNy6AABR","timestamp":"2025-08-03 22:56:16","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"IQiOCWYT7mghr9CRAABT","timestamp":"2025-08-03 22:56:16","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:56:20","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:56:20","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:56:20","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"mwISQN7hluycqjAuAABV","timestamp":"2025-08-03 22:56:20","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:56:22","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mwISQN7hluycqjAuAABV","timestamp":"2025-08-03 22:56:22","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:56:22","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:56:22","type":"query","userId":14}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:56:22","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:56:22","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"mwISQN7hluycqjAuAABV","timestamp":"2025-08-03 22:56:22","totalClients":1,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:57:21","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:57:22","type":"query"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:57:23","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"mwISQN7hluycqjAuAABV","timestamp":"2025-08-03 22:57:24","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:57:28","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:57:28","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:57:28","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:57:28","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:57:29","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:57:29","type":"query","userId":14}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:57:29","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:57:29","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8107,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8107,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8107,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8107,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8107,"response":"projects/easy-notifications-post/messages/0:1754272653346449%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8107,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8107,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8107,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8107,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8107,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8107,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8107,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 22:57:32","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272653346449%d193f810d193f810","sentAt":"2025-08-04T01:57:32.521Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8107,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:57:32","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8108,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8108,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8108,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8108,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8108,"response":"projects/easy-notifications-post/messages/0:1754272659473976%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8108,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8108,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8108,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8108,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8108,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8108,"service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8108,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 22:57:38","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272659473976%d193f810d193f810","sentAt":"2025-08-04T01:57:38.643Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8108,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:57:38","type":"delivery"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"eURLzJ8AtEKH2Pr_AABX","timestamp":"2025-08-03 22:57:47","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:57:47","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:57:47","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"eURLzJ8AtEKH2Pr_AABX","timestamp":"2025-08-03 22:57:47","totalClients":1,"type":"socket"}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:57:47","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"eURLzJ8AtEKH2Pr_AABX","timestamp":"2025-08-03 22:58:09","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:58:14","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:58:14","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:58:14","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"QZ1jcGLMUfHm95xQAABZ","timestamp":"2025-08-03 22:58:14","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:58:16","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:58:16","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:58:16","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"QZ1jcGLMUfHm95xQAABZ","timestamp":"2025-08-03 22:58:16","totalClients":1,"type":"socket"}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:58:16","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"QZ1jcGLMUfHm95xQAABZ","timestamp":"2025-08-03 22:58:16","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:16","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8109,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8109,"response":"projects/easy-notifications-post/messages/0:1754272711519959%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8109,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8109,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8109,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:58:30","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272711519959%d193f810d193f810","sentAt":"2025-08-04T01:58:30.680Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8109,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:30","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGNpqlQNqGolTZK9vBEcFxNBGNI_zxhBThpxkEFAy-2_xvmbHeUZKRPUl6nFck8qBeLdXMiernbnMlgRgTibJAzNs3R2yj5pd76bmsdkH8F9rJopu8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:39","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGNpqlQNqGolTZK9vBEcFxNBGNI_zxhBThpxkEFAy-2_xvmbHeUZKRPUl6nFck8qBeLdXMiernbnMlgRgTibJAzNs3R2yj5pd76bmsdkH8F9rJopu8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:39","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:58:40.556Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:58:40.972Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:40","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"QZ1jcGLMUfHm95xQAABZ","timestamp":"2025-08-03 22:58:41","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:41","type":"route","userId":14}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 22:58:41","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHNQ3ndDfx0qLJGfr8g93CLZmBZdP93-ch-kmEjwhcLbUamAxSe7TskgpcA70vOudUScDDB2lzEQZDSHMfwcnLvsdxCW9SzoMGhcWzAxBVhvzfXmMc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHNQ3ndDfx0qLJGfr8g93CLZmBZdP93-ch-kmEjwhcLbUamAxSe7TskgpcA70vOudUScDDB2lzEQZDSHMfwcnLvsdxCW9SzoMGhcWzAxBVhvzfXmMc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHNQ3ndDfx0qLJGfr8g93CLZmBZdP93-ch-kmEjwhcLbUamAxSe7TskgpcA70vOudUScDDB2lzEQZDSHMfwcnLvsdxCW9SzoMGhcWzAxBVhvzfXmMc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:43","webTokenLength":0}
{"body":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHNQ3ndDfx0qLJGfr8g93CLZmBZdP93-ch-kmEjwhcLbUamAxSe7TskgpcA70vOudUScDDB2lzEQZDSHMfwcnLvsdxCW9SzoMGhcWzAxBVhvzfXmMc","platform":"android","route":"felipe"},"error":"getaddrinfo EAI_AGAIN autorack.proxy.rlwy.net","level":"error","message":"Erro ao atualizar tokens","route":"felipe","service":"notifications-app-api","stack":"SequelizeConnectionError: getaddrinfo EAI_AGAIN autorack.proxy.rlwy.net\n    at Client._connectionCallback (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\sequelize\\lib\\dialects\\postgres\\connection-manager.js:145:24)\n    at Client._handleErrorWhileConnecting (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:326:19)\n    at Client._handleErrorEvent (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:336:19)\n    at Connection.emit (node:events:518:28)\n    at Socket.reportStreamError (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\connection.js:57:12)\n    at Socket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-03 22:58:43"}
{"body":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHNQ3ndDfx0qLJGfr8g93CLZmBZdP93-ch-kmEjwhcLbUamAxSe7TskgpcA70vOudUScDDB2lzEQZDSHMfwcnLvsdxCW9SzoMGhcWzAxBVhvzfXmMc","platform":"android","route":"felipe"},"error":"getaddrinfo EAI_AGAIN autorack.proxy.rlwy.net","level":"error","message":"Erro ao atualizar tokens","route":"felipe","service":"notifications-app-api","stack":"SequelizeConnectionError: getaddrinfo EAI_AGAIN autorack.proxy.rlwy.net\n    at Client._connectionCallback (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\sequelize\\lib\\dialects\\postgres\\connection-manager.js:145:24)\n    at Client._handleErrorWhileConnecting (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:326:19)\n    at Client._handleErrorEvent (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\client.js:336:19)\n    at Connection.emit (node:events:518:28)\n    at Socket.reportStreamError (C:\\Users\\felip\\projects\\notifications-app-api\\node_modules\\pg\\lib\\connection.js:57:12)\n    at Socket.emit (node:events:518:28)\n    at emitErrorNT (node:internal/streams/destroy:170:8)\n    at emitErrorCloseNT (node:internal/streams/destroy:129:3)\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)","timestamp":"2025-08-03 22:58:43"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T01:58:43.837Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:43","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8110,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:49","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:49","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8110,"response":"projects/easy-notifications-post/messages/0:1754272731216611%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8110,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8110,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8110,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:58:50","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272731216611%d193f810d193f810","sentAt":"2025-08-04T01:58:50.391Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8110,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:50","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8111,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8111,"response":"projects/easy-notifications-post/messages/0:1754272736768611%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8111,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8111,"service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8111,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 22:58:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272736768611%d193f810d193f810","sentAt":"2025-08-04T01:58:55.938Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8111,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 22:58:55","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8112,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8112,"response":"projects/easy-notifications-post/messages/0:1754272820723833%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8112,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8112,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8112,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:00:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272820723833%d193f810d193f810","sentAt":"2025-08-04T02:00:19.892Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8112,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:00:19","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 23:00:25","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 23:00:25","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8113,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:00:27","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:27","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8113,"response":"projects/easy-notifications-post/messages/0:1754272828992757%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8113,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8113,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8113,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:00:28","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272828992757%d193f810d193f810","sentAt":"2025-08-04T02:00:28.174Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8113,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:00:28","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"QZ1jcGLMUfHm95xQAABZ","timestamp":"2025-08-03 23:00:34","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:00:39","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:00:39","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:00:39","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"uziQtlhIFx-LQODWAABb","timestamp":"2025-08-03 23:00:39","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:00:40","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:00:40","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:00:40","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uziQtlhIFx-LQODWAABb","timestamp":"2025-08-03 23:00:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uziQtlhIFx-LQODWAABb","timestamp":"2025-08-03 23:00:41","totalClients":1,"type":"socket"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:00:41","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:00:41","type":"route","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 8113","service":"notifications-app-api","timestamp":"2025-08-03 23:00:44","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-03 23:00:44","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 1754272845865","service":"notifications-app-api","timestamp":"2025-08-03 23:00:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-03 23:00:46","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 23:00:48","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 23:00:49","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8114,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8114,"response":"projects/easy-notifications-post/messages/0:1754272855607136%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8114,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8114,"service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8114,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:00:54","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272855607136%d193f810d193f810","sentAt":"2025-08-04T02:00:54.772Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8114,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:00:54","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:01:49","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uziQtlhIFx-LQODWAABb","timestamp":"2025-08-03 23:01:50","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:01:50","type":"query"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:01:51","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8115,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8115,"response":"projects/easy-notifications-post/messages/0:1754272916739746%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8115,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8115,"service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8115,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:01:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272916739746%d193f810d193f810","sentAt":"2025-08-04T02:01:55.904Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8115,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:01:55","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:02:15","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uziQtlhIFx-LQODWAABb","timestamp":"2025-08-03 23:02:16","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:02:16","type":"query"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:02:16","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8116,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8116,"response":"projects/easy-notifications-post/messages/0:1754272942787428%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8116,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8116,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8116,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:02:21","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272942787428%d193f810d193f810","sentAt":"2025-08-04T02:02:21.941Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8116,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:02:21","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8117,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:02:33","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:33","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8117,"response":"projects/easy-notifications-post/messages/0:1754272954950745%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8117,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8117,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8117,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:02:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272954950745%d193f810d193f810","sentAt":"2025-08-04T02:02:34.122Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8117,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:02:34","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8118,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8118,"response":"projects/easy-notifications-post/messages/0:1754272974314813%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8118,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8118,"service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8118,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:02:53","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272974314813%d193f810d193f810","sentAt":"2025-08-04T02:02:53.485Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8118,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:02:53","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHNQ3ndDfx0qLJGfr8g93CLZmBZdP93-ch-kmEjwhcLbUamAxSe7TskgpcA70vOudUScDDB2lzEQZDSHMfwcnLvsdxCW9SzoMGhcWzAxBVhvzfXmMc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHNQ3ndDfx0qLJGfr8g93CLZmBZdP93-ch-kmEjwhcLbUamAxSe7TskgpcA70vOudUScDDB2lzEQZDSHMfwcnLvsdxCW9SzoMGhcWzAxBVhvzfXmMc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:07","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:03:07","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:03:07","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:03:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:03:08","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:03:08.772Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:03:08.781Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:08","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:03:08","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:03:08","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uziQtlhIFx-LQODWAABb","timestamp":"2025-08-03 23:03:09","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:09","type":"route","userId":14}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:03:09","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFV1UsSE6Rm7mq97QhNM6NXAC0p1YOagbNqT5VnvTU_YavaldXMFm6gR5_hO33k_deMBswr7Cc4M55Qgro7_WcqGn9VvDtFvfaECzbbr20kGS93tXA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:10","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFV1UsSE6Rm7mq97QhNM6NXAC0p1YOagbNqT5VnvTU_YavaldXMFm6gR5_hO33k_deMBswr7Cc4M55Qgro7_WcqGn9VvDtFvfaECzbbr20kGS93tXA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:10","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFV1UsSE6Rm7mq97QhNM6NXAC0p1YOagbNqT5VnvTU_YavaldXMFm6gR5_hO33k_deMBswr7Cc4M55Qgro7_WcqGn9VvDtFvfaECzbbr20kGS93tXA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:10","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:03:11.190Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:11","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:03:11.199Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:11","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:03:11.203Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:11","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8119,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:12","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:12","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8119,"response":"projects/easy-notifications-post/messages/0:1754272994196069%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8119,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8119,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8119,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:03:13","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754272994196069%d193f810d193f810","sentAt":"2025-08-04T02:03:13.347Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8119,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:13","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8120,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:22","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:22","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8120,"response":"projects/easy-notifications-post/messages/0:1754273004122889%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8120,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8120,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8120,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:03:23","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754273004122889%d193f810d193f810","sentAt":"2025-08-04T02:03:23.296Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8120,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:23","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8121,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8121,"response":"projects/easy-notifications-post/messages/0:1754273011424363%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8121,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8121,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8121,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:03:30","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754273011424363%d193f810d193f810","sentAt":"2025-08-04T02:03:30.596Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8121,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:30","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8122,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:33","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:33","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:33","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8122,"response":"projects/easy-notifications-post/messages/0:1754273015115941%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8122,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8122,"service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8122,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:03:34","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754273015115941%d193f810d193f810","sentAt":"2025-08-04T02:03:34.278Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8122,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:03:34","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:10:14","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:10:14","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:10:14","type":"query"}
{"error":"getaddrinfo EAI_AGAIN autorack.proxy.rlwy.net","level":"error","message":"Erro ao executar consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:10:18"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"uziQtlhIFx-LQODWAABb","timestamp":"2025-08-03 23:32:24","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFV1UsSE6Rm7mq97QhNM6NXAC0p1YOagbNqT5VnvTU_YavaldXMFm6gR5_hO33k_deMBswr7Cc4M55Qgro7_WcqGn9VvDtFvfaECzbbr20kGS93tXA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFV1UsSE6Rm7mq97QhNM6NXAC0p1YOagbNqT5VnvTU_YavaldXMFm6gR5_hO33k_deMBswr7Cc4M55Qgro7_WcqGn9VvDtFvfaECzbbr20kGS93tXA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFV1UsSE6Rm7mq97QhNM6NXAC0p1YOagbNqT5VnvTU_YavaldXMFm6gR5_hO33k_deMBswr7Cc4M55Qgro7_WcqGn9VvDtFvfaECzbbr20kGS93tXA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEz9o00pXN4o5Me5MXzKTvpPnZRJupaoEK9PhaX63HkB2rJbR222niylka8DUHRLacbHf_nvn1uzAU9mz7qupt3FWYpA11C_FjwklHwB8D6UFslzKY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEz9o00pXN4o5Me5MXzKTvpPnZRJupaoEK9PhaX63HkB2rJbR222niylka8DUHRLacbHf_nvn1uzAU9mz7qupt3FWYpA11C_FjwklHwB8D6UFslzKY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEz9o00pXN4o5Me5MXzKTvpPnZRJupaoEK9PhaX63HkB2rJbR222niylka8DUHRLacbHf_nvn1uzAU9mz7qupt3FWYpA11C_FjwklHwB8D6UFslzKY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEz9o00pXN4o5Me5MXzKTvpPnZRJupaoEK9PhaX63HkB2rJbR222niylka8DUHRLacbHf_nvn1uzAU9mz7qupt3FWYpA11C_FjwklHwB8D6UFslzKY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEz9o00pXN4o5Me5MXzKTvpPnZRJupaoEK9PhaX63HkB2rJbR222niylka8DUHRLacbHf_nvn1uzAU9mz7qupt3FWYpA11C_FjwklHwB8D6UFslzKY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:20","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:21.845Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:21.972Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:21.988Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:22.056Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:22.189Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:22.202Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:22.275Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:33:22.404Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:33:22","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEz9o00pXN4o5Me5MXzKTvpPnZRJupaoEK9PhaX63HkB2rJbR222niylka8DUHRLacbHf_nvn1uzAU9mz7qupt3FWYpA11C_FjwklHwB8D6UFslzKY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEz9o00pXN4o5Me5MXzKTvpPnZRJupaoEK9PhaX63HkB2rJbR222niylka8DUHRLacbHf_nvn1uzAU9mz7qupt3FWYpA11C_FjwklHwB8D6UFslzKY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:15","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:34:17.412Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:34:17.417Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:17","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDGEjEq9ZA0RrPOQTqoJS92I3R2jROdgL64iKROxHBebaLXJDKnIAAu6dMHhtEBxzosXoEPFWv3XpCeIYBfwjeYDogZa0PUO49JO-iYe89kfqPCkQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDGEjEq9ZA0RrPOQTqoJS92I3R2jROdgL64iKROxHBebaLXJDKnIAAu6dMHhtEBxzosXoEPFWv3XpCeIYBfwjeYDogZa0PUO49JO-iYe89kfqPCkQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:19","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDGEjEq9ZA0RrPOQTqoJS92I3R2jROdgL64iKROxHBebaLXJDKnIAAu6dMHhtEBxzosXoEPFWv3XpCeIYBfwjeYDogZa0PUO49JO-iYe89kfqPCkQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:19","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:34:19.928Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:34:20.127Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:20","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:34:20.277Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:34:20","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:35:27","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:35:27","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:35:27","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:35:28","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:35:28","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:35:28","type":"query","userId":14}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:35:29","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:29","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8123,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8123,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8123,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8123,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8123,"response":"projects/easy-notifications-post/messages/0:1754274936116096%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8123,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8123,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8123,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8123,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8123,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8123,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8123,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:35:35","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754274936116096%d193f810d193f810","sentAt":"2025-08-04T02:35:35.219Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8123,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:35","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8124,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8124,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8124,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8124,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8124,"response":"projects/easy-notifications-post/messages/0:1754274941865150%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8124,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8124,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8124,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8124,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8124,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8124,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8124,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:35:40","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754274941865150%d193f810d193f810","sentAt":"2025-08-04T02:35:40.976Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8124,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:40","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 23:35:51","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 23:35:52","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8125,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8125,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8125,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8125,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8125,"response":"projects/easy-notifications-post/messages/0:1754274957294466%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8125,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8125,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8125,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8125,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8125,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8125,"service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8125,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:35:56","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754274957294466%d193f810d193f810","sentAt":"2025-08-04T02:35:56.390Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8125,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:35:56","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8126,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:36:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8126,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8126,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8126,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8126,"response":"projects/easy-notifications-post/messages/0:1754275007044644%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8126,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8126,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8126,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8126,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8126,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8126,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8126,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:36:46","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275007044644%d193f810d193f810","sentAt":"2025-08-04T02:36:46.145Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8126,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:36:46","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8127,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:36:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8127,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8127,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8127,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8127,"response":"projects/easy-notifications-post/messages/0:1754275016261948%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8127,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8127,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8127,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8127,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8127,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8127,"service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8127,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:36:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275016261948%d193f810d193f810","sentAt":"2025-08-04T02:36:55.377Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8127,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:36:55","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8128,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8128,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8128,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8128,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8128,"response":"projects/easy-notifications-post/messages/0:1754275067617465%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:37:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8128,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:37:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8128,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:47","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8128,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:47","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8128,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:47","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8128,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:47","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8128,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:47","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8128,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:37:47","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275067617465%d193f810d193f810","sentAt":"2025-08-04T02:37:47.021Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8128,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:47","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEDGEjEq9ZA0RrPOQTqoJS92I3R2jROdgL64iKROxHBebaLXJDKnIAAu6dMHhtEBxzosXoEPFWv3XpCeIYBfwjeYDogZa0PUO49JO-iYe89kfqPCkQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:53","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:37:54.406Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:54","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"euqqEteF-Z9KHyIOAABd","timestamp":"2025-08-03 23:37:54","type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"euqqEteF-Z9KHyIOAABd","timestamp":"2025-08-03 23:37:55","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnpIcxidmwsDeA9XKPY4lm3qgFV2_mhfbxGd-v3heswlnGMbwoqldMghA8cjmdgaciaZVPtkrg7sSzw5P3h7NaaNkm_imiFT5FrTK2rMD8X72E_ig","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:57","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnpIcxidmwsDeA9XKPY4lm3qgFV2_mhfbxGd-v3heswlnGMbwoqldMghA8cjmdgaciaZVPtkrg7sSzw5P3h7NaaNkm_imiFT5FrTK2rMD8X72E_ig","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:57","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:37:58.102Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:58","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:37:58.317Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:58","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8129,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:37:59","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:59","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:37:59","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8129,"response":"projects/easy-notifications-post/messages/0:1754275081458009%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:38:00","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8129,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:38:00","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:01","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:01","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:01","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:01","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8129,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8129,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:38:04","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275081458009%d193f810d193f810","sentAt":"2025-08-04T02:38:00.787Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8129,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:38:04","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8130,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:38:11","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:11","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8130,"response":"projects/easy-notifications-post/messages/0:1754275093201139%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8130,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8130,"service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8130,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:38:12","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275093201139%d193f810d193f810","sentAt":"2025-08-04T02:38:12.344Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8130,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:38:12","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"euqqEteF-Z9KHyIOAABd","timestamp":"2025-08-03 23:38:15","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:38:46","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:38:46","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:38:46","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"hI1F7Y1gB4FuEs3xAABf","timestamp":"2025-08-03 23:38:46","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:38:48","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:38:48","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:38:48","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"hI1F7Y1gB4FuEs3xAABf","timestamp":"2025-08-03 23:38:48","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"hI1F7Y1gB4FuEs3xAABf","timestamp":"2025-08-03 23:38:48","totalClients":1,"type":"socket"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:38:49","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:38:49","type":"route","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8131,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8131,"response":"projects/easy-notifications-post/messages/0:1754275142437732%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8131,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8131,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8131,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:39:01","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275142437732%d193f810d193f810","sentAt":"2025-08-04T02:39:01.547Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8131,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:01","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8132,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8132,"response":"projects/easy-notifications-post/messages/0:1754275146287126%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8132,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8132,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8132,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:39:05","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275146287126%d193f810d193f810","sentAt":"2025-08-04T02:39:05.397Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8132,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:05","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnpIcxidmwsDeA9XKPY4lm3qgFV2_mhfbxGd-v3heswlnGMbwoqldMghA8cjmdgaciaZVPtkrg7sSzw5P3h7NaaNkm_imiFT5FrTK2rMD8X72E_ig","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:10","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnpIcxidmwsDeA9XKPY4lm3qgFV2_mhfbxGd-v3heswlnGMbwoqldMghA8cjmdgaciaZVPtkrg7sSzw5P3h7NaaNkm_imiFT5FrTK2rMD8X72E_ig","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:10","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:39:11.782Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:39:11.994Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:11","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"hI1F7Y1gB4FuEs3xAABf","timestamp":"2025-08-03 23:39:12","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:12","type":"route","userId":14}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:39:12","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8133,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEx8Jf-3zatKHSTx0tFR2BdqSmuZm6CqWsPfkWvav3tqQZiKrqjnwHCr8GrSEUawlJAU24PziqMwH0uEy_fj47wC0Q-kjvJsdHpTL8ARiU_zCbhLMk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEx8Jf-3zatKHSTx0tFR2BdqSmuZm6CqWsPfkWvav3tqQZiKrqjnwHCr8GrSEUawlJAU24PziqMwH0uEy_fj47wC0Q-kjvJsdHpTL8ARiU_zCbhLMk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEx8Jf-3zatKHSTx0tFR2BdqSmuZm6CqWsPfkWvav3tqQZiKrqjnwHCr8GrSEUawlJAU24PziqMwH0uEy_fj47wC0Q-kjvJsdHpTL8ARiU_zCbhLMk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","webTokenLength":0}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8133,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8133,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8133,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:39:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8133,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:39:14.901Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:39:14.927Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:39:14.928Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:14","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8134,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8134,"response":"projects/easy-notifications-post/messages/0:1754275159355736%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8134,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8134,"service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8134,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:39:18","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275159355736%d193f810d193f810","sentAt":"2025-08-04T02:39:18.463Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8134,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:39:18","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"hI1F7Y1gB4FuEs3xAABf","timestamp":"2025-08-03 23:39:26","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:39:58","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:39:58","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:39:58","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"ETLbFWMjinW3sBuSAABh","timestamp":"2025-08-03 23:39:58","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:40:00","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:40:00","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:40:00","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ETLbFWMjinW3sBuSAABh","timestamp":"2025-08-03 23:40:00","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ETLbFWMjinW3sBuSAABh","timestamp":"2025-08-03 23:40:00","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:00","type":"route","userId":14}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:40:00","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 23:40:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 23:40:07","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8135,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:11","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:11","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8135,"response":"projects/easy-notifications-post/messages/0:1754275213071675%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8135,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8135,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8135,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:40:12","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275213071675%d193f810d193f810","sentAt":"2025-08-04T02:40:12.169Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8135,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:12","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEx8Jf-3zatKHSTx0tFR2BdqSmuZm6CqWsPfkWvav3tqQZiKrqjnwHCr8GrSEUawlJAU24PziqMwH0uEy_fj47wC0Q-kjvJsdHpTL8ARiU_zCbhLMk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEx8Jf-3zatKHSTx0tFR2BdqSmuZm6CqWsPfkWvav3tqQZiKrqjnwHCr8GrSEUawlJAU24PziqMwH0uEy_fj47wC0Q-kjvJsdHpTL8ARiU_zCbhLMk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:21","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:40:21","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:40:21","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:40:21","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:40:22.457Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:40:22.679Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ETLbFWMjinW3sBuSAABh","timestamp":"2025-08-03 23:40:22","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:22","type":"route","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:40:23","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE-AFAwP27o2fFHTrvpxEP4uHpEGxgollsemm1oUApBGxIoEmIozrDviFDCD44ce4HCIwu_lJkVVtSV0pj2gZja7K8swRsZzUa7GFbbEQUDEYi7LA0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:24","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE-AFAwP27o2fFHTrvpxEP4uHpEGxgollsemm1oUApBGxIoEmIozrDviFDCD44ce4HCIwu_lJkVVtSV0pj2gZja7K8swRsZzUa7GFbbEQUDEYi7LA0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:24","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE-AFAwP27o2fFHTrvpxEP4uHpEGxgollsemm1oUApBGxIoEmIozrDviFDCD44ce4HCIwu_lJkVVtSV0pj2gZja7K8swRsZzUa7GFbbEQUDEYi7LA0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:24","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:40:25.344Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:40:25.372Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:40:25.374Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8136,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8136,"response":"projects/easy-notifications-post/messages/0:1754275227285079%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8136,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8136,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8136,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:40:26","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275227285079%d193f810d193f810","sentAt":"2025-08-04T02:40:26.389Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8136,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:26","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8137,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:41","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:41","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8137,"response":"projects/easy-notifications-post/messages/0:1754275242941091%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8137,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8137,"service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8137,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:40:42","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275242941091%d193f810d193f810","sentAt":"2025-08-04T02:40:42.059Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8137,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:40:42","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8138,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8138,"response":"projects/easy-notifications-post/messages/0:1754275276477366%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8138,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8138,"service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8138,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:41:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275276477366%d193f810d193f810","sentAt":"2025-08-04T02:41:15.604Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8138,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:41:15","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"ETLbFWMjinW3sBuSAABh","timestamp":"2025-08-03 23:41:24","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE-AFAwP27o2fFHTrvpxEP4uHpEGxgollsemm1oUApBGxIoEmIozrDviFDCD44ce4HCIwu_lJkVVtSV0pj2gZja7K8swRsZzUa7GFbbEQUDEYi7LA0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:41:59","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE-AFAwP27o2fFHTrvpxEP4uHpEGxgollsemm1oUApBGxIoEmIozrDviFDCD44ce4HCIwu_lJkVVtSV0pj2gZja7K8swRsZzUa7GFbbEQUDEYi7LA0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:41:59","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:01.005Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:01.059Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:42:01","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:42:01","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:42:02","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:42:02","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:42:02","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:02","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:42:02","totalClients":1,"type":"socket"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:42:02","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFYLsT2U-sgfxliqMMg1sBGxjA4O0-FDE6kJRFEDa2CRU69Nc1nYUfeGm0SDLpnhDt-wPLhfAudBmF_jgxtlMwXbGA2vUZwjKUfNMsBGPpyrXoklKI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:02","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFYLsT2U-sgfxliqMMg1sBGxjA4O0-FDE6kJRFEDa2CRU69Nc1nYUfeGm0SDLpnhDt-wPLhfAudBmF_jgxtlMwXbGA2vUZwjKUfNMsBGPpyrXoklKI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:02","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFYLsT2U-sgfxliqMMg1sBGxjA4O0-FDE6kJRFEDa2CRU69Nc1nYUfeGm0SDLpnhDt-wPLhfAudBmF_jgxtlMwXbGA2vUZwjKUfNMsBGPpyrXoklKI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:02","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:03.352Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:03.558Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:03.563Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:03","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8139,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:06","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:06","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8139,"response":"projects/easy-notifications-post/messages/0:1754275328289298%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8139,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8139,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8139,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:42:07","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275328289298%d193f810d193f810","sentAt":"2025-08-04T02:42:07.386Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8139,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:07","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:42:22","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:42:24","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:42:24","type":"query"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:42:24","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8140,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8140,"response":"projects/easy-notifications-post/messages/0:1754275350544205%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8140,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8140,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8140,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:42:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275350544205%d193f810d193f810","sentAt":"2025-08-04T02:42:29.637Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8140,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:29","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8141,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:38","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:38","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8141,"response":"projects/easy-notifications-post/messages/0:1754275360130906%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8141,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8141,"service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8141,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:42:39","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275360130906%d193f810d193f810","sentAt":"2025-08-04T02:42:39.231Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8141,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:39","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFYLsT2U-sgfxliqMMg1sBGxjA4O0-FDE6kJRFEDa2CRU69Nc1nYUfeGm0SDLpnhDt-wPLhfAudBmF_jgxtlMwXbGA2vUZwjKUfNMsBGPpyrXoklKI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:47","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:47","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:47.570Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:47","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:42:48","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHsWLGdIem3diH4FDgWRpWuT6sROdA9ISXKHgpaWAAvrNfJ6aYWNq2kOpGLa9IzMhgHNUTkx3OoC7oUWdLYmEr_CcfPmvscaq2dTRe0Vb_BIBSs1_Y","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:50","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHsWLGdIem3diH4FDgWRpWuT6sROdA9ISXKHgpaWAAvrNfJ6aYWNq2kOpGLa9IzMhgHNUTkx3OoC7oUWdLYmEr_CcfPmvscaq2dTRe0Vb_BIBSs1_Y","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:50","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:51.018Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:51","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:51.242Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:51","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHsWLGdIem3diH4FDgWRpWuT6sROdA9ISXKHgpaWAAvrNfJ6aYWNq2kOpGLa9IzMhgHNUTkx3OoC7oUWdLYmEr_CcfPmvscaq2dTRe0Vb_BIBSs1_Y","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:57","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHsWLGdIem3diH4FDgWRpWuT6sROdA9ISXKHgpaWAAvrNfJ6aYWNq2kOpGLa9IzMhgHNUTkx3OoC7oUWdLYmEr_CcfPmvscaq2dTRe0Vb_BIBSs1_Y","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:57","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:42:57","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:42:57","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:42:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:58.061Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:42:58.064Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","type":"query","userId":14}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:42:58","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:42:58","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGBxAxImiQUmIF8st7mqehiwxILpBlExPzagcFHanfziOOg3ktrSncTW9rs839M-JnpFV72YLE6-kZTnMckxeVlJSV8cXjFgrwC0y5PpWXOagqeQNM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:00","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGBxAxImiQUmIF8st7mqehiwxILpBlExPzagcFHanfziOOg3ktrSncTW9rs839M-JnpFV72YLE6-kZTnMckxeVlJSV8cXjFgrwC0y5PpWXOagqeQNM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGBxAxImiQUmIF8st7mqehiwxILpBlExPzagcFHanfziOOg3ktrSncTW9rs839M-JnpFV72YLE6-kZTnMckxeVlJSV8cXjFgrwC0y5PpWXOagqeQNM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:43:01.429Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:43:01.433Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:43:01.446Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8142,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8142,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8142,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8142,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:43:01","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8142,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:01","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8143,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8143,"response":"projects/easy-notifications-post/messages/0:1754275389606779%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8143,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8143,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8143,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:43:08","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275389606779%d193f810d193f810","sentAt":"2025-08-04T02:43:08.695Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8143,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:08","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8144,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8144,"response":"projects/easy-notifications-post/messages/0:1754275393304888%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8144,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8144,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8144,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:43:12","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275393304888%d193f810d193f810","sentAt":"2025-08-04T02:43:12.406Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8144,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:12","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGBxAxImiQUmIF8st7mqehiwxILpBlExPzagcFHanfziOOg3ktrSncTW9rs839M-JnpFV72YLE6-kZTnMckxeVlJSV8cXjFgrwC0y5PpWXOagqeQNM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:18","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:43:19.356Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:19","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:43:20","totalClients":1,"type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG6y5W21W_Kd4qxR-v40V5z7k5lPgC2ykkAJnryjR-hUmhetJtYYx0XOJfsBwndArGhzwtWT09uXfzir0a9SWwDsZgxR3OrfV3xLrqIQDq3pJSBRWc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:22","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG6y5W21W_Kd4qxR-v40V5z7k5lPgC2ykkAJnryjR-hUmhetJtYYx0XOJfsBwndArGhzwtWT09uXfzir0a9SWwDsZgxR3OrfV3xLrqIQDq3pJSBRWc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:22","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:43:22.915Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:22","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:23","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:43:23.130Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:23","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8145,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:24","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:24","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8145,"response":"projects/easy-notifications-post/messages/0:1754275406116366%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8145,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8145,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8145,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:43:25","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275406116366%d193f810d193f810","sentAt":"2025-08-04T02:43:25.210Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8145,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:25","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"G9AugE7Z3bKhQlBLAABj","timestamp":"2025-08-03 23:43:29","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:43:33","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:43:33","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:43:33","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"dmxD6IAAYOjLrpyiAABl","timestamp":"2025-08-03 23:43:33","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:43:33","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:43:33","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:43:33","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dmxD6IAAYOjLrpyiAABl","timestamp":"2025-08-03 23:43:34","totalClients":1,"type":"socket"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:43:34","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:34","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dmxD6IAAYOjLrpyiAABl","timestamp":"2025-08-03 23:43:34","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8146,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8146,"response":"projects/easy-notifications-post/messages/0:1754275419788802%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8146,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8146,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8146,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:43:38","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275419788802%d193f810d193f810","sentAt":"2025-08-04T02:43:38.872Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8146,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:38","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8147,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8147,"response":"projects/easy-notifications-post/messages/0:1754275429408575%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8147,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8147,"service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8147,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:43:48","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275429408575%d193f810d193f810","sentAt":"2025-08-04T02:43:48.523Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8147,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:43:48","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG6y5W21W_Kd4qxR-v40V5z7k5lPgC2ykkAJnryjR-hUmhetJtYYx0XOJfsBwndArGhzwtWT09uXfzir0a9SWwDsZgxR3OrfV3xLrqIQDq3pJSBRWc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWpM8WrAjHPBRhJc5DEClegHsVkQLqqdfsIuz0HUSZqO4HrD3uPf-gnUppAo6ZvA8DgjCwjGxDGFOVA7IYS6ryAf8zbt0pjtPH3aFCnLlBlHep9WY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWpM8WrAjHPBRhJc5DEClegHsVkQLqqdfsIuz0HUSZqO4HrD3uPf-gnUppAo6ZvA8DgjCwjGxDGFOVA7IYS6ryAf8zbt0pjtPH3aFCnLlBlHep9WY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:17","webTokenLength":0}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dmxD6IAAYOjLrpyiAABl","timestamp":"2025-08-03 23:44:18","totalClients":1,"type":"socket"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:44:18.530Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:44:18.728Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:18","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:18","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:44:18.740Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:18","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8148,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:20","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:20","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8148,"response":"projects/easy-notifications-post/messages/0:1754275462034484%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8148,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8148,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8148,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:44:21","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275462034484%d193f810d193f810","sentAt":"2025-08-04T02:44:21.122Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8148,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:21","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8149,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8149,"response":"projects/easy-notifications-post/messages/0:1754275495606726%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8149,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8149,"service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8149,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:44:54","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275495606726%d193f810d193f810","sentAt":"2025-08-04T02:44:54.712Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8149,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:44:54","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWpM8WrAjHPBRhJc5DEClegHsVkQLqqdfsIuz0HUSZqO4HrD3uPf-gnUppAo6ZvA8DgjCwjGxDGFOVA7IYS6ryAf8zbt0pjtPH3aFCnLlBlHep9WY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:04","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWpM8WrAjHPBRhJc5DEClegHsVkQLqqdfsIuz0HUSZqO4HrD3uPf-gnUppAo6ZvA8DgjCwjGxDGFOVA7IYS6ryAf8zbt0pjtPH3aFCnLlBlHep9WY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:04","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:45:04","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:45:04","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:45:04","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:45:05","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:45:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:45:05","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:45:05.610Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:05","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:45:05.822Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:05","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dmxD6IAAYOjLrpyiAABl","timestamp":"2025-08-03 23:45:06","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:06","type":"route","userId":14}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:45:06","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8150,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg0Z4ABRy2WNIyoy9PyVCjglKwDkpwNAEaYMRLnEkzQeMAvn1VqFqdbcqG3qNGi8ZVxDpNfdwpPUcWw6sSehKUt6iQKj4XuNZ-OPjBZcMPd4HocvY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg0Z4ABRy2WNIyoy9PyVCjglKwDkpwNAEaYMRLnEkzQeMAvn1VqFqdbcqG3qNGi8ZVxDpNfdwpPUcWw6sSehKUt6iQKj4XuNZ-OPjBZcMPd4HocvY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg0Z4ABRy2WNIyoy9PyVCjglKwDkpwNAEaYMRLnEkzQeMAvn1VqFqdbcqG3qNGi8ZVxDpNfdwpPUcWw6sSehKUt6iQKj4XuNZ-OPjBZcMPd4HocvY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","webTokenLength":0}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8150,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8150,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8150,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:45:08","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8150,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:45:08.669Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:45:08.674Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:45:08.676Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:08","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8151,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8151,"response":"projects/easy-notifications-post/messages/0:1754275516303046%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8151,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8151,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8151,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:45:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275516303046%d193f810d193f810","sentAt":"2025-08-04T02:45:15.396Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8151,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:15","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8152,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8152,"response":"projects/easy-notifications-post/messages/0:1754275546591453%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8152,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8152,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8152,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:45:45","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275546591453%d193f810d193f810","sentAt":"2025-08-04T02:45:45.683Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8152,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:45","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8153,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8153,"response":"projects/easy-notifications-post/messages/0:1754275555707001%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8153,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8153,"service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8153,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:45:54","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275555707001%d193f810d193f810","sentAt":"2025-08-04T02:45:54.789Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8153,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:45:54","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg0Z4ABRy2WNIyoy9PyVCjglKwDkpwNAEaYMRLnEkzQeMAvn1VqFqdbcqG3qNGi8ZVxDpNfdwpPUcWw6sSehKUt6iQKj4XuNZ-OPjBZcMPd4HocvY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEg0Z4ABRy2WNIyoy9PyVCjglKwDkpwNAEaYMRLnEkzQeMAvn1VqFqdbcqG3qNGi8ZVxDpNfdwpPUcWw6sSehKUt6iQKj4XuNZ-OPjBZcMPd4HocvY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:17","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:46:17","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:46:17","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:46:17","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:46:18","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:46:19.003Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:46:19.022Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dmxD6IAAYOjLrpyiAABl","timestamp":"2025-08-03 23:46:19","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","type":"route","userId":14}
{"count":19,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:46:19","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:46:21.500Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:46:21.505Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:46:21.514Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:21","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8154,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8154,"response":"projects/easy-notifications-post/messages/0:1754275583478528%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8154,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8154,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8154,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:46:22","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275583478528%d193f810d193f810","sentAt":"2025-08-04T02:46:22.582Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8154,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:22","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8155,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8155,"response":"projects/easy-notifications-post/messages/0:1754275590342239%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8155,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8155,"service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8155,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:46:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754275590342239%d193f810d193f810","sentAt":"2025-08-04T02:46:29.420Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8155,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:46:29","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:50:19","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:50:19","type":"warn"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:50:19","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:50:19","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:50:22","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:50:23","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:50:23","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:50:23","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:50:23","type":"route","userId":14}
{"count":21,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:50:23","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:50:23","totalClients":2,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:50:49","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:50:49","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:50:49","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:50:50","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:50:50","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:50:50","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:50:50","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:50:50","totalClients":2,"type":"socket"}
{"count":21,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:50:51","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:50:59","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:50:59","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:50:59","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:51:00","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:00","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:00","type":"query","userId":14}
{"count":21,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:51:00","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:51:00","totalClients":2,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:51:00","type":"route","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 23:51:09","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 23:51:09","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:16","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:51:16","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:51:16","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:51:16","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:16","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:16","type":"query","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:51:16","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:51:17","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:51:17","totalClients":2,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:36","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:51:36","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:51:36","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:51:37","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:37","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:37","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:51:37","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:51:37","totalClients":2,"type":"socket"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:51:38","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:45","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:51:45","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:51:45","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:51:45","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:51:45","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:51:46","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:51:46","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:51:46","totalClients":2,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:52:04","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:52:04","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:52:04","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:52:05","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:52:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:52:05","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:52:05","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:52:05","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:52:06","totalClients":2,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:52:17","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:52:18","totalClients":2,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:52:29","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:52:29","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:52:29","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:52:31","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":1,"route":"felipe","service":"notifications-app-api","socketId":"dmxD6IAAYOjLrpyiAABl","timestamp":"2025-08-03 23:52:32","type":"socket"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"7VgJV3M6kihl1hXpAABn","timestamp":"2025-08-03 23:52:32","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH7QKOQWV1wgrNPbN1x-MryGqHQNON7SB2mFAWg0BsGW7PzJH3d3mWE0AFLvWpL04aIVbr_-DCa9lMuTtUrI1Pc6CUDPFMjCRrtObv5LF0VFHPIOs8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:13","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:15.138Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:15.196Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:15.219Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:15.338Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:15.343Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:15","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:17.466Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:17.470Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:17.473Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:17.659Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:17.674Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:17.676Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:17.678Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:17","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:19","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:53:19","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:53:19","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:53:19","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:20","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:20","type":"query","userId":14}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"5MvhBBmujpkRhTVkAABp","timestamp":"2025-08-03 23:53:20","type":"socket"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:53:20","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:20","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5MvhBBmujpkRhTVkAABp","timestamp":"2025-08-03 23:53:20","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8156,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8156,"response":"projects/easy-notifications-post/messages/0:1754276006654973%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8156,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8156,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8156,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:53:25","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276006654973%d193f810d193f810","sentAt":"2025-08-04T02:53:25.741Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8156,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:25","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8157,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8157,"response":"projects/easy-notifications-post/messages/0:1754276010050309%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8157,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8157,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8157,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:53:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276010050309%d193f810d193f810","sentAt":"2025-08-04T02:53:29.135Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8157,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:29","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:35","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEe0eBPTIjrPZqphN2EyUNhPkFTqSUcH6mvG6lO3_J_B5xrUs4XLLLocbVtTfHNbKQ49jqLORZ1BlB4gnrdsDXnByWoavHWollLaVvQeqnrEWrTsv8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:35","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:35","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:53:35","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:53:35","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:36.285Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:36.704Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:36","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5MvhBBmujpkRhTVkAABp","timestamp":"2025-08-03 23:53:36","totalClients":1,"type":"socket"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:53:37","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjAWBFlck_6PajHwK2ctaWmVXjw01U3OD1XJL43bx1srW4TKeqG8-Pvkg1AXN48p3QTPQhSlkjq-jVAnynIAza7jA6LImkSiANXF0uZzkO7RMvTEI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:38","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjAWBFlck_6PajHwK2ctaWmVXjw01U3OD1XJL43bx1srW4TKeqG8-Pvkg1AXN48p3QTPQhSlkjq-jVAnynIAza7jA6LImkSiANXF0uZzkO7RMvTEI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:38","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjAWBFlck_6PajHwK2ctaWmVXjw01U3OD1XJL43bx1srW4TKeqG8-Pvkg1AXN48p3QTPQhSlkjq-jVAnynIAza7jA6LImkSiANXF0uZzkO7RMvTEI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:38","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8158,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:38","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:38","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8158,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8158,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8158,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:53:39","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8158,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:39.346Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:39.363Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:39.398Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:39","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8159,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8159,"response":"projects/easy-notifications-post/messages/0:1754276027157415%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8159,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8159,"service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8159,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:53:46","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276027157415%d193f810d193f810","sentAt":"2025-08-04T02:53:46.238Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8159,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:46","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjAWBFlck_6PajHwK2ctaWmVXjw01U3OD1XJL43bx1srW4TKeqG8-Pvkg1AXN48p3QTPQhSlkjq-jVAnynIAza7jA6LImkSiANXF0uZzkO7RMvTEI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:53","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEjAWBFlck_6PajHwK2ctaWmVXjw01U3OD1XJL43bx1srW4TKeqG8-Pvkg1AXN48p3QTPQhSlkjq-jVAnynIAza7jA6LImkSiANXF0uZzkO7RMvTEI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:53","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:53","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:53:53","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:53:53","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:54.392Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:54.603Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"5MvhBBmujpkRhTVkAABp","timestamp":"2025-08-03 23:53:54","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:54","type":"route","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"5MvhBBmujpkRhTVkAABp","timestamp":"2025-08-03 23:53:56","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExwj8HFhaQdp2nSUTcpYWtjnecio2si4153Li9NwY7StevVU1tQYu5hQ5oaqMfQY4R00jJ-1TqAjACPuOI7GACNZflbj7XZQgZOF2qVBCRd0tNusA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:56","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExwj8HFhaQdp2nSUTcpYWtjnecio2si4153Li9NwY7StevVU1tQYu5hQ5oaqMfQY4R00jJ-1TqAjACPuOI7GACNZflbj7XZQgZOF2qVBCRd0tNusA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:56","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExwj8HFhaQdp2nSUTcpYWtjnecio2si4153Li9NwY7StevVU1tQYu5hQ5oaqMfQY4R00jJ-1TqAjACPuOI7GACNZflbj7XZQgZOF2qVBCRd0tNusA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:56","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:57.027Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:57","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:57.038Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:57","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:53:57.039Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:53:57","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"rWnQWeWiHQF22xh6AABr","timestamp":"2025-08-03 23:54:00","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"rWnQWeWiHQF22xh6AABr","timestamp":"2025-08-03 23:54:00","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"route","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:54:00","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"rWnQWeWiHQF22xh6AABr","timestamp":"2025-08-03 23:54:00","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8160,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:06","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:06","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8160,"response":"projects/easy-notifications-post/messages/0:1754276048157663%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8160,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8160,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8160,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:54:07","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276048157663%d193f810d193f810","sentAt":"2025-08-04T02:54:07.234Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8160,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:07","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8161,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:28","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:28","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:28","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8161,"response":"projects/easy-notifications-post/messages/0:1754276070198236%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8161,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8161,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8161,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:54:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276070198236%d193f810d193f810","sentAt":"2025-08-04T02:54:29.284Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8161,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:29","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8162,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8162,"response":"projects/easy-notifications-post/messages/0:1754276083805856%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8162,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8162,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8162,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:54:42","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276083805856%d193f810d193f810","sentAt":"2025-08-04T02:54:42.889Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8162,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:42","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExwj8HFhaQdp2nSUTcpYWtjnecio2si4153Li9NwY7StevVU1tQYu5hQ5oaqMfQY4R00jJ-1TqAjACPuOI7GACNZflbj7XZQgZOF2qVBCRd0tNusA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:43","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bExwj8HFhaQdp2nSUTcpYWtjnecio2si4153Li9NwY7StevVU1tQYu5hQ5oaqMfQY4R00jJ-1TqAjACPuOI7GACNZflbj7XZQgZOF2qVBCRd0tNusA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:43","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:54:43","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:54:43","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:54:43","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:54:43.935Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:43","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:54:44","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:54:44","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:54:44","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:54:44.357Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:44","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:44","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"rWnQWeWiHQF22xh6AABr","timestamp":"2025-08-03 23:54:44","totalClients":1,"type":"socket"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:54:44","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8163,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8163,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8163,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8163,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:54:45","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8163,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:45","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGYoHsefodd1JjM2k_xQtHgbigs8Hghsr3Xaz649YRES8NRaCtfTwf8Hehqc_joVM8lh6WupLgb26IR07cK9AY93ukhUXl_Tp8vaOCrJXGrty66JsI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGYoHsefodd1JjM2k_xQtHgbigs8Hghsr3Xaz649YRES8NRaCtfTwf8Hehqc_joVM8lh6WupLgb26IR07cK9AY93ukhUXl_Tp8vaOCrJXGrty66JsI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGYoHsefodd1JjM2k_xQtHgbigs8Hghsr3Xaz649YRES8NRaCtfTwf8Hehqc_joVM8lh6WupLgb26IR07cK9AY93ukhUXl_Tp8vaOCrJXGrty66JsI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:54:46.898Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:54:46.903Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:54:46.906Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:46","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8164,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8164,"response":"projects/easy-notifications-post/messages/0:1754276089895246%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8164,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8164,"service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8164,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:54:48","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276089895246%d193f810d193f810","sentAt":"2025-08-04T02:54:48.979Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8164,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:54:48","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"rWnQWeWiHQF22xh6AABr","timestamp":"2025-08-03 23:55:09","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:55:13","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:55:13","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:55:13","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:55:13","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:55:15","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:55:15","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:55:15","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:55:15","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:55:15","type":"route","userId":14}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:55:15","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:55:15","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8165,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8165,"response":"projects/easy-notifications-post/messages/0:1754276120754634%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8165,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8165,"service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8165,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:55:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276120754634%d193f810d193f810","sentAt":"2025-08-04T02:55:19.823Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8165,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:55:19","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGYoHsefodd1JjM2k_xQtHgbigs8Hghsr3Xaz649YRES8NRaCtfTwf8Hehqc_joVM8lh6WupLgb26IR07cK9AY93ukhUXl_Tp8vaOCrJXGrty66JsI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:22","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGYoHsefodd1JjM2k_xQtHgbigs8Hghsr3Xaz649YRES8NRaCtfTwf8Hehqc_joVM8lh6WupLgb26IR07cK9AY93ukhUXl_Tp8vaOCrJXGrty66JsI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:22","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:56:22","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:56:22","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:56:23","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:56:24.402Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:56:24.415Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:56:24","totalClients":1,"type":"socket"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:24","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWa5sfqM2xNjco7lJMGM8CdC5-IY2tBuLJiBeb31FOeB-qg1x5NTgLsbpAr7MJLlgcmopznVh56y3vWnuzHsXivhrL9DRGyKkupx_OJnWUmUD5A6s","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWa5sfqM2xNjco7lJMGM8CdC5-IY2tBuLJiBeb31FOeB-qg1x5NTgLsbpAr7MJLlgcmopznVh56y3vWnuzHsXivhrL9DRGyKkupx_OJnWUmUD5A6s","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWa5sfqM2xNjco7lJMGM8CdC5-IY2tBuLJiBeb31FOeB-qg1x5NTgLsbpAr7MJLlgcmopznVh56y3vWnuzHsXivhrL9DRGyKkupx_OJnWUmUD5A6s","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:56:26.749Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:56:26.783Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:56:26.940Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8166,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8166,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8166,"service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8166,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:56:27","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8166,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:56:27","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:56:52","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:56:53","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:56:53","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:56:54","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:57:02","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:57:03","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:57:03","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:57:03","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:57:15","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:57:16","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:57:17","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:57:17","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:57:28","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:57:29","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:57:29","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:57:30","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:57:38","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:57:39","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:57:39","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:57:39","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:57:50","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:57:52","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:57:52","type":"query"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:57:52","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-03 23:58:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-03 23:58:08","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"dLCNgA_txAC2ZY_iAABt","timestamp":"2025-08-03 23:58:15","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:58:20","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:58:20","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:58:20","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-03 23:58:20","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:58:21","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:58:21","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:58:21","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-03 23:58:21","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:21","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:58:21","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-03 23:58:22","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8167,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8167,"response":"projects/easy-notifications-post/messages/0:1754276310855640%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8167,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8167,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8167,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-03 23:58:29","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276310855640%d193f810d193f810","sentAt":"2025-08-04T02:58:29.929Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8167,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:29","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWa5sfqM2xNjco7lJMGM8CdC5-IY2tBuLJiBeb31FOeB-qg1x5NTgLsbpAr7MJLlgcmopznVh56y3vWnuzHsXivhrL9DRGyKkupx_OJnWUmUD5A6s","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:53","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFWa5sfqM2xNjco7lJMGM8CdC5-IY2tBuLJiBeb31FOeB-qg1x5NTgLsbpAr7MJLlgcmopznVh56y3vWnuzHsXivhrL9DRGyKkupx_OJnWUmUD5A6s","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:53","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:58:53","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:58:53","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:58:53","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:58:54","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:58:54.988Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:54","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:54","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:58:54.998Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:54","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:58:55","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:58:55","type":"query","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:58:55","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-03 23:58:55","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:55","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7E15eEIKV_iCdk2t-YZfqy7QN91GnW97NhAyUIn1M9yz9sEGWW1Rzm3Db2pkYEc3K_HSpw9Qj61LPGaIZmM3yBjNk-7UeahoTTKVqX-OxrHJSINw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7E15eEIKV_iCdk2t-YZfqy7QN91GnW97NhAyUIn1M9yz9sEGWW1Rzm3Db2pkYEc3K_HSpw9Qj61LPGaIZmM3yBjNk-7UeahoTTKVqX-OxrHJSINw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8168,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7E15eEIKV_iCdk2t-YZfqy7QN91GnW97NhAyUIn1M9yz9sEGWW1Rzm3Db2pkYEc3K_HSpw9Qj61LPGaIZmM3yBjNk-7UeahoTTKVqX-OxrHJSINw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","webTokenLength":0}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8168,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8168,"service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8168,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-03 23:58:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8168,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:58:57.598Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:58:57.604Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T02:58:57.663Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:58:57","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:59:47","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-03 23:59:48","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:59:48","type":"query"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:59:49","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:59:55","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-03 23:59:55","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-03 23:59:55","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-03 23:59:55","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:59:56","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-03 23:59:56","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-03 23:59:56","type":"route","userId":14}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-03 23:59:56","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-03 23:59:56","totalClients":1,"type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:00:11","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-04 00:00:13","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:00:13","type":"query"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:00:13","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:00:25","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-04 00:00:27","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:00:27","type":"query"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:00:27","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8169,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:00:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8169,"response":"projects/easy-notifications-post/messages/0:1754276436929582%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:00:36","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8169,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:00:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:36","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:36","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:36","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:37","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:37","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8169,"service":"notifications-app-api","timestamp":"2025-08-04 00:00:38","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8169,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:00:39","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276436929582%d193f810d193f810","sentAt":"2025-08-04T03:00:36.166Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8169,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:00:40","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:00:51","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-04 00:00:52","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:00:52","type":"query"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:00:52","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:07","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:01:07","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:01:07","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:01:08","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:09","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:09","type":"query","userId":14}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:01:09","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-04 00:01:09","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:09","type":"route","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-04 00:01:15","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-04 00:01:16","type":"query"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"wsya0H1_IC4polkdAABv","timestamp":"2025-08-04 00:01:17","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:22","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:01:22","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:01:22","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"NS_OW9U2WFKdodf_AABx","timestamp":"2025-08-04 00:01:22","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:01:22","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:22","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:22","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NS_OW9U2WFKdodf_AABx","timestamp":"2025-08-04 00:01:22","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:22","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:01:23","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NS_OW9U2WFKdodf_AABx","timestamp":"2025-08-04 00:01:23","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8170,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:26","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:26","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:26","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8170,"response":"projects/easy-notifications-post/messages/0:1754276488118577%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8170,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8170,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8170,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:01:27","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276488118577%d193f810d193f810","sentAt":"2025-08-04T03:01:27.183Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8170,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:27","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8171,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8171,"response":"projects/easy-notifications-post/messages/0:1754276491372009%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8171,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8171,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8171,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:01:30","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276491372009%d193f810d193f810","sentAt":"2025-08-04T03:01:30.428Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8171,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:30","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7E15eEIKV_iCdk2t-YZfqy7QN91GnW97NhAyUIn1M9yz9sEGWW1Rzm3Db2pkYEc3K_HSpw9Qj61LPGaIZmM3yBjNk-7UeahoTTKVqX-OxrHJSINw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:37","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7E15eEIKV_iCdk2t-YZfqy7QN91GnW97NhAyUIn1M9yz9sEGWW1Rzm3Db2pkYEc3K_HSpw9Qj61LPGaIZmM3yBjNk-7UeahoTTKVqX-OxrHJSINw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:37","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:37","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:01:37","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:01:37","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:01:38.457Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:01:38.668Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","userId":14}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:01:38","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"NS_OW9U2WFKdodf_AABx","timestamp":"2025-08-04 00:01:38","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:39","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHSYLRXcJouzd3BZJlPu2rUfgIZ9V4Wa8WjXoA4bTIo8_wsueD0mnYhduyL0qauJAxgF0_c7Aa72Ybk9Su8fDxpQEdf9JkZP_do5udPfASeSZBJ7eg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHSYLRXcJouzd3BZJlPu2rUfgIZ9V4Wa8WjXoA4bTIo8_wsueD0mnYhduyL0qauJAxgF0_c7Aa72Ybk9Su8fDxpQEdf9JkZP_do5udPfASeSZBJ7eg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHSYLRXcJouzd3BZJlPu2rUfgIZ9V4Wa8WjXoA4bTIo8_wsueD0mnYhduyL0qauJAxgF0_c7Aa72Ybk9Su8fDxpQEdf9JkZP_do5udPfASeSZBJ7eg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8172,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:01:41.489Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:01:41.505Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:01:41.514Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","userId":14}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8172,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8172,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8172,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:01:41","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8172,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:41","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8173,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8173,"response":"projects/easy-notifications-post/messages/0:1754276507041783%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8173,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8173,"service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8173,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:01:46","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276507041783%d193f810d193f810","sentAt":"2025-08-04T03:01:46.118Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8173,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:01:46","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"NS_OW9U2WFKdodf_AABx","timestamp":"2025-08-04 00:02:00","type":"socket"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:02:04","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:02:04","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:02:05","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:02:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:02:05","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:02:05","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:02:05","type":"route","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:02:05","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:02:06","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8174,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8174,"response":"projects/easy-notifications-post/messages/0:1754276530658260%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8174,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8174,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8174,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:02:09","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276530658260%d193f810d193f810","sentAt":"2025-08-04T03:02:09.723Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8174,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:02:09","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-04 00:02:16","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-04 00:02:17","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8175,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8175,"response":"projects/easy-notifications-post/messages/0:1754276541549765%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8175,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8175,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8175,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:02:20","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276541549765%d193f810d193f810","sentAt":"2025-08-04T03:02:20.605Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8175,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:02:20","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8176,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:02:56","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:56","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8176,"response":"projects/easy-notifications-post/messages/0:1754276578031039%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8176,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8176,"service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8176,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:02:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276578031039%d193f810d193f810","sentAt":"2025-08-04T03:02:57.114Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8176,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:02:57","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8177,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:06","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:06","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8177,"response":"projects/easy-notifications-post/messages/0:1754276587982169%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8177,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8177,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8177,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:03:07","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754276587982169%d193f810d193f810","sentAt":"2025-08-04T03:03:07.047Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8177,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:07","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHSYLRXcJouzd3BZJlPu2rUfgIZ9V4Wa8WjXoA4bTIo8_wsueD0mnYhduyL0qauJAxgF0_c7Aa72Ybk9Su8fDxpQEdf9JkZP_do5udPfASeSZBJ7eg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHSYLRXcJouzd3BZJlPu2rUfgIZ9V4Wa8WjXoA4bTIo8_wsueD0mnYhduyL0qauJAxgF0_c7Aa72Ybk9Su8fDxpQEdf9JkZP_do5udPfASeSZBJ7eg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:12","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:03:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:03:12","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:03:12","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:03:13.006Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:03:13.444Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:03:13","totalClients":1,"type":"socket"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:03:13","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHl2oLaTQGYcRLksJMnM4WoLyBVdA5bzBbzEnE5iHtnkaBCuFfrM3aX5FZiqI5AFPBDcbwmujlubhqWQskNc-JntdIS3_MewSu89I_aL3MA-f0gvoY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHl2oLaTQGYcRLksJMnM4WoLyBVdA5bzBbzEnE5iHtnkaBCuFfrM3aX5FZiqI5AFPBDcbwmujlubhqWQskNc-JntdIS3_MewSu89I_aL3MA-f0gvoY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:15","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHl2oLaTQGYcRLksJMnM4WoLyBVdA5bzBbzEnE5iHtnkaBCuFfrM3aX5FZiqI5AFPBDcbwmujlubhqWQskNc-JntdIS3_MewSu89I_aL3MA-f0gvoY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:15","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8178,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:03:16.037Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:03:16.040Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:03:16.045Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","userId":14}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8178,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8178,"service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8178,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:03:16","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8178,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:03:16","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:07:21","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:07:23","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:07:24","type":"query"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:07:24","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:07:31","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:07:31","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:07:31","type":"query"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:07:32","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:07:50","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:07:51","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:07:51","type":"query"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:07:52","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:08:04","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:08:04","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:08:04","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:08:06","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:08:06","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:08:06","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:08:06","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:08:06","totalClients":1,"type":"socket"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:08:06","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:08:19","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:08:20","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:08:20","type":"query"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:08:20","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:08:34","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:08:35","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:08:35","type":"query"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:08:36","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:08:46","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:08:46","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:08:46","type":"query"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:08:47","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:08:58","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:08:59","totalClients":1,"type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:08:59","type":"query"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:09:00","type":"message","userId":"14"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"lgjPOHHAym5b5GyMAABz","timestamp":"2025-08-04 00:12:39","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHl2oLaTQGYcRLksJMnM4WoLyBVdA5bzBbzEnE5iHtnkaBCuFfrM3aX5FZiqI5AFPBDcbwmujlubhqWQskNc-JntdIS3_MewSu89I_aL3MA-f0gvoY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:25","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHl2oLaTQGYcRLksJMnM4WoLyBVdA5bzBbzEnE5iHtnkaBCuFfrM3aX5FZiqI5AFPBDcbwmujlubhqWQskNc-JntdIS3_MewSu89I_aL3MA-f0gvoY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:25","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHl2oLaTQGYcRLksJMnM4WoLyBVdA5bzBbzEnE5iHtnkaBCuFfrM3aX5FZiqI5AFPBDcbwmujlubhqWQskNc-JntdIS3_MewSu89I_aL3MA-f0gvoY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:25","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:26","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:26.884Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:26","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:27.091Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:27","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:27.157Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:27","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFSo0D51gLzUAemcYo3bApruqpKSzujkHHP3tXUSU4GArk0yXAZ7cBSHB7d5nqJF_UGAMng5t90EJGNLEEWP3FZbTyfYi9wlap_uQvN8gHW2UPt5_k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFSo0D51gLzUAemcYo3bApruqpKSzujkHHP3tXUSU4GArk0yXAZ7cBSHB7d5nqJF_UGAMng5t90EJGNLEEWP3FZbTyfYi9wlap_uQvN8gHW2UPt5_k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFSo0D51gLzUAemcYo3bApruqpKSzujkHHP3tXUSU4GArk0yXAZ7cBSHB7d5nqJF_UGAMng5t90EJGNLEEWP3FZbTyfYi9wlap_uQvN8gHW2UPt5_k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFSo0D51gLzUAemcYo3bApruqpKSzujkHHP3tXUSU4GArk0yXAZ7cBSHB7d5nqJF_UGAMng5t90EJGNLEEWP3FZbTyfYi9wlap_uQvN8gHW2UPt5_k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFSo0D51gLzUAemcYo3bApruqpKSzujkHHP3tXUSU4GArk0yXAZ7cBSHB7d5nqJF_UGAMng5t90EJGNLEEWP3FZbTyfYi9wlap_uQvN8gHW2UPt5_k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:28.873Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:28.892Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:28.900Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:28.911Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:28.919Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:28","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFSo0D51gLzUAemcYo3bApruqpKSzujkHHP3tXUSU4GArk0yXAZ7cBSHB7d5nqJF_UGAMng5t90EJGNLEEWP3FZbTyfYi9wlap_uQvN8gHW2UPt5_k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFSo0D51gLzUAemcYo3bApruqpKSzujkHHP3tXUSU4GArk0yXAZ7cBSHB7d5nqJF_UGAMng5t90EJGNLEEWP3FZbTyfYi9wlap_uQvN8gHW2UPt5_k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:31","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:31.776Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:31.782Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:31","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFJooFL8DvVaAEQumSN_myOkYvOLCf19lselfw7HuvryH7okBHe-GgctXeTP57XUu4Q_CqiRlXOqiHaCOAjGVcNFzLGU7fw-9_mRlEYDUaQNWEIgwA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFJooFL8DvVaAEQumSN_myOkYvOLCf19lselfw7HuvryH7okBHe-GgctXeTP57XUu4Q_CqiRlXOqiHaCOAjGVcNFzLGU7fw-9_mRlEYDUaQNWEIgwA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFJooFL8DvVaAEQumSN_myOkYvOLCf19lselfw7HuvryH7okBHe-GgctXeTP57XUu4Q_CqiRlXOqiHaCOAjGVcNFzLGU7fw-9_mRlEYDUaQNWEIgwA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:34.843Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:34.849Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:34.850Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:34","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFJooFL8DvVaAEQumSN_myOkYvOLCf19lselfw7HuvryH7okBHe-GgctXeTP57XUu4Q_CqiRlXOqiHaCOAjGVcNFzLGU7fw-9_mRlEYDUaQNWEIgwA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:51","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:53.278Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:53","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6uKO1rPPbxRQzTZ8xX_mxKpDeLIn97z1LraAxxc7XBTmOKIhOFMXmwWwa4IrJHTu4EAWlJRJ8_OcWAE7tDh0GtfObbYmGWq2ASkd9-3kDzSjwsVE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:54","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6uKO1rPPbxRQzTZ8xX_mxKpDeLIn97z1LraAxxc7XBTmOKIhOFMXmwWwa4IrJHTu4EAWlJRJ8_OcWAE7tDh0GtfObbYmGWq2ASkd9-3kDzSjwsVE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:54","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:55","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:55.415Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:55","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:55","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:55.648Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:55","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6uKO1rPPbxRQzTZ8xX_mxKpDeLIn97z1LraAxxc7XBTmOKIhOFMXmwWwa4IrJHTu4EAWlJRJ8_OcWAE7tDh0GtfObbYmGWq2ASkd9-3kDzSjwsVE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:58","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6uKO1rPPbxRQzTZ8xX_mxKpDeLIn97z1LraAxxc7XBTmOKIhOFMXmwWwa4IrJHTu4EAWlJRJ8_OcWAE7tDh0GtfObbYmGWq2ASkd9-3kDzSjwsVE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:58","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH6uKO1rPPbxRQzTZ8xX_mxKpDeLIn97z1LraAxxc7XBTmOKIhOFMXmwWwa4IrJHTu4EAWlJRJ8_OcWAE7tDh0GtfObbYmGWq2ASkd9-3kDzSjwsVE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:58","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:59","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:59.136Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:59","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:59","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:59.139Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:59","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:59","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:13:59.143Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:13:59","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7IY7dlHCRXt2773u3KZDkEPP_g9oZjABlhTVcGC0ZDjftleB6PzoxvlyIyzZayQ1kISiZI2gnLG6TsnO_8ElakGDDKSOk5I-1KifoSCLXsJJsFhw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:01","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7IY7dlHCRXt2773u3KZDkEPP_g9oZjABlhTVcGC0ZDjftleB6PzoxvlyIyzZayQ1kISiZI2gnLG6TsnO_8ElakGDDKSOk5I-1KifoSCLXsJJsFhw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:01","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7IY7dlHCRXt2773u3KZDkEPP_g9oZjABlhTVcGC0ZDjftleB6PzoxvlyIyzZayQ1kISiZI2gnLG6TsnO_8ElakGDDKSOk5I-1KifoSCLXsJJsFhw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:01","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7IY7dlHCRXt2773u3KZDkEPP_g9oZjABlhTVcGC0ZDjftleB6PzoxvlyIyzZayQ1kISiZI2gnLG6TsnO_8ElakGDDKSOk5I-1KifoSCLXsJJsFhw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:01","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7IY7dlHCRXt2773u3KZDkEPP_g9oZjABlhTVcGC0ZDjftleB6PzoxvlyIyzZayQ1kISiZI2gnLG6TsnO_8ElakGDDKSOk5I-1KifoSCLXsJJsFhw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:01","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:02.203Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:02.208Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:02.210Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:02.397Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:02.425Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:02","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7IY7dlHCRXt2773u3KZDkEPP_g9oZjABlhTVcGC0ZDjftleB6PzoxvlyIyzZayQ1kISiZI2gnLG6TsnO_8ElakGDDKSOk5I-1KifoSCLXsJJsFhw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:30","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7IY7dlHCRXt2773u3KZDkEPP_g9oZjABlhTVcGC0ZDjftleB6PzoxvlyIyzZayQ1kISiZI2gnLG6TsnO_8ElakGDDKSOk5I-1KifoSCLXsJJsFhw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:30","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:32.900Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:32","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:33.257Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:33","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH21K71Tkl-CiL0sE2m8ai8kUE0EFHz9-6Qi0bBtZC6uGOvM-eC3TgK69wbhsXReuAUiGGR8p_hO0IWkDRf_3WGelN0JNzzv3Xk-_A7bggCkkUikBU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH21K71Tkl-CiL0sE2m8ai8kUE0EFHz9-6Qi0bBtZC6uGOvM-eC3TgK69wbhsXReuAUiGGR8p_hO0IWkDRf_3WGelN0JNzzv3Xk-_A7bggCkkUikBU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH21K71Tkl-CiL0sE2m8ai8kUE0EFHz9-6Qi0bBtZC6uGOvM-eC3TgK69wbhsXReuAUiGGR8p_hO0IWkDRf_3WGelN0JNzzv3Xk-_A7bggCkkUikBU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:34.472Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:34.656Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:14:34.796Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:14:34","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:15:37","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:15:37","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:15:38","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"R2Gw1IYwEdFRJu4mAAB1","timestamp":"2025-08-04 00:15:38","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:15:39","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:15:39","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:15:39","type":"query","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"R2Gw1IYwEdFRJu4mAAB1","timestamp":"2025-08-04 00:15:39","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:15:39","type":"route","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:15:39","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"R2Gw1IYwEdFRJu4mAAB1","timestamp":"2025-08-04 00:15:39","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8179,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8179,"response":"projects/easy-notifications-post/messages/0:1754277350625667%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8179,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8179,"service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8179,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:15:49","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277350625667%d193f810d193f810","sentAt":"2025-08-04T03:15:49.673Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8179,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:15:49","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-04 00:15:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-04 00:15:57","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8180,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8180,"response":"projects/easy-notifications-post/messages/0:1754277362816739%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8180,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8180,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8180,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:16:01","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277362816739%d193f810d193f810","sentAt":"2025-08-04T03:16:01.872Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8180,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:01","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8181,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:04","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:04","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8181,"response":"projects/easy-notifications-post/messages/0:1754277366095253%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8181,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8181,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8181,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:16:05","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277366095253%d193f810d193f810","sentAt":"2025-08-04T03:16:05.137Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8181,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:05","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH21K71Tkl-CiL0sE2m8ai8kUE0EFHz9-6Qi0bBtZC6uGOvM-eC3TgK69wbhsXReuAUiGGR8p_hO0IWkDRf_3WGelN0JNzzv3Xk-_A7bggCkkUikBU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH21K71Tkl-CiL0sE2m8ai8kUE0EFHz9-6Qi0bBtZC6uGOvM-eC3TgK69wbhsXReuAUiGGR8p_hO0IWkDRf_3WGelN0JNzzv3Xk-_A7bggCkkUikBU","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:16:11.660Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:16:11","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:16:12.084Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:12","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:12","type":"route","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"R2Gw1IYwEdFRJu4mAAB1","timestamp":"2025-08-04 00:16:12","totalClients":1,"type":"socket"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:16:12","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8182,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFVe8DFjVZx9yWC2427RS-NGfscoPyDxS71tfKprthnV3GxqDmwRYMSz612EJT1LM4LwLd7WpuLuqMaeWNgJhMAB0JR5pnvyaCoUwCipNXFzOSYDLI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFVe8DFjVZx9yWC2427RS-NGfscoPyDxS71tfKprthnV3GxqDmwRYMSz612EJT1LM4LwLd7WpuLuqMaeWNgJhMAB0JR5pnvyaCoUwCipNXFzOSYDLI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFVe8DFjVZx9yWC2427RS-NGfscoPyDxS71tfKprthnV3GxqDmwRYMSz612EJT1LM4LwLd7WpuLuqMaeWNgJhMAB0JR5pnvyaCoUwCipNXFzOSYDLI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","webTokenLength":0}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8182,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8182,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8182,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:16:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8182,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:16:14.796Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:16:14.800Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:16:14.802Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:14","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8183,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:18","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:18","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:18","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8183,"response":"projects/easy-notifications-post/messages/0:1754277380066468%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8183,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8183,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8183,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:16:19","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277380066468%d193f810d193f810","sentAt":"2025-08-04T03:16:19.103Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8183,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:19","type":"delivery"}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"R2Gw1IYwEdFRJu4mAAB1","timestamp":"2025-08-04 00:16:34","type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:16:38","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:16:38","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:16:38","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"uo7h2qONEKsls5-eAAB3","timestamp":"2025-08-04 00:16:39","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:16:40","type":"query"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uo7h2qONEKsls5-eAAB3","timestamp":"2025-08-04 00:16:40","totalClients":1,"type":"socket"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:16:40","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:16:40","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:40","type":"route","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:16:40","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uo7h2qONEKsls5-eAAB3","timestamp":"2025-08-04 00:16:40","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8184,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8184,"response":"projects/easy-notifications-post/messages/0:1754277418887860%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8184,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8184,"service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8184,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:16:57","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277418887860%d193f810d193f810","sentAt":"2025-08-04T03:16:57.935Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8184,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:16:57","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFVe8DFjVZx9yWC2427RS-NGfscoPyDxS71tfKprthnV3GxqDmwRYMSz612EJT1LM4LwLd7WpuLuqMaeWNgJhMAB0JR5pnvyaCoUwCipNXFzOSYDLI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:00","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFVe8DFjVZx9yWC2427RS-NGfscoPyDxS71tfKprthnV3GxqDmwRYMSz612EJT1LM4LwLd7WpuLuqMaeWNgJhMAB0JR5pnvyaCoUwCipNXFzOSYDLI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:00","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:17:00","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:17:00","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:17:00","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:00","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:17:00.878Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:00","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:17:01","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:17:01","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:17:01","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:17:01.304Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:01","userId":14}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:17:01","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"uo7h2qONEKsls5-eAAB3","timestamp":"2025-08-04 00:17:01","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:01","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHbio5O-MOlYZunGN1vYcDMXyS0FYjmO7nkhPtwf5Gg1DCrryEnvVNn0sn3rA8sbreWe4Y_vCBiPd4nvQtb8aoPk2oa7Ey0I5OCSRInKq2lvacCIlM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHbio5O-MOlYZunGN1vYcDMXyS0FYjmO7nkhPtwf5Gg1DCrryEnvVNn0sn3rA8sbreWe4Y_vCBiPd4nvQtb8aoPk2oa7Ey0I5OCSRInKq2lvacCIlM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHbio5O-MOlYZunGN1vYcDMXyS0FYjmO7nkhPtwf5Gg1DCrryEnvVNn0sn3rA8sbreWe4Y_vCBiPd4nvQtb8aoPk2oa7Ey0I5OCSRInKq2lvacCIlM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:03","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:17:04.145Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:17:04.160Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:17:04.161Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8185,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8185,"response":"projects/easy-notifications-post/messages/0:1754277425785406%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8185,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8185,"service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8185,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:17:04","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277425785406%d193f810d193f810","sentAt":"2025-08-04T03:17:04.843Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8185,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:17:04","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:19:55","type":"query"}
{"error":"getaddrinfo EAI_AGAIN autorack.proxy.rlwy.net","level":"error","message":"Erro ao configurar rota","route":"felipe","service":"notifications-app-api","socketId":"uo7h2qONEKsls5-eAAB3","timestamp":"2025-08-04 00:19:57"}
{"error":"getaddrinfo EAI_AGAIN autorack.proxy.rlwy.net","level":"error","message":"Erro ao executar consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:19:57"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHbio5O-MOlYZunGN1vYcDMXyS0FYjmO7nkhPtwf5Gg1DCrryEnvVNn0sn3rA8sbreWe4Y_vCBiPd4nvQtb8aoPk2oa7Ey0I5OCSRInKq2lvacCIlM","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:15","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:16","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:16.651Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:16","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF10fwB_9n_CkFy4qrWXm4yJ_yX51NYJK9yUyvwhLYCRTAzW2Gr-Tqm_avmUQNFEIvkq6bo2ly6rV6rwMq-ZoOGHfvzMHs-BD3qHbcIwyRF8Hz9GOI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:18","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF10fwB_9n_CkFy4qrWXm4yJ_yX51NYJK9yUyvwhLYCRTAzW2Gr-Tqm_avmUQNFEIvkq6bo2ly6rV6rwMq-ZoOGHfvzMHs-BD3qHbcIwyRF8Hz9GOI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:18","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:19.112Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:19","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:19.342Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:19","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"uo7h2qONEKsls5-eAAB3","timestamp":"2025-08-04 00:24:27","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF10fwB_9n_CkFy4qrWXm4yJ_yX51NYJK9yUyvwhLYCRTAzW2Gr-Tqm_avmUQNFEIvkq6bo2ly6rV6rwMq-ZoOGHfvzMHs-BD3qHbcIwyRF8Hz9GOI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF10fwB_9n_CkFy4qrWXm4yJ_yX51NYJK9yUyvwhLYCRTAzW2Gr-Tqm_avmUQNFEIvkq6bo2ly6rV6rwMq-ZoOGHfvzMHs-BD3qHbcIwyRF8Hz9GOI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF10fwB_9n_CkFy4qrWXm4yJ_yX51NYJK9yUyvwhLYCRTAzW2Gr-Tqm_avmUQNFEIvkq6bo2ly6rV6rwMq-ZoOGHfvzMHs-BD3qHbcIwyRF8Hz9GOI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF10fwB_9n_CkFy4qrWXm4yJ_yX51NYJK9yUyvwhLYCRTAzW2Gr-Tqm_avmUQNFEIvkq6bo2ly6rV6rwMq-ZoOGHfvzMHs-BD3qHbcIwyRF8Hz9GOI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bF10fwB_9n_CkFy4qrWXm4yJ_yX51NYJK9yUyvwhLYCRTAzW2Gr-Tqm_avmUQNFEIvkq6bo2ly6rV6rwMq-ZoOGHfvzMHs-BD3qHbcIwyRF8Hz9GOI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:31","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:32.792Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:32","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:32.894Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:32","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:32","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:32.918Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:32","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:33.006Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:33","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:33","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:33.029Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:33","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:34.765Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:34.942Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:34.965Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:34.984Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:35.065Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:35.084Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:35.158Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:35","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:24:36","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:24:36","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:24:36","type":"query"}
{"level":"info","message":"Cliente conectado","service":"notifications-app-api","socketId":"ih-GD7I8ysR7kFMdAAB5","timestamp":"2025-08-04 00:24:36","type":"socket"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:24:37","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:24:37","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:24:37","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:37","type":"route","userId":14}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:24:37","type":"message","userId":"14"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ih-GD7I8ysR7kFMdAAB5","timestamp":"2025-08-04 00:24:37","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ih-GD7I8ysR7kFMdAAB5","timestamp":"2025-08-04 00:24:37","totalClients":1,"type":"socket"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8186,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8186,"response":"projects/easy-notifications-post/messages/0:1754277883687089%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8186,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8186,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8186,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:24:42","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277883687089%d193f810d193f810","sentAt":"2025-08-04T03:24:42.732Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8186,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:42","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:48","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGtG4HVN42rlfcKs5-_sbQ1h5jX66PBAUiAbPZ2MKGv96560nMiQzlQIyMTRJHxpep9WEuEjiLXH7G4pPP6E3mPHF76S0Tuh3Fw6bTVpltyJcws_Ns","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:48","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:24:48","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:24:48","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:24:48","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:49.026Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:49.444Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","userId":14}
{"level":"info","message":"Rota associada","route":"felipe","service":"notifications-app-api","socketId":"ih-GD7I8ysR7kFMdAAB5","timestamp":"2025-08-04 00:24:49","totalClients":1,"type":"socket"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","type":"route","userId":14}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:24:49","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFvxriHrdYkx9cUlOK9ySXO5oCxIPtVC7ZzQEtNltjv2kWmaUe_mj5z9ExlgLTd9k7SAYeqL-v-xT-NjLPVeCiJA7JvOKSHXafDV6eSNgFMW7TPEYc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFvxriHrdYkx9cUlOK9ySXO5oCxIPtVC7ZzQEtNltjv2kWmaUe_mj5z9ExlgLTd9k7SAYeqL-v-xT-NjLPVeCiJA7JvOKSHXafDV6eSNgFMW7TPEYc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFvxriHrdYkx9cUlOK9ySXO5oCxIPtVC7ZzQEtNltjv2kWmaUe_mj5z9ExlgLTd9k7SAYeqL-v-xT-NjLPVeCiJA7JvOKSHXafDV6eSNgFMW7TPEYc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8187,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:51.927Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:51.934Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:24:51.935Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:51","userId":14}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8187,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","type":"warn"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Tentando envio WebSocket","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","type":"message"}
{"clientsCount":1,"fcmSuccess":false,"level":"info","message":"Notificação enviada via WebSocket","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8187,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"FAILED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":true,"websocketOnly":true},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8187,"results":{"expo":false,"fcm":false,"web":false,"websocket":true},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:24:52","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":false,"success":true}},"integration":{"fcmSuccess":false,"overallDelivery":"SUCCESS","pushDelivered":false,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8187,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:52","type":"delivery"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8188,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8188,"response":"projects/easy-notifications-post/messages/0:1754277896548213%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8188,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Tentando envio WebSocket","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"message"}
{"clientsCount":1,"fcmSuccess":true,"level":"info","message":"Notificação enviada via WebSocket","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"message","uiSynchronized":true}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8188,"service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"SYNCED"},"integration":{"bothFailed":false,"bothSuccess":true,"fcmOnly":false,"pushDelivered":true,"uiSynchronized":true,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8188,"results":{"expo":false,"fcm":true,"web":false,"websocket":true},"service":"notifications-app-api","successCount":2,"timestamp":"2025-08-04 00:24:55","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754277896548213%d193f810d193f810","sentAt":"2025-08-04T03:24:55.584Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"clientsCount":1,"sentAfterFCM":true,"success":true}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":true,"websocketSuccess":true},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8188,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:24:55","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFvxriHrdYkx9cUlOK9ySXO5oCxIPtVC7ZzQEtNltjv2kWmaUe_mj5z9ExlgLTd9k7SAYeqL-v-xT-NjLPVeCiJA7JvOKSHXafDV6eSNgFMW7TPEYc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:20","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:31:21","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:31:21","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:31:21","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:31:22","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:22","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:22.563Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:22","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:31:22","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:31:22","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:22","type":"route","userId":14}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:31:22","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:31:23","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIiRQFuZuxYsbmbIK50viprpLYILgTlyc4ebOKofRb7w6bdgKtlZ0hqd0zVRXfz7q2KJvPiYffrsOyzfkokLRAl9JBDVoQIdpWKLQgmvMGd25Rjs0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:24","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIiRQFuZuxYsbmbIK50viprpLYILgTlyc4ebOKofRb7w6bdgKtlZ0hqd0zVRXfz7q2KJvPiYffrsOyzfkokLRAl9JBDVoQIdpWKLQgmvMGd25Rjs0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:24","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:24.539Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:24","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:24","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:24.543Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:24","userId":14}
{"level":"info","message":"Cliente desconectado","remainingClients":0,"route":"felipe","service":"notifications-app-api","socketId":"ih-GD7I8ysR7kFMdAAB5","timestamp":"2025-08-04 00:31:27","type":"socket"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIiRQFuZuxYsbmbIK50viprpLYILgTlyc4ebOKofRb7w6bdgKtlZ0hqd0zVRXfz7q2KJvPiYffrsOyzfkokLRAl9JBDVoQIdpWKLQgmvMGd25Rjs0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFIiRQFuZuxYsbmbIK50viprpLYILgTlyc4ebOKofRb7w6bdgKtlZ0hqd0zVRXfz7q2KJvPiYffrsOyzfkokLRAl9JBDVoQIdpWKLQgmvMGd25Rjs0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEBILuyYyv-KTP_Disl1nCkxW_rjxLInGyBL4khVqlYLoiY16-pkoT93w8gsh1QLMVt7v8UknqO40aK3L4na4b_Ctyr49LQP45HtvkvMz85FKNsVZY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:52","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEBILuyYyv-KTP_Disl1nCkxW_rjxLInGyBL4khVqlYLoiY16-pkoT93w8gsh1QLMVt7v8UknqO40aK3L4na4b_Ctyr49LQP45HtvkvMz85FKNsVZY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:52","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEBILuyYyv-KTP_Disl1nCkxW_rjxLInGyBL4khVqlYLoiY16-pkoT93w8gsh1QLMVt7v8UknqO40aK3L4na4b_Ctyr49LQP45HtvkvMz85FKNsVZY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:52","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:58.636Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:58.831Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:58.838Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:58.847Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:31:58.853Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:31:58","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:32:01","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:32:01","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:32:01","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:32:01","type":"query","userId":14}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:01","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:01","type":"route","userId":14}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:01","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:32:02","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:32:02","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-04 00:32:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-04 00:32:05","type":"query"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:06","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8189,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:09","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8189,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:09","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8189,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8189,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8189,"response":"projects/easy-notifications-post/messages/0:1754278331053554%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8189,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8189,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8189,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8189,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8189,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8189,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8189,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:32:10","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278331053554%d193f810d193f810","sentAt":"2025-08-04T03:32:10.075Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8189,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:10","type":"delivery"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:11","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8190,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8190,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8190,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8190,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8190,"response":"projects/easy-notifications-post/messages/0:1754278335955963%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8190,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8190,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8190,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8190,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8190,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8190,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8190,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:32:14","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278335955963%d193f810d193f810","sentAt":"2025-08-04T03:32:14.995Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8190,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:14","type":"delivery"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:16","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8191,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8191,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8191,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8191,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8191,"response":"projects/easy-notifications-post/messages/0:1754278345161446%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8191,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8191,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8191,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8191,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8191,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8191,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8191,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:32:24","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278345161446%d193f810d193f810","sentAt":"2025-08-04T03:32:24.186Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8191,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:24","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEBILuyYyv-KTP_Disl1nCkxW_rjxLInGyBL4khVqlYLoiY16-pkoT93w8gsh1QLMVt7v8UknqO40aK3L4na4b_Ctyr49LQP45HtvkvMz85FKNsVZY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:26","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEBILuyYyv-KTP_Disl1nCkxW_rjxLInGyBL4khVqlYLoiY16-pkoT93w8gsh1QLMVt7v8UknqO40aK3L4na4b_Ctyr49LQP45HtvkvMz85FKNsVZY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:26","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:32:26","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:32:26","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:32:26","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:32:27.259Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:32:27.477Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","type":"route","userId":14}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:27","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHK2wwj5x8F2lyRdTz-zB6cikw8LXgSO-0oT-Oh96j6dP7aa5EKIxMuexqTFI9u3XyeFQVX2Tj5-fXNFD3uexyT6Jhg92AOg4pHUVerVZxy_68tKUE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHK2wwj5x8F2lyRdTz-zB6cikw8LXgSO-0oT-Oh96j6dP7aa5EKIxMuexqTFI9u3XyeFQVX2Tj5-fXNFD3uexyT6Jhg92AOg4pHUVerVZxy_68tKUE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHK2wwj5x8F2lyRdTz-zB6cikw8LXgSO-0oT-Oh96j6dP7aa5EKIxMuexqTFI9u3XyeFQVX2Tj5-fXNFD3uexyT6Jhg92AOg4pHUVerVZxy_68tKUE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:32:29.840Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:32:29.845Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:32:29.848Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:29","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8192,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8192,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8192,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8192,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8192,"response":"projects/easy-notifications-post/messages/0:1754278352373784%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8192,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8192,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8192,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8192,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8192,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8192,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8192,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:32:31","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278352373784%d193f810d193f810","sentAt":"2025-08-04T03:32:31.401Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8192,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:31","type":"delivery"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:32","type":"message","userId":"14"}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:37","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8193,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:37","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8193,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:37","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8193,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8193,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:37","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8193,"response":"projects/easy-notifications-post/messages/0:1754278359294312%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8193,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8193,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8193,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8193,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8193,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8193,"service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8193,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:32:38","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278359294312%d193f810d193f810","sentAt":"2025-08-04T03:32:38.325Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8193,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:32:38","type":"delivery"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:42","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:47","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:52","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 8193","service":"notifications-app-api","timestamp":"2025-08-04 00:32:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 00:32:55","type":"query"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:32:57","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 8192","service":"notifications-app-api","timestamp":"2025-08-04 00:32:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 00:32:57","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 8191","service":"notifications-app-api","timestamp":"2025-08-04 00:32:59","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 00:32:59","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 8190","service":"notifications-app-api","timestamp":"2025-08-04 00:33:01","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 00:33:01","type":"query"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:02","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE messages SET status = 'closed' WHERE id = 8189","service":"notifications-app-api","timestamp":"2025-08-04 00:33:02","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 00:33:03","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8194,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8194,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8194,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8194,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8194,"response":"projects/easy-notifications-post/messages/0:1754278386468125%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8194,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8194,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8194,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8194,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8194,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8194,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8194,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:33:05","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278386468125%d193f810d193f810","sentAt":"2025-08-04T03:33:05.471Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8194,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:05","type":"delivery"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:07","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8195,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8195,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8195,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8195,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8195,"response":"projects/easy-notifications-post/messages/0:1754278391655974%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8195,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8195,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8195,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8195,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8195,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8195,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8195,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:33:10","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278391655974%d193f810d193f810","sentAt":"2025-08-04T03:33:10.669Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8195,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:10","type":"delivery"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:12","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:17","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8196,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:23","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8196,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:23","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8196,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8196,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:23","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8196,"response":"projects/easy-notifications-post/messages/0:1754278405379818%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8196,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8196,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8196,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8196,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8196,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8196,"service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8196,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:33:24","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278405379818%d193f810d193f810","sentAt":"2025-08-04T03:33:24.441Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8196,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:24","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHK2wwj5x8F2lyRdTz-zB6cikw8LXgSO-0oT-Oh96j6dP7aa5EKIxMuexqTFI9u3XyeFQVX2Tj5-fXNFD3uexyT6Jhg92AOg4pHUVerVZxy_68tKUE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:35","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHK2wwj5x8F2lyRdTz-zB6cikw8LXgSO-0oT-Oh96j6dP7aa5EKIxMuexqTFI9u3XyeFQVX2Tj5-fXNFD3uexyT6Jhg92AOg4pHUVerVZxy_68tKUE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:36","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:33:36","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:33:36","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:33:36","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:33:37","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:33:37.757Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:33:37.975Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:37","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:33:38","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:33:38","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:38","type":"route","userId":14}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:38","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:38","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHXW9tmiQm5va8VMTg0c4A8CyCbzz22o80zOqlI6oT18paw3NaQLLgOqf0qqjdXOHvGPZS_B9-YyhXgR_lcDf3qqzSJk8vsDYQ7VK2zBR2jKM2koXQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:38","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHXW9tmiQm5va8VMTg0c4A8CyCbzz22o80zOqlI6oT18paw3NaQLLgOqf0qqjdXOHvGPZS_B9-YyhXgR_lcDf3qqzSJk8vsDYQ7VK2zBR2jKM2koXQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:38","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHXW9tmiQm5va8VMTg0c4A8CyCbzz22o80zOqlI6oT18paw3NaQLLgOqf0qqjdXOHvGPZS_B9-YyhXgR_lcDf3qqzSJk8vsDYQ7VK2zBR2jKM2koXQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:39","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:33:39.536Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:39","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:33:39.773Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:39","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:33:40.611Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:33:40","userId":14}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:43","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:48","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:53","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:33:58","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:03","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:08","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:13","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:18","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:23","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8197,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:34:24","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8197,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:24","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8197,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:24","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8197,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8197,"response":"projects/easy-notifications-post/messages/0:1754278466428557%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:34:25","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8197,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:34:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8197,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:34:26","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8197,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:27","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8197,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:27","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8197,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:28","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8197,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:28","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8197,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:34:28","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278466428557%d193f810d193f810","sentAt":"2025-08-04T03:34:25.728Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8197,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:34:29","type":"delivery"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:30","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:33","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8198,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:34:34","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8198,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:34","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8198,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8198,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:34","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8198,"response":"projects/easy-notifications-post/messages/0:1754278476163195%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:34:35","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8198,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:34:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8198,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:34:35","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8198,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:36","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8198,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:36","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8198,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:36","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8198,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:36","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8198,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:34:37","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278476163195%d193f810d193f810","sentAt":"2025-08-04T03:34:35.379Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8198,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:34:37","type":"delivery"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:38","type":"message","userId":"14"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:43","type":"message","userId":"14"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:48","type":"message","userId":"14"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:53","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-04 00:34:54","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-04 00:34:54","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8199,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:34:58","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8199,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:58","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8199,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8199,"service":"notifications-app-api","timestamp":"2025-08-04 00:34:58","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:34:59","type":"message","userId":"14"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8199,"response":"projects/easy-notifications-post/messages/0:1754278500425287%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:34:59","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8199,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:34:59","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8199,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:00","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8199,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:00","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8199,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:00","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8199,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:00","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8199,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:00","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8199,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:35:00","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278500425287%d193f810d193f810","sentAt":"2025-08-04T03:34:59.875Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8199,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:00","type":"delivery"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:03","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHXW9tmiQm5va8VMTg0c4A8CyCbzz22o80zOqlI6oT18paw3NaQLLgOqf0qqjdXOHvGPZS_B9-YyhXgR_lcDf3qqzSJk8vsDYQ7VK2zBR2jKM2koXQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHXW9tmiQm5va8VMTg0c4A8CyCbzz22o80zOqlI6oT18paw3NaQLLgOqf0qqjdXOHvGPZS_B9-YyhXgR_lcDf3qqzSJk8vsDYQ7VK2zBR2jKM2koXQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:35:05.803Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:35:05.958Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:05","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:06","type":"route","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:06","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:06","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE2680rqVthpuvYgVYzPlFtMNpqrWZfxBP3Mv78WWEMsPocWVUY8zG5hZA4QZHkhFlvO6dsVXDfOZxyxnsxZsLwQKgeVAOKrhWxajjeLs5BhEmA890","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:08","webTokenLength":0}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8200,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:08","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:08","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:08","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:09","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE2680rqVthpuvYgVYzPlFtMNpqrWZfxBP3Mv78WWEMsPocWVUY8zG5hZA4QZHkhFlvO6dsVXDfOZxyxnsxZsLwQKgeVAOKrhWxajjeLs5BhEmA890","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE2680rqVthpuvYgVYzPlFtMNpqrWZfxBP3Mv78WWEMsPocWVUY8zG5hZA4QZHkhFlvO6dsVXDfOZxyxnsxZsLwQKgeVAOKrhWxajjeLs5BhEmA890","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:09","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:35:09.987Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:09","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:35:10.149Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:10","userId":14}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:10","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando WebSocket e fallbacks","messageId":8200,"nextStep":"WEBSOCKET_THEN_FALLBACKS","service":"notifications-app-api","timestamp":"2025-08-04 00:35:10","type":"warn"}
{"clientsByRoute":{},"fcmSuccess":false,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8200,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:10","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:10","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8200,"service":"notifications-app-api","timestamp":"2025-08-04 00:35:11","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":true,"bothSuccess":false,"fcmOnly":false,"pushDelivered":false,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8200,"results":{"expo":false,"fcm":false,"web":false,"websocket":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 00:35:11","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":false,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":false,"overallDelivery":"FAILED","pushDelivered":false,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8200,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:11","type":"delivery"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:35:12.226Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:35:12","userId":14}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:12","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:16","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:21","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:26","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:31","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:36","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:41","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:46","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:51","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:35:56","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:36:01","type":"query"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:01","type":"message","userId":"14"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:36:01","type":"query"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:01","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:06","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:11","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:16","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:21","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:26","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:31","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:36","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:41","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:46","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:51","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:36:56","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:01","type":"message","userId":"14"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:06","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"integrationMode":"FCM_PRIORITY_WITH_WEBSOCKET_SYNC","level":"info","message":"Iniciando envio com integração FCM-WebSocket","messageId":8201,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:37:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8201,"service":"notifications-app-api","timestamp":"2025-08-04 00:37:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8201,"service":"notifications-app-api","timestamp":"2025-08-04 00:37:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8201,"service":"notifications-app-api","timestamp":"2025-08-04 00:37:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:12","type":"message","userId":"14"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8201,"response":"projects/easy-notifications-post/messages/0:1754278633865125%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:37:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso - tentando WebSocket para sincronizar UI","messageId":8201,"nextStep":"WEBSOCKET_SYNC","service":"notifications-app-api","timestamp":"2025-08-04 00:37:14","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"clientsByRoute":{},"fcmSuccess":true,"hasClients":false,"level":"info","message":"WebSocket não disponível - sem clientes conectados","messageId":8201,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:37:14","totalRoutes":[],"type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8201,"service":"notifications-app-api","timestamp":"2025-08-04 00:37:14","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8201,"service":"notifications-app-api","timestamp":"2025-08-04 00:37:14","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8201,"service":"notifications-app-api","timestamp":"2025-08-04 00:37:14","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8201,"service":"notifications-app-api","timestamp":"2025-08-04 00:37:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED","uiSynchronization":"NOT_SYNCED"},"integration":{"bothFailed":false,"bothSuccess":false,"fcmOnly":true,"pushDelivered":true,"uiSynchronized":false,"websocketOnly":false},"level":"info","message":"Resumo do envio com integração FCM-WebSocket","messageId":8201,"results":{"expo":false,"fcm":true,"web":false,"websocket":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:37:15","totalMethods":4,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754278633865125%d193f810d193f810","sentAt":"2025-08-04T03:37:14.101Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false},"websocket":{"error":"NO_WEBSOCKET_CLIENTS","fcmSuccess":true,"message":"Nenhum cliente WebSocket conectado para esta rota","success":false}},"integration":{"fcmSuccess":true,"overallDelivery":"SUCCESS","pushDelivered":true,"uiSynchronized":false,"websocketSuccess":false},"level":"info","message":"Mensagem processada com integração FCM-WebSocket","messageId":8201,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:37:15","type":"delivery"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:16","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:21","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:26","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:37:29","type":"query"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:30","type":"message","userId":"14"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:37:30","type":"query"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:31","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:40","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:45","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:50","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:37:55","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:00","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 00:38:03","type":"query"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:03","type":"message","userId":"14"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 00:38:04","type":"query"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:04","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:08","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:13","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:18","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:24","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:49","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:54","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:38:59","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:04","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:09","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:14","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:19","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:24","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:49","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:54","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:39:59","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:04","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:09","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:14","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:19","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:24","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:49","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:54","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:40:59","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:04","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:09","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:14","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:19","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:24","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:49","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:54","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:41:59","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:04","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:09","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:14","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:19","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:24","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:49","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:54","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:42:59","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:04","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:09","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:14","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:19","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:24","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:49","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:54","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:43:59","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:04","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:09","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:14","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:19","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:24","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:44:49","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:45:24"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:45:24"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:28","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:28","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:28","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:29","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:30","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:34","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:39","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:44","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:49","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:45:54","type":"message","userId":"14"}
{"count":3,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:00","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8202,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:01","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:01","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:01","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8202,"response":"projects/easy-notifications-post/messages/0:1754279163456296%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:46:02","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:02","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8202,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8202,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:46:02","totalMethods":3,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754279163456296%d193f810d193f810","sentAt":"2025-08-04T03:46:02.447Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM","messageId":8202,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:02","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bE2680rqVthpuvYgVYzPlFtMNpqrWZfxBP3Mv78WWEMsPocWVUY8zG5hZA4QZHkhFlvO6dsVXDfOZxyxnsxZsLwQKgeVAOKrhWxajjeLs5BhEmA890","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:04","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:46:04.851Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:04","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:05","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEEf0dlK5CX2JWX8B3zItO17tarUzMN4fVnF60pIXivsnNLdWN6UpLxwt6L8F6dvLBR47kkoCS17mSKLmX7FoO1-Vv0rUwRcB9HE-j2-QaMmBbpurQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:07","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEEf0dlK5CX2JWX8B3zItO17tarUzMN4fVnF60pIXivsnNLdWN6UpLxwt6L8F6dvLBR47kkoCS17mSKLmX7FoO1-Vv0rUwRcB9HE-j2-QaMmBbpurQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:07","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:46:08.086Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T03:46:08.095Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:08","userId":14}
{"count":4,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:10","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8203,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8203,"response":"projects/easy-notifications-post/messages/0:1754279172613685%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8203,"service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8203,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:46:11","totalMethods":3,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754279172613685%d193f810d193f810","sentAt":"2025-08-04T03:46:11.617Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM","messageId":8203,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:46:11","type":"delivery"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:15","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:20","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:25","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:30","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:35","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:40","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:45","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:50","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:46:55","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:00","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:05","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:10","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:47:13"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:47:13"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:17","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:20","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:25","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:30","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:35","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:47:38"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:47:38"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:42","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:45","type":"message","userId":"14"}
{"count":5,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:50","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8204,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:47:53","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:53","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:53","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8204,"response":"projects/easy-notifications-post/messages/0:1754279275619298%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:47:54","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:54","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:54","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:54","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:54","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8204,"service":"notifications-app-api","timestamp":"2025-08-04 00:47:54","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8204,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:47:54","totalMethods":3,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754279275619298%d193f810d193f810","sentAt":"2025-08-04T03:47:54.619Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM","messageId":8204,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:47:54","type":"delivery"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:47:55","type":"message","userId":"14"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:00","type":"message","userId":"14"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:05","type":"message","userId":"14"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:10","type":"message","userId":"14"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:15","type":"message","userId":"14"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:20","type":"message","userId":"14"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:25","type":"message","userId":"14"}
{"count":6,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:30","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8205,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:48:30","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:30","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8205,"response":"projects/easy-notifications-post/messages/0:1754279312177599%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 00:48:31","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:31","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:31","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:31","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:31","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8205,"service":"notifications-app-api","timestamp":"2025-08-04 00:48:31","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8205,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 00:48:31","totalMethods":3,"type":"message"}
{"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754279312177599%d193f810d193f810","sentAt":"2025-08-04T03:48:31.175Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM","messageId":8205,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 00:48:31","type":"delivery"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:35","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:40","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:45","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:50","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:48:55","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:00","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:05","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:10","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:15","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:20","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:25","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:30","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:35","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:40","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:45","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:50","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:49:55","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:00","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:05","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:10","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:15","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:20","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:25","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:30","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:35","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:40","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:45","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:50","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:50:55","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:00","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:05","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:10","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:15","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:20","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:25","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:30","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:35","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:40","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:45","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:50","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:51:55","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:01","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:11","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:16","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:21","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:26","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:31","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:36","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:41","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:46","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:51","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:52:56","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:01","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:11","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:16","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:21","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:26","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:31","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:36","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:41","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:46","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:51","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:53:56","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:01","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:11","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:16","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:21","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:26","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:31","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:36","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:41","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:46","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:51","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:54:56","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:01","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:11","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:55:18"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:55:18"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:22","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:22","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:55:26"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:55:26"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:30","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:31","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:55:36"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:55:36"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:39","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:41","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:55:46"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:55:46"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:50","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:51","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:55:56","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:55:59"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:55:59"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:04","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:11","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 00:56:16"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 00:56:16"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:19","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:21","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:26","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:31","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:36","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:41","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:46","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:51","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:56:56","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:01","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:11","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:16","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:21","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:26","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:31","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:36","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:41","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:46","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:51","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:57:56","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:01","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:11","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:16","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:21","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:26","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:31","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:36","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:41","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:46","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:51","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:58:56","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:01","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:06","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:11","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:16","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:21","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:26","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:31","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:36","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:42","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:47","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:52","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 00:59:57","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:02","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:07","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:12","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:17","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:22","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:27","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:32","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:37","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:42","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:47","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:52","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:00:57","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:02","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:07","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:12","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:17","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:01:18","type":"query"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:18","type":"message","userId":"14"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:01:18","type":"query"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:19","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:23","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:28","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:33","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:38","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:43","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:48","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:53","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:01:58","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:03","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:08","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:13","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:18","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:23","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:28","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:33","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:38","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:02:43","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEEf0dlK5CX2JWX8B3zItO17tarUzMN4fVnF60pIXivsnNLdWN6UpLxwt6L8F6dvLBR47kkoCS17mSKLmX7FoO1-Vv0rUwRcB9HE-j2-QaMmBbpurQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:17","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:03:17","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:03:17","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:03:17","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:03:19.060Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","type":"route","userId":14}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:03:19","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bESlbzBYg5oEToEiQh-kVTWmmaN6jeskK20KNCiHOe36HIQUBpZOJI0dSxcsD5toEFhtzKvZ2-f-UbFfipV_TMNkmqbIrplNR0pMdG9-Li0z9248DE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:21","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bESlbzBYg5oEToEiQh-kVTWmmaN6jeskK20KNCiHOe36HIQUBpZOJI0dSxcsD5toEFhtzKvZ2-f-UbFfipV_TMNkmqbIrplNR0pMdG9-Li0z9248DE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:21","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:03:21.580Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:21","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:21","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:03:21.585Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:21","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:03:27","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:03:27","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:03:27","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:03:27","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:03:27","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:03:27","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:03:28","type":"route","userId":14}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:03:28","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:03:28","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bESlbzBYg5oEToEiQh-kVTWmmaN6jeskK20KNCiHOe36HIQUBpZOJI0dSxcsD5toEFhtzKvZ2-f-UbFfipV_TMNkmqbIrplNR0pMdG9-Li0z9248DE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bESlbzBYg5oEToEiQh-kVTWmmaN6jeskK20KNCiHOe36HIQUBpZOJI0dSxcsD5toEFhtzKvZ2-f-UbFfipV_TMNkmqbIrplNR0pMdG9-Li0z9248DE","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:03","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:05:04.573Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:04","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:05:04.575Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:04","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnhH85kMzPm2heGo_bkHhlKwB-DuKBo1bD3bvQzIr1runknxtVe72BzROkp62xC6vRXG47VAOIgPn9eU_s3MlIU0FfHnz5GEz6aNIdWZwCutPIFZc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnhH85kMzPm2heGo_bkHhlKwB-DuKBo1bD3bvQzIr1runknxtVe72BzROkp62xC6vRXG47VAOIgPn9eU_s3MlIU0FfHnz5GEz6aNIdWZwCutPIFZc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnhH85kMzPm2heGo_bkHhlKwB-DuKBo1bD3bvQzIr1runknxtVe72BzROkp62xC6vRXG47VAOIgPn9eU_s3MlIU0FfHnz5GEz6aNIdWZwCutPIFZc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:05:06.699Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:05:06.906Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:05:06.908Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:05:06","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:06:06","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:06:06","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:06:06","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:06:07","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:06:07","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:06:07","type":"query","userId":14}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:06:07","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:06:07","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:06:08","type":"route","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnhH85kMzPm2heGo_bkHhlKwB-DuKBo1bD3bvQzIr1runknxtVe72BzROkp62xC6vRXG47VAOIgPn9eU_s3MlIU0FfHnz5GEz6aNIdWZwCutPIFZc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:33","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnhH85kMzPm2heGo_bkHhlKwB-DuKBo1bD3bvQzIr1runknxtVe72BzROkp62xC6vRXG47VAOIgPn9eU_s3MlIU0FfHnz5GEz6aNIdWZwCutPIFZc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:33","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEnhH85kMzPm2heGo_bkHhlKwB-DuKBo1bD3bvQzIr1runknxtVe72BzROkp62xC6vRXG47VAOIgPn9eU_s3MlIU0FfHnz5GEz6aNIdWZwCutPIFZc","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:33","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:35.542Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:35.844Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:35","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:35","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:35.966Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:35","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFEUoaawhadOh9Uy_5pJupvfkTOaG09QHePHdhaJnUIBR6kt0TSER7EbXiRLK36JUNdu9Dn6G2FHFk2AIHbNBnofTSRUKyI31EpyY_7HpTB3x-KCNo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:36","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFEUoaawhadOh9Uy_5pJupvfkTOaG09QHePHdhaJnUIBR6kt0TSER7EbXiRLK36JUNdu9Dn6G2FHFk2AIHbNBnofTSRUKyI31EpyY_7HpTB3x-KCNo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:36","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFEUoaawhadOh9Uy_5pJupvfkTOaG09QHePHdhaJnUIBR6kt0TSER7EbXiRLK36JUNdu9Dn6G2FHFk2AIHbNBnofTSRUKyI31EpyY_7HpTB3x-KCNo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:36","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFEUoaawhadOh9Uy_5pJupvfkTOaG09QHePHdhaJnUIBR6kt0TSER7EbXiRLK36JUNdu9Dn6G2FHFk2AIHbNBnofTSRUKyI31EpyY_7HpTB3x-KCNo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:36","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFEUoaawhadOh9Uy_5pJupvfkTOaG09QHePHdhaJnUIBR6kt0TSER7EbXiRLK36JUNdu9Dn6G2FHFk2AIHbNBnofTSRUKyI31EpyY_7HpTB3x-KCNo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:36","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:37.333Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:37.527Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:37.691Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:37","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:37","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:38.012Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:38","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:38","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:38.356Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:38","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFEUoaawhadOh9Uy_5pJupvfkTOaG09QHePHdhaJnUIBR6kt0TSER7EbXiRLK36JUNdu9Dn6G2FHFk2AIHbNBnofTSRUKyI31EpyY_7HpTB3x-KCNo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:42","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFEUoaawhadOh9Uy_5pJupvfkTOaG09QHePHdhaJnUIBR6kt0TSER7EbXiRLK36JUNdu9Dn6G2FHFk2AIHbNBnofTSRUKyI31EpyY_7HpTB3x-KCNo","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:42","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:43.087Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:43","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:43","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:43.332Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:43","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHMAKFQ1fKhBLzlFUad8CbynsVhRwmxmN12cnByjftOD9NoSBXVw9TfKlL2xQZDe9rgfxyLZ8yp_rw1wAsKIpK9Ef6c5i8KZHGseq0wygVUdtRthY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:45","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHMAKFQ1fKhBLzlFUad8CbynsVhRwmxmN12cnByjftOD9NoSBXVw9TfKlL2xQZDe9rgfxyLZ8yp_rw1wAsKIpK9Ef6c5i8KZHGseq0wygVUdtRthY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:45","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHMAKFQ1fKhBLzlFUad8CbynsVhRwmxmN12cnByjftOD9NoSBXVw9TfKlL2xQZDe9rgfxyLZ8yp_rw1wAsKIpK9Ef6c5i8KZHGseq0wygVUdtRthY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:45","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:46.307Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:46","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:46.325Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:46","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:46","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:46.334Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:46","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHMAKFQ1fKhBLzlFUad8CbynsVhRwmxmN12cnByjftOD9NoSBXVw9TfKlL2xQZDe9rgfxyLZ8yp_rw1wAsKIpK9Ef6c5i8KZHGseq0wygVUdtRthY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:57","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:59","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:10:59.267Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:10:59","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGUmDMvLi5htpOR6JT6gz_5_CXT7b9P-0vDYkcqMOgaXotdYxecXtl9zNMHfQPj1wtpvPLUmeAiysEderIAVGwRUfbhM34gS0b3XfwY3yrfnuNplUQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGUmDMvLi5htpOR6JT6gz_5_CXT7b9P-0vDYkcqMOgaXotdYxecXtl9zNMHfQPj1wtpvPLUmeAiysEderIAVGwRUfbhM34gS0b3XfwY3yrfnuNplUQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGUmDMvLi5htpOR6JT6gz_5_CXT7b9P-0vDYkcqMOgaXotdYxecXtl9zNMHfQPj1wtpvPLUmeAiysEderIAVGwRUfbhM34gS0b3XfwY3yrfnuNplUQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGUmDMvLi5htpOR6JT6gz_5_CXT7b9P-0vDYkcqMOgaXotdYxecXtl9zNMHfQPj1wtpvPLUmeAiysEderIAVGwRUfbhM34gS0b3XfwY3yrfnuNplUQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:09","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGUmDMvLi5htpOR6JT6gz_5_CXT7b9P-0vDYkcqMOgaXotdYxecXtl9zNMHfQPj1wtpvPLUmeAiysEderIAVGwRUfbhM34gS0b3XfwY3yrfnuNplUQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:09","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:10.896Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:10","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:10.914Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:10","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:10.921Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:10","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:11.145Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:11","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:11","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:11.154Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:11","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOMfwM1hRW_pbjq_paCavaYijIAFmBn1US5gcqLnT8uebb6rYNJVKU3z5BYwlqo0u2T8CvQAzyQCJWWf4QzfU_MncQ8dSQlloakqq9SoytEYMPNWA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOMfwM1hRW_pbjq_paCavaYijIAFmBn1US5gcqLnT8uebb6rYNJVKU3z5BYwlqo0u2T8CvQAzyQCJWWf4QzfU_MncQ8dSQlloakqq9SoytEYMPNWA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOMfwM1hRW_pbjq_paCavaYijIAFmBn1US5gcqLnT8uebb6rYNJVKU3z5BYwlqo0u2T8CvQAzyQCJWWf4QzfU_MncQ8dSQlloakqq9SoytEYMPNWA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:12","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOMfwM1hRW_pbjq_paCavaYijIAFmBn1US5gcqLnT8uebb6rYNJVKU3z5BYwlqo0u2T8CvQAzyQCJWWf4QzfU_MncQ8dSQlloakqq9SoytEYMPNWA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:12","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:13.043Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:13.059Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:13.061Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:13.073Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:13","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOMfwM1hRW_pbjq_paCavaYijIAFmBn1US5gcqLnT8uebb6rYNJVKU3z5BYwlqo0u2T8CvQAzyQCJWWf4QzfU_MncQ8dSQlloakqq9SoytEYMPNWA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:16","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFOMfwM1hRW_pbjq_paCavaYijIAFmBn1US5gcqLnT8uebb6rYNJVKU3z5BYwlqo0u2T8CvQAzyQCJWWf4QzfU_MncQ8dSQlloakqq9SoytEYMPNWA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:16","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:17.345Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:17","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:17","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:17.347Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:17","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEOUQujwO2Hnz7NtgyWy-HbpeZYjIHG_I9DlAf1Ha8dObNDAGnItLNhwQYfnVv9SsgtNm0FsDYjAg0AeINSvX2brSMtHkjIIK7NpycW06qtvBtCwIY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEOUQujwO2Hnz7NtgyWy-HbpeZYjIHG_I9DlAf1Ha8dObNDAGnItLNhwQYfnVv9SsgtNm0FsDYjAg0AeINSvX2brSMtHkjIIK7NpycW06qtvBtCwIY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEOUQujwO2Hnz7NtgyWy-HbpeZYjIHG_I9DlAf1Ha8dObNDAGnItLNhwQYfnVv9SsgtNm0FsDYjAg0AeINSvX2brSMtHkjIIK7NpycW06qtvBtCwIY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:20.665Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:20.668Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:11:20.670Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:11:20","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEOUQujwO2Hnz7NtgyWy-HbpeZYjIHG_I9DlAf1Ha8dObNDAGnItLNhwQYfnVv9SsgtNm0FsDYjAg0AeINSvX2brSMtHkjIIK7NpycW06qtvBtCwIY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:27","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEOUQujwO2Hnz7NtgyWy-HbpeZYjIHG_I9DlAf1Ha8dObNDAGnItLNhwQYfnVv9SsgtNm0FsDYjAg0AeINSvX2brSMtHkjIIK7NpycW06qtvBtCwIY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:27","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:13:29.630Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:29","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:29","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:13:29.885Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:29","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnKSkD5386ffekwDHCENjF2dsP8aGEkUhVofN9v3Z8ICnd7HBPemxXfc_Lq-xkZXsywgVltDdixNXm7CJqRsBlcJtadFTKlArAQEAlvoddrqaZ0dA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnKSkD5386ffekwDHCENjF2dsP8aGEkUhVofN9v3Z8ICnd7HBPemxXfc_Lq-xkZXsywgVltDdixNXm7CJqRsBlcJtadFTKlArAQEAlvoddrqaZ0dA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnKSkD5386ffekwDHCENjF2dsP8aGEkUhVofN9v3Z8ICnd7HBPemxXfc_Lq-xkZXsywgVltDdixNXm7CJqRsBlcJtadFTKlArAQEAlvoddrqaZ0dA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:13:31.776Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:13:31.781Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:13:31.782Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:13:31","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnKSkD5386ffekwDHCENjF2dsP8aGEkUhVofN9v3Z8ICnd7HBPemxXfc_Lq-xkZXsywgVltDdixNXm7CJqRsBlcJtadFTKlArAQEAlvoddrqaZ0dA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:00","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHnKSkD5386ffekwDHCENjF2dsP8aGEkUhVofN9v3Z8ICnd7HBPemxXfc_Lq-xkZXsywgVltDdixNXm7CJqRsBlcJtadFTKlArAQEAlvoddrqaZ0dA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:00","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:14:02.034Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:02","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:02","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:14:02.254Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:02","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoKDGWsz2m6aDJbsmtnBcADuI2tRoJrtgWHnosNTVP-n8PERNSLOTq5wE_44lhcDUuBvAbwZ1J_P1iwML69F0yvEaPEsnk0YTlJCpRTY5A9sShlr4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoKDGWsz2m6aDJbsmtnBcADuI2tRoJrtgWHnosNTVP-n8PERNSLOTq5wE_44lhcDUuBvAbwZ1J_P1iwML69F0yvEaPEsnk0YTlJCpRTY5A9sShlr4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:03","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:14:04.129Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:04","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:04","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:14:04.136Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:14:04","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoKDGWsz2m6aDJbsmtnBcADuI2tRoJrtgWHnosNTVP-n8PERNSLOTq5wE_44lhcDUuBvAbwZ1J_P1iwML69F0yvEaPEsnk0YTlJCpRTY5A9sShlr4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:40","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoKDGWsz2m6aDJbsmtnBcADuI2tRoJrtgWHnosNTVP-n8PERNSLOTq5wE_44lhcDUuBvAbwZ1J_P1iwML69F0yvEaPEsnk0YTlJCpRTY5A9sShlr4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:40","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoKDGWsz2m6aDJbsmtnBcADuI2tRoJrtgWHnosNTVP-n8PERNSLOTq5wE_44lhcDUuBvAbwZ1J_P1iwML69F0yvEaPEsnk0YTlJCpRTY5A9sShlr4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:40","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:42.283Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:42","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:42.498Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:42","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:42.499Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:42","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvd6qfnPK98yZYIcNR-7jwwL_syzOU6XAeiyXU6oqUou0pZ5KdNS8SOr6W30UiVivtz21wFsQ9GHc5NwCGwG5wSXZX6378zvXsslUV2KqityVmeMI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvd6qfnPK98yZYIcNR-7jwwL_syzOU6XAeiyXU6oqUou0pZ5KdNS8SOr6W30UiVivtz21wFsQ9GHc5NwCGwG5wSXZX6378zvXsslUV2KqityVmeMI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvd6qfnPK98yZYIcNR-7jwwL_syzOU6XAeiyXU6oqUou0pZ5KdNS8SOr6W30UiVivtz21wFsQ9GHc5NwCGwG5wSXZX6378zvXsslUV2KqityVmeMI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvd6qfnPK98yZYIcNR-7jwwL_syzOU6XAeiyXU6oqUou0pZ5KdNS8SOr6W30UiVivtz21wFsQ9GHc5NwCGwG5wSXZX6378zvXsslUV2KqityVmeMI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvd6qfnPK98yZYIcNR-7jwwL_syzOU6XAeiyXU6oqUou0pZ5KdNS8SOr6W30UiVivtz21wFsQ9GHc5NwCGwG5wSXZX6378zvXsslUV2KqityVmeMI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:44.737Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:44.742Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:44.745Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:44.748Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:16:44.760Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:16:44","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvd6qfnPK98yZYIcNR-7jwwL_syzOU6XAeiyXU6oqUou0pZ5KdNS8SOr6W30UiVivtz21wFsQ9GHc5NwCGwG5wSXZX6378zvXsslUV2KqityVmeMI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:05","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHvd6qfnPK98yZYIcNR-7jwwL_syzOU6XAeiyXU6oqUou0pZ5KdNS8SOr6W30UiVivtz21wFsQ9GHc5NwCGwG5wSXZX6378zvXsslUV2KqityVmeMI","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:05","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:06","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:19:06.962Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:06","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:19:07.178Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:07","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHWF4dff6zuoc4RJLl77bqPq4WDnQ4YMgK_N9HD5j7-vEOKhR499YD4iNbNPwSu_4uvxMf7p6jwSVWjwP7RBOKH_yf69sIhd_At9sFXv7vXD7Axx6Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHWF4dff6zuoc4RJLl77bqPq4WDnQ4YMgK_N9HD5j7-vEOKhR499YD4iNbNPwSu_4uvxMf7p6jwSVWjwP7RBOKH_yf69sIhd_At9sFXv7vXD7Axx6Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHWF4dff6zuoc4RJLl77bqPq4WDnQ4YMgK_N9HD5j7-vEOKhR499YD4iNbNPwSu_4uvxMf7p6jwSVWjwP7RBOKH_yf69sIhd_At9sFXv7vXD7Axx6Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:19:08.679Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:19:08.687Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:19:08.694Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:08","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:19:55","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:19:55","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:19:55","type":"warn"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:19:56","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:19:56","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:19:56","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:19:56","type":"route","userId":14}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:19:57","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:19:57","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:19:58","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:00","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:03","type":"message","userId":"14"}
{"count":7,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8206,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8206,"response":"projects/easy-notifications-post/messages/0:1754281206973603%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8206,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8206,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:20:05","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8206,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:05","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281206973603%d193f810d193f810","sentAt":"2025-08-04T04:20:05.924Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8206,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:20:05","type":"delivery"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:07","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:09","type":"message","userId":"14"}
{"count":8,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:11","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8207,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:12","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:12","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:12","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","type":"message","userId":"14"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8207,"response":"projects/easy-notifications-post/messages/0:1754281214394239%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8207,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8207,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:20:13","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8207,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:13","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281214394239%d193f810d193f810","sentAt":"2025-08-04T04:20:13.349Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8207,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:20:13","type":"delivery"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:15","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:17","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:19","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:21","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:23","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:25","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:27","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:29","type":"message","userId":"14"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:31","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8208,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8208,"response":"projects/easy-notifications-post/messages/0:1754281236702043%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8208,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8208,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:20:35","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8208,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:35","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281236702043%d193f810d193f810","sentAt":"2025-08-04T04:20:35.651Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8208,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:20:35","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHWF4dff6zuoc4RJLl77bqPq4WDnQ4YMgK_N9HD5j7-vEOKhR499YD4iNbNPwSu_4uvxMf7p6jwSVWjwP7RBOKH_yf69sIhd_At9sFXv7vXD7Axx6Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHWF4dff6zuoc4RJLl77bqPq4WDnQ4YMgK_N9HD5j7-vEOKhR499YD4iNbNPwSu_4uvxMf7p6jwSVWjwP7RBOKH_yf69sIhd_At9sFXv7vXD7Axx6Q","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:20:38.975Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:38","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:39","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:20:39.232Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:39","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:39","type":"route","userId":14}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:39","type":"message","userId":"14"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:39","type":"message","userId":"14"}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:41","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHW1ThReXKSjuSRftx8w8gHi_Mz7mUyzLmFiIXx_a9txMhbotWkCAGakaNS1CvgOdlqOKzP1v-577r7-2D-x3T5E6Fei2EN9qO6bejuZ6FFNVSzyg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:41","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHW1ThReXKSjuSRftx8w8gHi_Mz7mUyzLmFiIXx_a9txMhbotWkCAGakaNS1CvgOdlqOKzP1v-577r7-2D-x3T5E6Fei2EN9qO6bejuZ6FFNVSzyg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:41","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHW1ThReXKSjuSRftx8w8gHi_Mz7mUyzLmFiIXx_a9txMhbotWkCAGakaNS1CvgOdlqOKzP1v-577r7-2D-x3T5E6Fei2EN9qO6bejuZ6FFNVSzyg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:41","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:20:42.084Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:42","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:20:42.087Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:42","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:42","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:20:42.089Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:42","userId":14}
{"count":10,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8209,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8209,"response":"projects/easy-notifications-post/messages/0:1754281245046461%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8209,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8209,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:20:43","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8209,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:43","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281245046461%d193f810d193f810","sentAt":"2025-08-04T04:20:43.990Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8209,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:20:43","type":"delivery"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:45","type":"message","userId":"14"}
{"count":11,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:47","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8210,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:48","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:48","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:48","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","type":"message","userId":"14"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8210,"response":"projects/easy-notifications-post/messages/0:1754281250290127%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8210,"service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8210,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:20:49","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8210,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:20:49","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281250290127%d193f810d193f810","sentAt":"2025-08-04T04:20:49.240Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8210,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:20:49","type":"delivery"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:51","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:53","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:55","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:57","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:20:59","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:01","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:03","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:05","type":"message","userId":"14"}
{"count":12,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:07","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:21:33","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:21:33","type":"warn"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:21:33","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:21:33","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'contato.kdesign@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:21:33","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'contato.kdesign@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:21:33","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:21:34","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:21:34","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:21:35","type":"route","userId":15}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:21:35","type":"query","userId":15}
{"level":"info","message":"Rota encontrada","route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:21:35","type":"route","userId":15}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:35","type":"message","userId":"15"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:35","type":"message","userId":"15"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:35","type":"message","userId":"15"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:37","type":"message","userId":"15"}
{"count":9,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:39","type":"message","userId":"15"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 15","service":"notifications-app-api","timestamp":"2025-08-04 01:21:39","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-04 01:21:39","type":"query"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:41","type":"message","userId":"15"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:43","type":"message","userId":"15"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:21:45","type":"message","userId":"15"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'contato.kdesign@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:21:46","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:21:46","type":"query"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":false,"level":"info","message":"Iniciando envio com FCM","messageId":8211,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:22:16","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":8211,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:16","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":8211,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:16","token":"ExponentPushToken[I0...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":8211,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:16","token":"ExponentPushToken[I0...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":8211,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:16","type":"warn"}
{"hasWebToken":false,"level":"info","message":"Web Push não disponível","messageId":8211,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:16","type":"message"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8211,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 01:22:16","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8211,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:22:16","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":null},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8211,"overallDelivery":"FAILED","pushDelivered":false,"route":"teste","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:22:16","type":"delivery"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:22:21","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:22:21","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'contato.kdesign@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:22:21","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:22:21","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:22:21","type":"route","userId":15}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:22:21","type":"query","userId":15}
{"level":"info","message":"Rota encontrada","route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:22:22","type":"route","userId":15}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:22:22","type":"message","userId":"15"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:22:22","type":"message","userId":"15"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:22:24","type":"message","userId":"15"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:22:26","type":"message","userId":"15"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":false,"level":"info","message":"Iniciando envio com FCM","messageId":8212,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:22:26","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":8212,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:26","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":8212,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:26","token":"ExponentPushToken[I0...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":8212,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:26","token":"ExponentPushToken[I0...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":8212,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:27","type":"warn"}
{"hasWebToken":false,"level":"info","message":"Web Push não disponível","messageId":8212,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:27","type":"message"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8212,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 01:22:27","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8212,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:22:27","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":null},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8212,"overallDelivery":"FAILED","pushDelivered":false,"route":"teste","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:22:27","type":"delivery"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:22:28","type":"message","userId":"15"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:22:30","type":"message","userId":"15"}
{"count":2,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:22:32","type":"message","userId":"15"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8213,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:22:45","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:45","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:45","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8213,"response":"projects/easy-notifications-post/messages/0:1754281367181887%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:22:46","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:46","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:46","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:46","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:46","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8213,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:46","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8213,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:22:46","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8213,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:22:46","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281367181887%d193f810d193f810","sentAt":"2025-08-04T04:22:46.125Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8213,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:22:46","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":false,"level":"info","message":"Iniciando envio com FCM","messageId":8214,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:22:54","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":8214,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:54","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":8214,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:54","token":"ExponentPushToken[I0...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":8214,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:54","token":"ExponentPushToken[I0...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":8214,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:54","type":"warn"}
{"hasWebToken":false,"level":"info","message":"Web Push não disponível","messageId":8214,"service":"notifications-app-api","timestamp":"2025-08-04 01:22:54","type":"message"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8214,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 01:22:54","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8214,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:22:54","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":null},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8214,"overallDelivery":"FAILED","pushDelivered":false,"route":"teste","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:22:54","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":false,"level":"info","message":"Iniciando envio com FCM","messageId":8215,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:23:02","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":8215,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:02","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":8215,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:02","token":"ExponentPushToken[I0...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":8215,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:02","token":"ExponentPushToken[I0...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":8215,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:03","type":"warn"}
{"hasWebToken":false,"level":"info","message":"Web Push não disponível","messageId":8215,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:03","type":"message"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8215,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 01:23:03","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8215,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:23:03","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":null},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8215,"overallDelivery":"FAILED","pushDelivered":false,"route":"teste","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:23:03","type":"delivery"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":false,"level":"info","message":"Iniciando envio com FCM","messageId":8216,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:23:05","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":8216,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:05","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":8216,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:05","token":"ExponentPushToken[I0...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":8216,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:05","token":"ExponentPushToken[I0...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":8216,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:05","type":"warn"}
{"hasWebToken":false,"level":"info","message":"Web Push não disponível","messageId":8216,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:05","type":"message"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8216,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 01:23:05","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8216,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:23:05","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":null},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8216,"overallDelivery":"FAILED","pushDelivered":false,"route":"teste","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:23:05","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGHW1ThReXKSjuSRftx8w8gHi_Mz7mUyzLmFiIXx_a9txMhbotWkCAGakaNS1CvgOdlqOKzP1v-577r7-2D-x3T5E6Fei2EN9qO6bejuZ6FFNVSzyg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:09","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:23:10.391Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:10","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:23:12","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 01:23:12","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 01:23:12","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 01:23:12","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:23:12","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 01:23:12","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:12","type":"route","userId":14}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:13","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFo1txEoRYp5MjLPnn59hZzISt8LHiiSkM8juvapYqGL9Gqzsftx3B2boZNplbNDDUHhl06q-4-ngRUA0lr7dBPQP6oM8S0CgBMR_PyorNIe8auPjk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:13","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFo1txEoRYp5MjLPnn59hZzISt8LHiiSkM8juvapYqGL9Gqzsftx3B2boZNplbNDDUHhl06q-4-ngRUA0lr7dBPQP6oM8S0CgBMR_PyorNIe8auPjk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:13","webTokenLength":0}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:13","type":"message","userId":"14"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:23:14.071Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:14","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:14","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T04:23:14.072Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:14","userId":14}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:14","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:16","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:18","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:21","type":"message","userId":"14"}
{"fcmTokenLength":0,"fcmTokenStart":"N/A","hasExpoToken":true,"hasFcmToken":false,"hasWebToken":false,"level":"info","message":"Iniciando envio com FCM","messageId":8217,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:23:22","type":"message"}
{"hasToken":false,"level":"info","message":"FCM não disponível - sem token","messageId":8217,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:22","type":"message"}
{"level":"info","message":"Tentando envio Expo (fallback)","messageId":8217,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:22","token":"ExponentPushToken[I0...","type":"message"}
{"level":"info","message":"Enviando notificação Expo","messageId":8217,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:22","token":"ExponentPushToken[I0...","type":"message"}
{"expoError":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","level":"warn","message":"Expo falhou","messageId":8217,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:22","type":"warn"}
{"hasWebToken":false,"level":"info","message":"Web Push não disponível","messageId":8217,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:22","type":"message"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8217,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 01:23:22","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8217,"route":"teste","service":"notifications-app-api","timestamp":"2025-08-04 01:23:22","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":{"error":"EXPO_FCM_CREDENTIALS_ERROR","message":"Expo não consegue acessar credenciais FCM. Configure as credenciais no Expo Dashboard.","response":{"data":{"details":{"error":"InvalidCredentials","fault":"developer"},"message":"Unable to retrieve the FCM server key for the recipient's app. Make sure you have provided a server key as directed by the Expo FCM documentation.","status":"error"}},"success":false},"fcm":{"error":"NO_FCM_TOKEN","message":"Usuário não possui token FCM","success":false},"web":null},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8217,"overallDelivery":"FAILED","pushDelivered":false,"route":"teste","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:23:22","type":"delivery"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:23","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:25","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:27","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:29","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:31","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:33","type":"message","userId":"14"}
{"count":13,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:35","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8218,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:35","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:35","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8218,"response":"projects/easy-notifications-post/messages/0:1754281417233478%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:23:36","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:36","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:36","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:36","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:36","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8218,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:36","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8218,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:23:36","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8218,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:36","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281417233478%d193f810d193f810","sentAt":"2025-08-04T04:23:36.171Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8218,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:23:36","type":"delivery"}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:37","type":"message","userId":"14"}
{"count":14,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:39","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8219,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8219,"response":"projects/easy-notifications-post/messages/0:1754281422025991%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8219,"service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8219,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 01:23:40","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8219,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 01:23:40","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754281422025991%d193f810d193f810","sentAt":"2025-08-04T04:23:40.979Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8219,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 01:23:40","type":"delivery"}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:41","type":"message","userId":"14"}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:43","type":"message","userId":"14"}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:45","type":"message","userId":"14"}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:47","type":"message","userId":"14"}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:49","type":"message","userId":"14"}
{"count":15,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 01:23:51","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 01:23:55"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 01:23:55"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 10:57:23"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 10:57:23"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoFC3It4gZNdCQGA5qXaas95lKW7KMde0fyuFTGUZgzn0d78X7Dplcd2h4XDczgPYuN9cYFNc2z8zhI3CeKxo92D62eu3yq2hyWwYkTUdHUTorOOA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoFC3It4gZNdCQGA5qXaas95lKW7KMde0fyuFTGUZgzn0d78X7Dplcd2h4XDczgPYuN9cYFNc2z8zhI3CeKxo92D62eu3yq2hyWwYkTUdHUTorOOA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bHoFC3It4gZNdCQGA5qXaas95lKW7KMde0fyuFTGUZgzn0d78X7Dplcd2h4XDczgPYuN9cYFNc2z8zhI3CeKxo92D62eu3yq2hyWwYkTUdHUTorOOA","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:49","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEzDPjm6Utz-Nw7Cj0dFSSy4rBx7F-Q9-qZe0s2HYb1vCBOo4x-Tdb5kNscdLVXwDEVSFichIjROLuG8xjsP7k_2yhOYlDqP9Ihm8OBfuma6B6ZyEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEzDPjm6Utz-Nw7Cj0dFSSy4rBx7F-Q9-qZe0s2HYb1vCBOo4x-Tdb5kNscdLVXwDEVSFichIjROLuG8xjsP7k_2yhOYlDqP9Ihm8OBfuma6B6ZyEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEzDPjm6Utz-Nw7Cj0dFSSy4rBx7F-Q9-qZe0s2HYb1vCBOo4x-Tdb5kNscdLVXwDEVSFichIjROLuG8xjsP7k_2yhOYlDqP9Ihm8OBfuma6B6ZyEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEzDPjm6Utz-Nw7Cj0dFSSy4rBx7F-Q9-qZe0s2HYb1vCBOo4x-Tdb5kNscdLVXwDEVSFichIjROLuG8xjsP7k_2yhOYlDqP9Ihm8OBfuma6B6ZyEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:51","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEzDPjm6Utz-Nw7Cj0dFSSy4rBx7F-Q9-qZe0s2HYb1vCBOo4x-Tdb5kNscdLVXwDEVSFichIjROLuG8xjsP7k_2yhOYlDqP9Ihm8OBfuma6B6ZyEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:51","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.213Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.231Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.379Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.404Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.487Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.499Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.638Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:57:53.655Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:57:53","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEzDPjm6Utz-Nw7Cj0dFSSy4rBx7F-Q9-qZe0s2HYb1vCBOo4x-Tdb5kNscdLVXwDEVSFichIjROLuG8xjsP7k_2yhOYlDqP9Ihm8OBfuma6B6ZyEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:10","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEzDPjm6Utz-Nw7Cj0dFSSy4rBx7F-Q9-qZe0s2HYb1vCBOo4x-Tdb5kNscdLVXwDEVSFichIjROLuG8xjsP7k_2yhOYlDqP9Ihm8OBfuma6B6ZyEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:10","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:59:12.491Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:59:12.519Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:12","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGzlMsadbo6Q9oY85AkA3uRUtodxyV5-GS-y4M47JXqNxKjl6WJYtF1AQfHPMWVfPqHrT1DHychwaro3tAlcWu0gRFhZQg-epy6qAciuMfW6K3Ewj8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGzlMsadbo6Q9oY85AkA3uRUtodxyV5-GS-y4M47JXqNxKjl6WJYtF1AQfHPMWVfPqHrT1DHychwaro3tAlcWu0gRFhZQg-epy6qAciuMfW6K3Ewj8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGzlMsadbo6Q9oY85AkA3uRUtodxyV5-GS-y4M47JXqNxKjl6WJYtF1AQfHPMWVfPqHrT1DHychwaro3tAlcWu0gRFhZQg-epy6qAciuMfW6K3Ewj8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:14","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:59:15.033Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:59:15.197Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T13:59:15.259Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:15","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 10:59:31","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 10:59:31","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 10:59:31","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 10:59:33","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 10:59:33","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 10:59:33","type":"query","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 10:59:33","type":"route","userId":14}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:33","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:33","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:35","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:37","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:39","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:41","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:43","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:45","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:47","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:49","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:51","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:53","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:55","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:57","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 10:59:59","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:01","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:03","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:05","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:07","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:09","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:11","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:13","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:15","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:17","type":"message","userId":"14"}
{"count":16,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:19","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"DELETE FROM messages WHERE user_id = 14","service":"notifications-app-api","timestamp":"2025-08-04 11:00:21","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"DELETE","service":"notifications-app-api","timestamp":"2025-08-04 11:00:21","type":"query"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:21","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:23","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:25","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:27","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:29","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:31","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:33","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:35","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:37","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:39","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGzlMsadbo6Q9oY85AkA3uRUtodxyV5-GS-y4M47JXqNxKjl6WJYtF1AQfHPMWVfPqHrT1DHychwaro3tAlcWu0gRFhZQg-epy6qAciuMfW6K3Ewj8","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:40","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:41","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:00:41.209Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:41","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:41","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:43","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGqUSJoksE0mW5-wK8BJAsCvklH_qg5cvJXP6nApPDCTdohxZ5ge8pa0SOMV5R1aYYhP2l_keDbWtLkrM6o57_r3Ur50YvG83NYhJo6DGy6yn8cALQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGqUSJoksE0mW5-wK8BJAsCvklH_qg5cvJXP6nApPDCTdohxZ5ge8pa0SOMV5R1aYYhP2l_keDbWtLkrM6o57_r3Ur50YvG83NYhJo6DGy6yn8cALQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:44","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:44","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:00:44.806Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:44","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:00:45.024Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:00:45","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:45","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:47","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:49","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:51","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:53","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:55","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:57","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:00:59","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:01","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:03","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:05","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:07","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:09","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:12","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:14","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:16","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:01:18","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:01:19","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:01:19","type":"query"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGqUSJoksE0mW5-wK8BJAsCvklH_qg5cvJXP6nApPDCTdohxZ5ge8pa0SOMV5R1aYYhP2l_keDbWtLkrM6o57_r3Ur50YvG83NYhJo6DGy6yn8cALQ","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:05","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:03:07.451Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:07","userId":14}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH2siStMB1M353206_Vy7rlDXanbR4LlwLRwdgJFc-dqWhJZU_x2hW6CwF8MK78kbbTrjDSUNTm0uqkFMh79isIQ3ukVQ9HHs7tbP_lASU2LrileMY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH2siStMB1M353206_Vy7rlDXanbR4LlwLRwdgJFc-dqWhJZU_x2hW6CwF8MK78kbbTrjDSUNTm0uqkFMh79isIQ3ukVQ9HHs7tbP_lASU2LrileMY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:08","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:03:09.586Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:09","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:03:09.801Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:09","userId":14}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET webhook = 'https://primary-production-b8514.up.railway.app/webhook/655433c2-7c3d-4f40-af7c-aeb8539e992e' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-08-04 11:03:28","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 11:03:30","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"query","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:36","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:03:37","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:03:38","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:03:38","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET webhook = 'https://primary-production-b8514.up.railway.app/webhook/655433c2-7c3d-4f40-af7c-aeb8539e992e' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-08-04 11:03:51","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 11:03:53","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:03:55","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:03:55","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:03:57","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 11:03:57","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:03:57","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:03:58","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:03:58","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:03:58","type":"query","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:03:58","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:03:58","type":"route","userId":14}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:03:58","type":"message","userId":"14"}
{"count":0,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:04:00","type":"message","userId":"14"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:04:00","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:04:00","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET webhook = 'https://primary-production-b8514.up.railway.app/webhook/655433c2-7c3d-4f40-af7c-aeb8539e992e' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-08-04 11:04:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 11:04:05","type":"query"}
{"level":"info","message":"Execução de consulta SQL","query":"UPDATE users SET webhook = 'https://primary-production-b8514.up.railway.app/webhook/655433c2-7c3d-4f40-af7c-aeb8539e992e' WHERE id = 14","service":"notifications-app-api","timestamp":"2025-08-04 11:04:05","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"UPDATE","service":"notifications-app-api","timestamp":"2025-08-04 11:04:06","type":"query"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8221,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:04:42","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:42","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:42","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8221,"response":"projects/easy-notifications-post/messages/0:1754316282589517%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 11:04:43","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:43","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:43","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:43","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:43","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8221,"service":"notifications-app-api","timestamp":"2025-08-04 11:04:43","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8221,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 11:04:43","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8221,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:04:43","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754316282589517%d193f810d193f810","sentAt":"2025-08-04T14:04:43.521Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8221,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 11:04:43","type":"delivery"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:05:02","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:05:03","type":"query"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH2siStMB1M353206_Vy7rlDXanbR4LlwLRwdgJFc-dqWhJZU_x2hW6CwF8MK78kbbTrjDSUNTm0uqkFMh79isIQ3ukVQ9HHs7tbP_lASU2LrileMY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH2siStMB1M353206_Vy7rlDXanbR4LlwLRwdgJFc-dqWhJZU_x2hW6CwF8MK78kbbTrjDSUNTm0uqkFMh79isIQ3ukVQ9HHs7tbP_lASU2LrileMY","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 11:05:08","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:05:09.052Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:09","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:09","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:05:09.288Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:09","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:09","type":"route","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:09","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:09","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:11","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGCrj24HZW1C3esy-M-xywfdOe2LLK6WwKSgn5Ji2ziqQJekgjeADxkRgcCW0hUl1MGVx3LMsAm03y7OdEFGpxXOPAyG_SUxf2Q_8eQtmUwUmIzbEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGCrj24HZW1C3esy-M-xywfdOe2LLK6WwKSgn5Ji2ziqQJekgjeADxkRgcCW0hUl1MGVx3LMsAm03y7OdEFGpxXOPAyG_SUxf2Q_8eQtmUwUmIzbEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bGCrj24HZW1C3esy-M-xywfdOe2LLK6WwKSgn5Ji2ziqQJekgjeADxkRgcCW0hUl1MGVx3LMsAm03y7OdEFGpxXOPAyG_SUxf2Q_8eQtmUwUmIzbEk","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:11","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:05:12.036Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:05:12.039Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:12","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T14:05:12.042Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 11:05:12","userId":14}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:13","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:15","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:17","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:19","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:21","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:23","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:25","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:27","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:29","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:31","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:33","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:35","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:37","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:39","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:41","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:43","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:45","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:47","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:49","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:51","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:53","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:55","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:57","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:05:59","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:01","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:03","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:05","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:07","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:09","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:11","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:13","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:15","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:17","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:19","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:21","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:23","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:25","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:27","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:29","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:31","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:33","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:35","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:37","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:39","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:41","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:43","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:45","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:47","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:49","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:51","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:53","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:55","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:57","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:06:59","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:01","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:04","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:06","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:08","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:10","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:12","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:14","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:16","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:18","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:20","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:22","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:24","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:26","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:28","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:30","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:32","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:34","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:36","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:38","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:40","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:42","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:44","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:46","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:48","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:50","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:52","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:54","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:56","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:07:58","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:00","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:02","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:04","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:06","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:08","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:10","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:12","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:14","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:16","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:18","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:20","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:22","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:24","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:26","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:28","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:30","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:32","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:34","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:36","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:38","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:40","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:42","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:44","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:46","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:48","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:50","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:52","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:54","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:56","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:08:58","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:00","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:02","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:04","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:06","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:08","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:10","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:12","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:14","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:16","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:18","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:20","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:22","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:25","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:27","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:29","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:31","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:33","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:35","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:37","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:39","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:41","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:43","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:45","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:47","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:49","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:51","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:53","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:55","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:57","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:09:59","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:01","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:03","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:05","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:07","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:09","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:11","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:13","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:15","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:17","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:19","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:21","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:23","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:25","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:27","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:29","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:31","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:33","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:35","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:37","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:39","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:41","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:43","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:45","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:47","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:49","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:51","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:53","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:55","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:57","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:10:59","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:01","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:03","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:05","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:07","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:09","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:11","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:13","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:15","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:17","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:19","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:21","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:23","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:25","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:27","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:29","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:31","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:33","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:35","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:37","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:39","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:41","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:43","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:45","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:47","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:49","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:51","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:53","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:55","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:57","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:11:59","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:01","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:03","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:05","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:07","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:09","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:11","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:13","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:15","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:17","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:19","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:21","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:23","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:25","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:27","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:29","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:31","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:33","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:35","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:37","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:39","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:41","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:43","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:45","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:48","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:50","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:52","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:54","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:56","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:12:58","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:00","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:02","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:04","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:06","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:08","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:10","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:12","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:14","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:16","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:18","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:20","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:22","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:24","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:26","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:28","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:30","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:32","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:34","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:36","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:38","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:40","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:42","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:44","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:46","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:48","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:50","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:52","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:54","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:56","type":"message","userId":"14"}
{"count":1,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 11:13:58","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:48:00"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:48:00"}
{"count":22,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:10","type":"message","userId":"14"}
{"count":22,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:10","type":"message","userId":"14"}
{"count":22,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:10","type":"message","userId":"14"}
{"count":22,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:10","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8243,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8243,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:11","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8243,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8243,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:11","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:11","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:48:13"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:48:13"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:16","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":23,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8244,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message","userId":"14"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8244,"service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8244,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 12:48:17","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8244,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:17","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8244,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 12:48:17","type":"delivery"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:19","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bER5bt4JCfL93AuhjuqArNKYVSbDbBOM67P4X9t6E3iMiBst0uQxuOZkKyADMclKZiTKQdiTzft10Oy9ddffufmCU1fEaLVHhUMx5rpb3jqqV3kmc0","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","webTokenLength":0}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:48:20.770Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","userId":14}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:21","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7fA3PqpSnoXXr3Almui6lcudrrIS0FM-pYP4jE699DZQbDQSUWLbSjNRbF07QzKZ-5oG0uFtz_TYMTOnjed_SkFYvH9MLtZew5ByxVYyUqZVeD8k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:23","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7fA3PqpSnoXXr3Almui6lcudrrIS0FM-pYP4jE699DZQbDQSUWLbSjNRbF07QzKZ-5oG0uFtz_TYMTOnjed_SkFYvH9MLtZew5ByxVYyUqZVeD8k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:23","webTokenLength":0}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:23","type":"message","userId":"14"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:23","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:48:23.885Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:23","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:23","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:48:23.888Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:48:23","userId":14}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:25","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:27","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:29","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:31","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:33","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:35","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:48:39"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:48:39"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:42","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:42","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:42","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:44","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:46","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:48","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:50","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:52","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:54","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:56","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:48:58","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:00","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:02","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:04","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:06","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:08","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:10","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:12","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:14","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:16","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:20","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:22","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:24","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:26","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:28","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:30","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:32","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:34","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:36","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:49:39"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:49:39"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:42","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:42","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:42","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:44","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:46","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:48","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:50","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:52","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:54","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:49:56","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:50:00"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:50:00"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:03","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:03","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:03","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:04","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:06","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:08","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:10","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:12","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:14","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:16","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:18","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:20","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:50:23"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:50:23"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:26","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:26","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:26","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:28","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:30","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:32","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:34","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:36","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:38","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:40","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:50:42"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:50:42"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:45","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:45","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:46","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:48","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:50","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:52","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:54","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:56","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:50:58","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:00","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:51:03"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:51:03"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:06","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:06","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:07","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:08","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:10","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:12","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:14","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:16","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:18","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:51:22"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:51:22"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:24","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:25","type":"message","userId":"14"}
{"count":24,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:25","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8245,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:51:25","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:25","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:25","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8245,"service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8245,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 12:51:26","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8245,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8245,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 12:51:26","type":"delivery"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:26","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:28","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:30","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:32","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:34","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:36","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:38","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:40","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:42","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:44","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:46","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:48","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:50","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:52","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:54","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:56","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:51:58","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:00","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:02","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:04","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:06","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:08","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:10","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:12","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:14","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:17","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:19","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:21","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:23","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:25","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:27","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:29","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:31","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:33","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:35","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:37","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:39","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:41","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:43","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:45","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:47","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:49","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:51","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:53","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:52:55","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:52:58"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:52:58"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:01","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:01","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:01","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:03","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:05","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:07","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:09","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:11","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:13","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:15","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:17","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:19","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:21","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:23","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:25","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:27","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:29","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:31","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:33","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:35","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:37","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:39","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:41","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:43","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:45","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:47","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:49","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:51","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:53","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:55","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:57","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:53:59","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:01","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:03","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:05","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG7fA3PqpSnoXXr3Almui6lcudrrIS0FM-pYP4jE699DZQbDQSUWLbSjNRbF07QzKZ-5oG0uFtz_TYMTOnjed_SkFYvH9MLtZew5ByxVYyUqZVeD8k","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:07","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:07","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:54:07.723Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:07","userId":14}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:08","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:09","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFsNQNIHyhH1KSNsD0sUH6AS_As1uTNO5X_K81IIX6RzG_9TuCzk3YI08bV6F-o6XVpNwbWzFQf4Y2hi79RFUj0yx69a-FSiCtxcZFERAqUVqUw0Ss","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:10","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFsNQNIHyhH1KSNsD0sUH6AS_As1uTNO5X_K81IIX6RzG_9TuCzk3YI08bV6F-o6XVpNwbWzFQf4Y2hi79RFUj0yx69a-FSiCtxcZFERAqUVqUw0Ss","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:10","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:54:10.658Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:10","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:10","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:54:10.774Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:10","userId":14}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:11","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:13","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:15","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:17","type":"message","userId":"14"}
{"count":25,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:19","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8246,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:20","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:20","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:20","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:21","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:21","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:22","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:22","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:22","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8246,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:22","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8246,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 12:54:23","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8246,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:23","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8246,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 12:54:23","type":"delivery"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:23","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:24","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:25","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:27","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:30","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:31","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:33","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:35","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:38","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:39","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:41","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:44","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:46","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:47","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFsNQNIHyhH1KSNsD0sUH6AS_As1uTNO5X_K81IIX6RzG_9TuCzk3YI08bV6F-o6XVpNwbWzFQf4Y2hi79RFUj0yx69a-FSiCtxcZFERAqUVqUw0Ss","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:49","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:49","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:54:49.753Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:49","userId":14}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:50","type":"message","userId":"14"}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:52","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3_Oe23PWJ3ZF61y4rgf029U4-LztBxn3EKxeRi0KKAr-DadF_qfytWPy6u2Ub1ZSaFJ42NkfCUhB1zTr8TFbEoIz7OZfGSGWBeY6REWkAQQS0hHw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:52","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3_Oe23PWJ3ZF61y4rgf029U4-LztBxn3EKxeRi0KKAr-DadF_qfytWPy6u2Ub1ZSaFJ42NkfCUhB1zTr8TFbEoIz7OZfGSGWBeY6REWkAQQS0hHw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:52","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:54:53.169Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:53","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:53","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T15:54:53.418Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:53","userId":14}
{"count":26,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:54","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8247,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8247,"service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8247,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 12:54:56","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8247,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8247,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 12:54:56","type":"delivery"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:56","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:54:58","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:00","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:02","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:04","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:06","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:08","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:10","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:55:15"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:55:15"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:18","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:18","type":"message","userId":"14"}
{"count":27,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:19","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8248,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:55:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:20","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","type":"message","userId":"14"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8248,"service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8248,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 12:55:21","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8248,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:55:21","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8248,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 12:55:21","type":"delivery"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:22","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:24","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:26","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:28","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:30","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:32","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:34","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:36","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:38","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:40","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:42","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:44","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:55:49"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:55:49"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:52","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:52","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:52","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:53","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:54","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:56","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:55:58","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:00","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:02","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:04","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:06","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:08","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:10","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:12","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:14","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:16","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:18","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:20","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:22","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:24","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:26","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:28","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:30","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:32","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:34","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:36","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:38","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:40","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:42","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:44","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:56:46","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:59:06"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:59:06"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:10","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:10","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:10","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message","userId":"14"}
{"count":28,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8249,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message","userId":"14"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8249,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8249,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 12:59:11","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8249,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8249,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 12:59:11","type":"delivery"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:11","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:12","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:13","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:14","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:15","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:17","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:59:22"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:59:22"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:24","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:24","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:24","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:25","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:27","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:29","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:31","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:33","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:35","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:37","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:39","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:41","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:43","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:45","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 12:59:52"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 12:59:52"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:54","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:54","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:54","type":"message","userId":"14"}
{"count":29,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:54","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8250,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8250,"service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8250,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 12:59:55","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8250,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8250,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 12:59:55","type":"delivery"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:55","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:57","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 12:59:59","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:01","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:03","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:05","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:07","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:09","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:11","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 13:00:16"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 13:00:16"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:18","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:18","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:19","type":"message","userId":"14"}
{"count":30,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:19","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8251,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:00:19","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:19","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:19","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:20","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:20","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:20","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:20","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:20","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8251,"service":"notifications-app-api","timestamp":"2025-08-04 13:00:20","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8251,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 13:00:20","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8251,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:00:20","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8251,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:00:20","type":"delivery"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:21","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:23","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:25","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:27","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:29","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:31","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:33","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:35","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:37","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:39","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:41","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:43","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:45","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:47","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:49","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:51","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:53","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:55","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:57","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:00:59","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:01","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:03","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:05","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:07","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:09","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:11","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:13","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:15","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:17","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:19","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:21","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:23","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:25","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:27","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:29","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:31","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:33","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:35","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:37","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:39","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:41","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:43","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:45","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:47","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:49","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:51","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:53","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:55","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:01:57","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:00","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:02","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:04","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:06","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:08","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:10","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:12","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:14","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:16","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:18","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:20","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:22","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:24","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:26","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:28","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:30","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:32","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:34","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:36","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:38","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:40","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:42","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:44","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:46","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:48","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:50","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:52","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:54","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:56","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:02:58","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:00","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:02","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:04","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:06","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:08","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:10","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:12","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:14","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:16","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:18","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:20","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 13:03:24"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 13:03:24"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:27","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:27","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:27","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:28","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:30","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:32","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:34","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:36","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:38","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:40","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:42","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:44","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:46","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:48","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:50","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:52","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:54","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:56","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:03:58","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:00","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 13:04:02"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 13:04:02"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:05","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:05","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:06","type":"message","userId":"14"}
{"count":31,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:08","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8252,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:04:10","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:10","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:10","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:12","type":"message","userId":"14"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:12","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:12","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:12","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:13","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:13","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8252,"service":"notifications-app-api","timestamp":"2025-08-04 13:04:13","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8252,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 13:04:14","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8252,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:04:14","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8252,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:04:14","type":"delivery"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:14","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:15","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:16","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:18","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:20","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 13:04:24"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 13:04:24"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:26","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:27","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:27","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:28","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:30","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:32","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:34","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:36","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:38","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:40","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:42","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:44","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:46","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:48","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:50","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:52","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:54","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:56","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:04:59","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:00","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:02","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:04","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:06","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:08","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:10","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:12","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:14","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:16","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:18","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:21","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:23","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:25","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:27","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:29","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:31","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:33","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:35","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:37","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:39","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:41","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:43","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:45","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:47","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:49","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:51","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:53","type":"message","userId":"14"}
{"count":32,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:55","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8253,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"FCM_ERROR","fcmMessage":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8253,"service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8253,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 13:05:56","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8253,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:05:56","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"FCM_ERROR","message":"Credential implementation provided to initializeApp() via the \"credential\" property failed to fetch a valid Google OAuth2 access token with the following error: \"invalid_grant: Invalid JWT Signature.\". There are two likely causes: (1) your server time is not properly synced or (2) your certificate key file has been revoked. To solve (1), re-sync the time on your server. To solve (2), make sure the key ID for your key file is still present at https://console.firebase.google.com/iam-admin/serviceaccounts/project. If not, generate a new key file at https://console.firebase.google.com/project/_/settings/serviceaccounts/adminsdk.","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8253,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:05:56","type":"delivery"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:57","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:05:59","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:01","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:03","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:05","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:07","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:09","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:11","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:13","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:15","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:17","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:19","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:21","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:23","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:25","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:27","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:29","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:31","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:33","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:35","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:37","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:39","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:41","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:43","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:45","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:47","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:49","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:51","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:53","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:55","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:57","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:06:59","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:01","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:03","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:05","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:07","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:09","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:11","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:13","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:15","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:17","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:19","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:21","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:23","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:25","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:27","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:29","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:31","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:33","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:35","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:37","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:39","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:41","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:43","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:45","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:47","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:49","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:51","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:53","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:55","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:57","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:07:59","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:01","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:03","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:05","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:07","type":"message","userId":"14"}
{"level":"info","message":"Servidor iniciado na porta 3200","service":"notifications-app-api","timestamp":"2025-08-04 13:08:11"}
{"level":"info","message":"Sistema de notificações com FCM nativo ativo","service":"notifications-app-api","timestamp":"2025-08-04 13:08:11"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:14","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:15","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:15","type":"message","userId":"14"}
{"count":33,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:15","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8254,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8254,"response":"projects/easy-notifications-post/messages/0:1754323695847151%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 13:08:16","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:16","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:16","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:16","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:16","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8254,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:16","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8254,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 13:08:16","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8254,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:16","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754323695847151%d193f810d193f810","sentAt":"2025-08-04T16:08:16.580Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8254,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:08:16","type":"delivery"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:17","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:19","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:21","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:23","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:25","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:27","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:29","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bH3_Oe23PWJ3ZF61y4rgf029U4-LztBxn3EKxeRi0KKAr-DadF_qfytWPy6u2Ub1ZSaFJ42NkfCUhB1zTr8TFbEoIz7OZfGSGWBeY6REWkAQQS0hHw","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:30","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:31","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:08:31.230Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:31","userId":14}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:31","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFQb2BACi5ZnmwsdHCgPbO2pZlPZVAJgFvI5AVMDrjok28tSRT-GgdASeoQ5cbujvgbbffuWKr2ncNYZA1pZkF6sFB7wL8G8OX8Vnu2OkArFfuOKV4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:33","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFQb2BACi5ZnmwsdHCgPbO2pZlPZVAJgFvI5AVMDrjok28tSRT-GgdASeoQ5cbujvgbbffuWKr2ncNYZA1pZkF6sFB7wL8G8OX8Vnu2OkArFfuOKV4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:33","webTokenLength":0}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:33","type":"message","userId":"14"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:08:34.439Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:34","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:34","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:08:34.649Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:34","userId":14}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:35","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:37","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:39","type":"message","userId":"14"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"query","userId":14}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:45","type":"route","userId":14}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:46","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:48","type":"message","userId":"14"}
{"count":34,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:49","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8255,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8255,"response":"projects/easy-notifications-post/messages/0:1754323730994852%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8255,"service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8255,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 13:08:51","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8255,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754323730994852%d193f810d193f810","sentAt":"2025-08-04T16:08:51.733Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8255,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:08:51","type":"delivery"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:51","type":"message","userId":"14"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:53","type":"message","userId":"14"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:55","type":"message","userId":"14"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:57","type":"message","userId":"14"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:08:59","type":"message","userId":"14"}
{"count":35,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:01","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8256,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8256,"response":"projects/easy-notifications-post/messages/0:1754323742202849%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8256,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8256,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 13:09:02","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8256,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:02","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754323742202849%d193f810d193f810","sentAt":"2025-08-04T16:09:02.955Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8256,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:09:02","type":"delivery"}
{"count":36,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:03","type":"message","userId":"14"}
{"count":36,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:05","type":"message","userId":"14"}
{"count":36,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:07","type":"message","userId":"14"}
{"count":36,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:09","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFQb2BACi5ZnmwsdHCgPbO2pZlPZVAJgFvI5AVMDrjok28tSRT-GgdASeoQ5cbujvgbbffuWKr2ncNYZA1pZkF6sFB7wL8G8OX8Vnu2OkArFfuOKV4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:11","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFQb2BACi5ZnmwsdHCgPbO2pZlPZVAJgFvI5AVMDrjok28tSRT-GgdASeoQ5cbujvgbbffuWKr2ncNYZA1pZkF6sFB7wL8G8OX8Vnu2OkArFfuOKV4","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:11","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:09:11","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 13:09:11","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 13:09:11","type":"query"}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 13:09:11","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:12.035Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","userId":14}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:12.208Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","type":"route","userId":14}
{"count":36,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","type":"message","userId":"14"}
{"count":36,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:12","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEvzIyk_8yiZ6cfuDFDcvrrXRFlFbpeJ4dv325cDaiIn_k0cHWcv8y-PGYfcfOXUNJAse1tHqQ7ct35lccyPEkgSthUc3T-Jhjb76sgNPCYLJmGOzg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEvzIyk_8yiZ6cfuDFDcvrrXRFlFbpeJ4dv325cDaiIn_k0cHWcv8y-PGYfcfOXUNJAse1tHqQ7ct35lccyPEkgSthUc3T-Jhjb76sgNPCYLJmGOzg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:14","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEvzIyk_8yiZ6cfuDFDcvrrXRFlFbpeJ4dv325cDaiIn_k0cHWcv8y-PGYfcfOXUNJAse1tHqQ7ct35lccyPEkgSthUc3T-Jhjb76sgNPCYLJmGOzg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:14","webTokenLength":0}
{"count":36,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:14","type":"message","userId":"14"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:15.066Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:15.069Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:15.070Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","userId":14}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8257,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8257,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8257,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 13:09:15","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8257,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:15","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8257,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:09:15","type":"delivery"}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:16","type":"message","userId":"14"}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:18","type":"message","userId":"14"}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:20","type":"message","userId":"14"}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:22","type":"message","userId":"14"}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:24","type":"message","userId":"14"}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:26","type":"message","userId":"14"}
{"count":37,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:28","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8258,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:29","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:29","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:29","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8258,"response":"projects/easy-notifications-post/messages/0:1754323769364050%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8258,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8258,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 13:09:30","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8258,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754323769364050%d193f810d193f810","sentAt":"2025-08-04T16:09:30.107Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8258,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:09:30","type":"delivery"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:30","type":"message","userId":"14"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:32","type":"message","userId":"14"}
{"count":38,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:34","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8259,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8259,"response":"projects/easy-notifications-post/messages/0:1754323774611489%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8259,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8259,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 13:09:35","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8259,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:35","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754323774611489%d193f810d193f810","sentAt":"2025-08-04T16:09:35.369Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8259,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:09:35","type":"delivery"}
{"count":39,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:36","type":"message","userId":"14"}
{"count":39,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8260,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8260,"response":"projects/easy-notifications-post/messages/0:1754323778227743%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8260,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8260,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 13:09:38","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8260,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:38","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754323778227743%d193f810d193f810","sentAt":"2025-08-04T16:09:38.975Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8260,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:09:38","type":"delivery"}
{"count":40,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:40","type":"message","userId":"14"}
{"count":40,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:42","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEvzIyk_8yiZ6cfuDFDcvrrXRFlFbpeJ4dv325cDaiIn_k0cHWcv8y-PGYfcfOXUNJAse1tHqQ7ct35lccyPEkgSthUc3T-Jhjb76sgNPCYLJmGOzg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:44","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bEvzIyk_8yiZ6cfuDFDcvrrXRFlFbpeJ4dv325cDaiIn_k0cHWcv8y-PGYfcfOXUNJAse1tHqQ7ct35lccyPEkgSthUc3T-Jhjb76sgNPCYLJmGOzg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:44","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:09:44","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 13:09:44","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 13:09:44","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:45.143Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:45.163Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","type":"query","userId":14}
{"count":40,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","type":"message","userId":"14"}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","type":"route","userId":14}
{"count":40,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:45","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8261,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"error":"Requested entity was not found.","level":"error","message":"Erro ao enviar notificação FCM","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","token":"cYmFXBr4T5-TW3hag5wg..."}
{"fcmError":"INVALID_TOKEN","fcmMessage":"Token FCM inválido ou não registrado","level":"warn","message":"FCM falhou - tentando fallbacks","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","type":"warn"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8261,"service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"FAILED","pushNotification":"FAILED"},"level":"info","message":"Resumo do envio","messageId":8261,"results":{"expo":false,"fcm":false,"web":false},"service":"notifications-app-api","successCount":0,"timestamp":"2025-08-04 13:09:47","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8261,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"error":"INVALID_TOKEN","message":"Token FCM inválido ou não registrado","success":false},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":false,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8261,"overallDelivery":"FAILED","pushDelivered":false,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:09:47","type":"delivery"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG9UEr_jYabMxK4FLhRuoVNrRIN1dPqCCYsNTCMer4Q1UdRsRiWpgWsd0YxhaVObNLnx183TskyszcD_SSo_uJWhbYHzW8b5nM94wQnx7CXLfUSI88","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG9UEr_jYabMxK4FLhRuoVNrRIN1dPqCCYsNTCMer4Q1UdRsRiWpgWsd0YxhaVObNLnx183TskyszcD_SSo_uJWhbYHzW8b5nM94wQnx7CXLfUSI88","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG9UEr_jYabMxK4FLhRuoVNrRIN1dPqCCYsNTCMer4Q1UdRsRiWpgWsd0YxhaVObNLnx183TskyszcD_SSo_uJWhbYHzW8b5nM94wQnx7CXLfUSI88","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","webTokenLength":0}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:47","type":"message","userId":"14"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:48.336Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:48","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:48.338Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:48","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:48","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:09:48.368Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:09:48","userId":14}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:49","type":"message","userId":"14"}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:51","type":"message","userId":"14"}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:53","type":"message","userId":"14"}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:55","type":"message","userId":"14"}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:09:57","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG9UEr_jYabMxK4FLhRuoVNrRIN1dPqCCYsNTCMer4Q1UdRsRiWpgWsd0YxhaVObNLnx183TskyszcD_SSo_uJWhbYHzW8b5nM94wQnx7CXLfUSI88","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:00","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bG9UEr_jYabMxK4FLhRuoVNrRIN1dPqCCYsNTCMer4Q1UdRsRiWpgWsd0YxhaVObNLnx183TskyszcD_SSo_uJWhbYHzW8b5nM94wQnx7CXLfUSI88","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:00","webTokenLength":0}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:10:00","type":"route","userId":null}
{"level":"warn","message":"Tentativa de verificar rota sem userId","service":"notifications-app-api","timestamp":"2025-08-04 13:10:00","type":"warn"}
{"level":"info","message":"Execução de consulta SQL","query":"SELECT * from users WHERE email = 'feliperosenek@gmail.com'","service":"notifications-app-api","timestamp":"2025-08-04 13:10:00","type":"query"}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:10:01.055Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","userId":14}
{"level":"info","message":"Consulta SQL executada com sucesso","queryType":"SELECT","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","type":"query"}
{"level":"info","message":"Verificação de rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","type":"route","userId":14}
{"level":"info","message":"Consultando rota do usuário","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","type":"query","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:10:01.480Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","userId":14}
{"level":"info","message":"Rota encontrada","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","type":"route","userId":14}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","type":"message","userId":"14"}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:01","type":"message","userId":"14"}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFnEtz2GCuwlQbW40KqKyeHk0-cf9l-BHjt0EXDsYgkd_NokOR3YcXSbjb4XDHC6hSo_c5xn_-vsLHImSjcneu4o8MMeRBrf3aOvI_8Gw3zDlRJVNg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFnEtz2GCuwlQbW40KqKyeHk0-cf9l-BHjt0EXDsYgkd_NokOR3YcXSbjb4XDHC6hSo_c5xn_-vsLHImSjcneu4o8MMeRBrf3aOvI_8Gw3zDlRJVNg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","webTokenLength":0}
{"expoTokenLength":0,"fcmTokenLength":142,"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Iniciando atualização de tokens","requestBody":{"fcmToken":"cYmFXBr4T5-TW3hag5wgDu:APA91bFnEtz2GCuwlQbW40KqKyeHk0-cf9l-BHjt0EXDsYgkd_NokOR3YcXSbjb4XDHC6hSo_c5xn_-vsLHImSjcneu4o8MMeRBrf3aOvI_8Gw3zDlRJVNg","platform":"android","route":"felipe"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","webTokenLength":0}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:10:03.719Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:10:03.725Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","userId":14}
{"hasExpoToken":false,"hasFCMToken":true,"hasWebToken":false,"level":"info","message":"Tokens atualizados com sucesso","route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","updatedFields":1,"userId":14}
{"level":"info","message":"Resposta de sucesso enviada","response":{"message":"Tokens atualizados com sucesso","success":true,"updatedAt":"2025-08-04T16:10:03.729Z"},"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:03","userId":14}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:04","type":"message","userId":"14"}
{"count":41,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:05","type":"message","userId":"14"}
{"fcmTokenLength":142,"fcmTokenStart":"cYmFXBr4T5","hasExpoToken":true,"hasFcmToken":true,"hasWebToken":true,"level":"info","message":"Iniciando envio com FCM","messageId":8262,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:06","type":"message"}
{"hasToken":true,"isValidToken":true,"level":"info","message":"Verificando token FCM","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:06","tokenLength":142,"tokenStart":"cYmFXBr4T5-TW3hag5wg...","tokenStartsWithFmep":false,"type":"message"}
{"level":"info","message":"Tentando envio FCM","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Enviando notificação FCM","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:06","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8262,"response":"projects/easy-notifications-post/messages/0:1754323806397370%d193f810d193f810","service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","type":"message"}
{"level":"info","message":"Notificação FCM enviada com sucesso","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","token":"cYmFXBr4T5-TW3hag5wg...","type":"message"}
{"hasExpoToken":true,"hasFcmToken":true,"level":"info","message":"Expo não disponível","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","type":"message"}
{"level":"info","message":"Tentando envio Web Push","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","type":"message"}
{"level":"info","message":"Web Push não implementado - usando fallback","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","token":"dAZaUnOaqpISUzpiPT3g...","type":"message"}
{"level":"warn","message":"Web Push falhou","messageId":8262,"service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","type":"warn","webError":"Web Push não implementado"}
{"deliveryStatus":{"overallSuccess":"PARTIAL","pushNotification":"DELIVERED"},"level":"info","message":"Resumo do envio","messageId":8262,"results":{"expo":false,"fcm":true,"web":false},"service":"notifications-app-api","successCount":1,"timestamp":"2025-08-04 13:10:07","totalMethods":3,"type":"message"}
{"level":"info","message":"Nenhum cliente SSE conectado para rota","messageId":8262,"route":"felipe","service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","type":"message"}
{"appNotified":false,"deliveryResults":{"expo":null,"fcm":{"messageId":"projects/easy-notifications-post/messages/0:1754323806397370%d193f810d193f810","sentAt":"2025-08-04T16:10:07.133Z","success":true},"web":{"error":"Web Push não implementado","message":"Web Push requer configuração adicional com VAPID keys","success":false}},"fcmSuccess":true,"level":"info","message":"Mensagem processada com FCM e SSE","messageId":8262,"overallDelivery":"SUCCESS","pushDelivered":true,"route":"felipe","service":"notifications-app-api","sseResult":{"clientsCount":0,"message":"Nenhum cliente SSE conectado","success":false},"sseSuccess":false,"timestamp":"2025-08-04 13:10:07","type":"delivery"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:07","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:09","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:11","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:13","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:15","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:17","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:19","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:21","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:23","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:25","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:27","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:29","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:31","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:33","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:35","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:37","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:39","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:41","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:43","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:45","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:47","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:49","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:51","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:53","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:55","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:10:57","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:00","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:02","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:04","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:06","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:08","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:10","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:12","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:14","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:16","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:18","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:20","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:22","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:24","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:26","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:28","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:30","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:32","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:34","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:36","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:38","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:40","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:42","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:44","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:46","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:48","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:50","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:52","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:54","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:56","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:11:58","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:00","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:02","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:04","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:06","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:08","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:10","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:12","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:14","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:16","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:18","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:20","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:22","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:24","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:26","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:28","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:30","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:32","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:34","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:36","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:38","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:40","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:42","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:44","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:46","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:48","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:50","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:52","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:54","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:56","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:12:58","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:00","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:02","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:04","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:06","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:08","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:10","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:12","type":"message","userId":"14"}
{"count":42,"level":"info","message":"Mensagens recuperadas","service":"notifications-app-api","timestamp":"2025-08-04 13:13:14","type":"message","userId":"14"}
